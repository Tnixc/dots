"use strict";var $r=Object.create;var Xe=Object.defineProperty;var Vr=Object.getOwnPropertyDescriptor;var Jr=Object.getOwnPropertyNames;var Yr=Object.getPrototypeOf,Xr=Object.prototype.hasOwnProperty;var Zr=(l,c)=>()=>(c||l((c={exports:{}}).exports,c),c.exports),ei=(l,c)=>{for(var h in c)Xe(l,h,{get:c[h],enumerable:!0})},On=(l,c,h,d)=>{if(c&&typeof c=="object"||typeof c=="function")for(let g of Jr(c))!Xr.call(l,g)&&g!==h&&Xe(l,g,{get:()=>c[g],enumerable:!(d=Vr(c,g))||d.enumerable});return l};var Hn=(l,c,h)=>(h=l!=null?$r(Yr(l)):{},On(c||!l||!l.__esModule?Xe(h,"default",{value:l,enumerable:!0}):h,l)),ti=l=>On(Xe({},"__esModule",{value:!0}),l);var Vn=Zr((ct,me)=>{"use strict";var ut=void 0,lt=function(l){return ut||(ut=new Promise(function(c,h){var d=typeof l<"u"?l:{},g=d.onAbort;d.onAbort=function(e){h(new Error(e)),g&&g(e)},d.postRun=d.postRun||[],d.postRun.push(function(){c(d)}),me=void 0;var i;i||(i=typeof d<"u"?d:{}),i.onRuntimeInitialized=function(){function e(a,f){this.La=a,this.db=f,this.Ja=1,this.eb=[]}function t(a,f){if(this.db=f,f=de(a)+1,this.Ya=$e(f),this.Ya===null)throw Error("Unable to allocate memory for the SQL string");se(a,F,this.Ya,f),this.cb=this.Ya,this.Ua=this.ib=null}function n(a){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),a!=null){var f=this.filename,y="/",b=f;if(y&&(y=typeof y=="string"?y:De(y),b=f?V(y+"/"+f):y),f=Dn(!0,!0),b=Fe(b,(f!==void 0?f:438)&4095|32768,0),a){if(typeof a=="string"){y=Array(a.length);for(var S=0,j=a.length;S<j;++S)y[S]=a.charCodeAt(S);a=y}je(b,f|146),y=ce(b,577),vn(y,a,0,a.length,0,void 0),Bt(y),je(b,f)}}this.handleError(s(this.filename,r)),this.db=$(r,"i32"),Qr(this.db),this.Za={},this.Ra={}}var r=J(4),o=i.cwrap,s=o("sqlite3_open","number",["string","number"]),p=o("sqlite3_close_v2","number",["number"]),_=o("sqlite3_exec","number",["number","string","number","number","number"]),v=o("sqlite3_changes","number",["number"]),k=o("sqlite3_prepare_v2","number",["number","string","number","number","number"]),L=o("sqlite3_sql","string",["number"]),Y=o("sqlite3_normalized_sql","string",["number"]),Ht=o("sqlite3_prepare_v2","number",["number","number","number","number","number"]),_r=o("sqlite3_bind_text","number",["number","number","number","number","number"]),Bn=o("sqlite3_bind_blob","number",["number","number","number","number","number"]),vr=o("sqlite3_bind_double","number",["number","number","number"]),kr=o("sqlite3_bind_int","number",["number","number","number"]),qr=o("sqlite3_bind_parameter_index","number",["number","string"]),Dr=o("sqlite3_step","number",["number"]),Ir=o("sqlite3_errmsg","string",["number"]),xr=o("sqlite3_column_count","number",["number"]),Sr=o("sqlite3_data_count","number",["number"]),Er=o("sqlite3_column_double","number",["number","number"]),Rn=o("sqlite3_column_text","string",["number","number"]),Ar=o("sqlite3_column_blob","number",["number","number"]),Lr=o("sqlite3_column_bytes","number",["number","number"]),Br=o("sqlite3_column_type","number",["number","number"]),Rr=o("sqlite3_column_name","string",["number","number"]),Mr=o("sqlite3_reset","number",["number"]),Tr=o("sqlite3_clear_bindings","number",["number"]),Pr=o("sqlite3_finalize","number",["number"]),Or=o("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),Hr=o("sqlite3_value_type","number",["number"]),Ur=o("sqlite3_value_bytes","number",["number"]),Gr=o("sqlite3_value_text","string",["number"]),Fr=o("sqlite3_value_blob","number",["number"]),Cr=o("sqlite3_value_double","number",["number"]),jr=o("sqlite3_result_double","",["number","number"]),Mn=o("sqlite3_result_null","",["number"]),Nr=o("sqlite3_result_text","",["number","string","number","number"]),zr=o("sqlite3_result_blob","",["number","number","number","number"]),Wr=o("sqlite3_result_int","",["number","number"]),Tn=o("sqlite3_result_error","",["number","string","number"]),Qr=o("RegisterExtensionFunctions","number",["number"]);e.prototype.bind=function(a){if(!this.La)throw"Statement closed";return this.reset(),Array.isArray(a)?this.xb(a):a!=null&&typeof a=="object"?this.yb(a):!0},e.prototype.step=function(){if(!this.La)throw"Statement closed";this.Ja=1;var a=Dr(this.La);switch(a){case 100:return!0;case 101:return!1;default:throw this.db.handleError(a)}},e.prototype.sb=function(a){return a==null&&(a=this.Ja,this.Ja+=1),Er(this.La,a)},e.prototype.Cb=function(a){if(a==null&&(a=this.Ja,this.Ja+=1),a=Rn(this.La,a),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(a)},e.prototype.Db=function(a){return a==null&&(a=this.Ja,this.Ja+=1),Rn(this.La,a)},e.prototype.getBlob=function(a){a==null&&(a=this.Ja,this.Ja+=1);var f=Lr(this.La,a);a=Ar(this.La,a);for(var y=new Uint8Array(f),b=0;b<f;b+=1)y[b]=E[a+b];return y},e.prototype.get=function(a,f){f=f||{},a!=null&&this.bind(a)&&this.step(),a=[];for(var y=Sr(this.La),b=0;b<y;b+=1)switch(Br(this.La,b)){case 1:var S=f.useBigInt?this.Cb(b):this.sb(b);a.push(S);break;case 2:a.push(this.sb(b));break;case 3:a.push(this.Db(b));break;case 4:a.push(this.getBlob(b));break;default:a.push(null)}return a},e.prototype.getColumnNames=function(){for(var a=[],f=xr(this.La),y=0;y<f;y+=1)a.push(Rr(this.La,y));return a},e.prototype.getAsObject=function(a,f){a=this.get(a,f),f=this.getColumnNames();for(var y={},b=0;b<f.length;b+=1)y[f[b]]=a[b];return y},e.prototype.getSQL=function(){return L(this.La)},e.prototype.getNormalizedSQL=function(){return Y(this.La)},e.prototype.run=function(a){return a!=null&&this.bind(a),this.step(),this.reset()},e.prototype.nb=function(a,f){f==null&&(f=this.Ja,this.Ja+=1),a=En(a);var y=wt(a);this.eb.push(y),this.db.handleError(_r(this.La,f,y,a.length-1,0))},e.prototype.wb=function(a,f){f==null&&(f=this.Ja,this.Ja+=1);var y=wt(a);this.eb.push(y),this.db.handleError(Bn(this.La,f,y,a.length,0))},e.prototype.mb=function(a,f){f==null&&(f=this.Ja,this.Ja+=1),this.db.handleError((a===(a|0)?kr:vr)(this.La,f,a))},e.prototype.zb=function(a){a==null&&(a=this.Ja,this.Ja+=1),Bn(this.La,a,0,0,0)},e.prototype.ob=function(a,f){switch(f==null&&(f=this.Ja,this.Ja+=1),typeof a){case"string":this.nb(a,f);return;case"number":this.mb(a,f);return;case"bigint":this.nb(a.toString(),f);return;case"boolean":this.mb(a+0,f);return;case"object":if(a===null){this.zb(f);return}if(a.length!=null){this.wb(a,f);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+a+")."},e.prototype.yb=function(a){var f=this;return Object.keys(a).forEach(function(y){var b=qr(f.La,y);b!==0&&f.ob(a[y],b)}),!0},e.prototype.xb=function(a){for(var f=0;f<a.length;f+=1)this.ob(a[f],f+1);return!0},e.prototype.reset=function(){return this.freemem(),Tr(this.La)===0&&Mr(this.La)===0},e.prototype.freemem=function(){for(var a;(a=this.eb.pop())!==void 0;)Ve(a)},e.prototype.free=function(){this.freemem();var a=Pr(this.La)===0;return delete this.db.Za[this.La],this.La=0,a},t.prototype.next=function(){if(this.Ya===null)return{done:!0};if(this.Ua!==null&&(this.Ua.free(),this.Ua=null),!this.db.db)throw this.gb(),Error("Database closed");var a=Se(),f=J(4);ke(r),ke(f);try{this.db.handleError(Ht(this.db.db,this.cb,-1,r,f)),this.cb=$(f,"i32");var y=$(r,"i32");return y===0?(this.gb(),{done:!0}):(this.Ua=new e(y,this.db),this.db.Za[y]=this.Ua,{value:this.Ua,done:!1})}catch(b){throw this.ib=A(this.cb),this.gb(),b}finally{Ee(a)}},t.prototype.gb=function(){Ve(this.Ya),this.Ya=null},t.prototype.getRemainingSQL=function(){return this.ib!==null?this.ib:A(this.cb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(t.prototype[Symbol.iterator]=function(){return this}),n.prototype.run=function(a,f){if(!this.db)throw"Database closed";if(f){a=this.prepare(a,f);try{a.step()}finally{a.free()}}else this.handleError(_(this.db,a,0,0,r));return this},n.prototype.exec=function(a,f,y){if(!this.db)throw"Database closed";var b=Se(),S=null;try{var j=de(a)+1,H=J(j);se(a,E,H,j);var we=H,fe=J(4);for(a=[];$(we,"i8")!==0;){ke(r),ke(fe),this.handleError(Ht(this.db,we,-1,r,fe));var T=$(r,"i32");if(we=$(fe,"i32"),T!==0){for(j=null,S=new e(T,this),f!=null&&S.bind(f);S.step();)j===null&&(j={columns:S.getColumnNames(),values:[]},a.push(j)),j.values.push(S.get(null,y));S.free()}}return a}catch(N){throw S&&S.free(),N}finally{Ee(b)}},n.prototype.each=function(a,f,y,b,S){typeof f=="function"&&(b=y,y=f,f=void 0),a=this.prepare(a,f);try{for(;a.step();)y(a.getAsObject(null,S))}finally{a.free()}if(typeof b=="function")return b()},n.prototype.prepare=function(a,f){if(ke(r),this.handleError(k(this.db,a,-1,r,0)),a=$(r,"i32"),a===0)throw"Nothing to prepare";var y=new e(a,this);return f!=null&&y.bind(f),this.Za[a]=y},n.prototype.iterateStatements=function(a){return new t(a,this)},n.prototype.export=function(){Object.values(this.Za).forEach(function(f){f.free()}),Object.values(this.Ra).forEach(bt),this.Ra={},this.handleError(p(this.db));var a=br(this.filename);return this.handleError(s(this.filename,r)),this.db=$(r,"i32"),a},n.prototype.close=function(){this.db!==null&&(Object.values(this.Za).forEach(function(a){a.free()}),Object.values(this.Ra).forEach(bt),this.Ra={},this.handleError(p(this.db)),dn("/"+this.filename),this.db=null)},n.prototype.handleError=function(a){if(a===0)return null;throw a=Ir(this.db),Error(a)},n.prototype.getRowsModified=function(){return v(this.db)},n.prototype.create_function=function(a,f){Object.prototype.hasOwnProperty.call(this.Ra,a)&&(bt(this.Ra[a]),delete this.Ra[a]);var y=tr(function(b,S,j){for(var H,we=[],fe=0;fe<S;fe+=1){var T=$(j+4*fe,"i32"),N=Hr(T);if(N===1||N===2)T=Cr(T);else if(N===3)T=Gr(T);else if(N===4){N=T,T=Ur(N),N=Fr(N);for(var Pn=new Uint8Array(T),Ye=0;Ye<T;Ye+=1)Pn[Ye]=E[N+Ye];T=Pn}else T=null;we.push(T)}try{H=f.apply(null,we)}catch(Kr){Tn(b,Kr,-1);return}switch(typeof H){case"boolean":Wr(b,H?1:0);break;case"number":jr(b,H);break;case"string":Nr(b,H,-1,-1);break;case"object":H===null?Mn(b):H.length!=null?(S=wt(H),zr(b,S,H.length,-1),Ve(S)):Tn(b,"Wrong API use : tried to return a value of an unknown type ("+H+").",-1);break;default:Mn(b)}});return this.Ra[a]=y,this.handleError(Or(this.db,a,f.length,1,0,y,0,0,0)),this},i.Database=n};var q=Object.assign({},i),x="./this.program",K=typeof window=="object",M=typeof importScripts=="function",B=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",R="",ht,Re,Me,Te,Pe,dt;B?(R=M?require("path").dirname(R)+"/":__dirname+"/",dt=()=>{Pe||(Te=require("fs"),Pe=require("path"))},ht=function(e,t){return dt(),e=Pe.normalize(e),Te.readFileSync(e,t?void 0:"utf8")},Me=e=>(e=ht(e,!0),e.buffer||(e=new Uint8Array(e)),e),Re=(e,t,n)=>{dt(),e=Pe.normalize(e),Te.readFile(e,function(r,o){r?n(r):t(o.buffer)})},1<process.argv.length&&(x=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),typeof me<"u"&&(me.exports=i),i.inspect=function(){return"[Emscripten Module object]"}):(K||M)&&(M?R=self.location.href:typeof document<"u"&&document.currentScript&&(R=document.currentScript.src),R=R.indexOf("blob:")!==0?R.substr(0,R.replace(/[?#].*/,"").lastIndexOf("/")+1):"",ht=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},M&&(Me=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),Re=(e,t,n)=>{var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=()=>{r.status==200||r.status==0&&r.response?t(r.response):n()},r.onerror=n,r.send(null)});var Qt=i.print||console.log.bind(console),ie=i.printErr||console.warn.bind(console);Object.assign(i,q),q=null,i.thisProgram&&(x=i.thisProgram);var yt=[],oe;function tr(e){if(!oe){oe=new WeakMap;for(var t=ae.length,n=0;n<0+t;n++){var r=He(n);r&&oe.set(r,n)}}if(oe.has(e))return oe.get(e);if(yt.length)t=yt.pop();else{try{ae.grow(1)}catch(s){throw s instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":s}t=ae.length-1}try{n=t,ae.set(n,e),ye[n]=e}catch(s){if(!(s instanceof TypeError))throw s;if(typeof WebAssembly.Function=="function"){r={i:"i32",j:"i64",f:"f32",d:"f64"};var o={parameters:[],results:[]};for(n=1;4>n;++n)o.parameters.push(r["viii"[n]]);r=new WebAssembly.Function(o,e)}else{for(r=[1,0,1,96],o={i:127,j:126,f:125,d:124},r.push(3),n=0;3>n;++n)r.push(o["iii"[n]]);r.push(0),r[1]=r.length-2,n=new Uint8Array([0,97,115,109,1,0,0,0].concat(r,[2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0])),n=new WebAssembly.Module(n),r=new WebAssembly.Instance(n,{e:{f:e}}).exports.f}n=t,ae.set(n,r),ye[n]=r}return oe.set(e,t),t}function bt(e){oe.delete(He(e)),yt.push(e)}var ve;i.wasmBinary&&(ve=i.wasmBinary);var yi=i.noExitRuntime||!0;typeof WebAssembly!="object"&&Z("no native wasm support detected");function ke(e){var t="i32";switch(t.charAt(t.length-1)==="*"&&(t="i32"),t){case"i1":E[e>>0]=0;break;case"i8":E[e>>0]=0;break;case"i16":Oe[e>>1]=0;break;case"i32":m[e>>2]=0;break;case"i64":G=[0,(I=0,1<=+Math.abs(I)?0<I?(Math.min(+Math.floor(I/4294967296),4294967295)|0)>>>0:~~+Math.ceil((I-+(~~I>>>0))/4294967296)>>>0:0)],m[e>>2]=G[0],m[e+4>>2]=G[1];break;case"float":vt[e>>2]=0;break;case"double":kt[e>>3]=0;break;default:Z("invalid type for setValue: "+t)}}function $(e,t="i8"){switch(t.charAt(t.length-1)==="*"&&(t="i32"),t){case"i1":return E[e>>0];case"i8":return E[e>>0];case"i16":return Oe[e>>1];case"i32":return m[e>>2];case"i64":return m[e>>2];case"float":return vt[e>>2];case"double":return Number(kt[e>>3]);default:Z("invalid type for getValue: "+t)}return null}var gt,Kt=!1;function nr(e,t,n,r){var o={string:function(k){var L=0;if(k!=null&&k!==0){var Y=(k.length<<2)+1;L=J(Y),se(k,F,L,Y)}return L},array:function(k){var L=J(k.length);return E.set(k,L),L}};e=i["_"+e];var s=[],p=0;if(r)for(var _=0;_<r.length;_++){var v=o[n[_]];v?(p===0&&(p=Se()),s[_]=v(r[_])):s[_]=r[_]}return n=e.apply(null,s),n=function(k){return p!==0&&Ee(p),t==="string"?A(k):t==="boolean"?!!k:k}(n)}var rr=0,ir=1;function wt(e){var t=rr==ir?J(e.length):$e(e.length);return e.subarray||e.slice||(e=new Uint8Array(e)),F.set(e,t),t}var $t=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function he(e,t,n){var r=t+n;for(n=t;e[n]&&!(n>=r);)++n;if(16<n-t&&e.buffer&&$t)return $t.decode(e.subarray(t,n));for(r="";t<n;){var o=e[t++];if(o&128){var s=e[t++]&63;if((o&224)==192)r+=String.fromCharCode((o&31)<<6|s);else{var p=e[t++]&63;o=(o&240)==224?(o&15)<<12|s<<6|p:(o&7)<<18|s<<12|p<<6|e[t++]&63,65536>o?r+=String.fromCharCode(o):(o-=65536,r+=String.fromCharCode(55296|o>>10,56320|o&1023))}}else r+=String.fromCharCode(o)}return r}function A(e,t){return e?he(F,e,t):""}function se(e,t,n,r){if(!(0<r))return 0;var o=n;r=n+r-1;for(var s=0;s<e.length;++s){var p=e.charCodeAt(s);if(55296<=p&&57343>=p){var _=e.charCodeAt(++s);p=65536+((p&1023)<<10)|_&1023}if(127>=p){if(n>=r)break;t[n++]=p}else{if(2047>=p){if(n+1>=r)break;t[n++]=192|p>>6}else{if(65535>=p){if(n+2>=r)break;t[n++]=224|p>>12}else{if(n+3>=r)break;t[n++]=240|p>>18,t[n++]=128|p>>12&63}t[n++]=128|p>>6&63}t[n++]=128|p&63}}return t[n]=0,n-o}function de(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);55296<=r&&57343>=r&&(r=65536+((r&1023)<<10)|e.charCodeAt(++n)&1023),127>=r?++t:t=2047>=r?t+2:65535>=r?t+3:t+4}return t}function Vt(e){var t=de(e)+1,n=$e(t);return n&&se(e,E,n,t),n}var _t,E,F,Oe,m,vt,kt;function Jt(){var e=gt.buffer;_t=e,i.HEAP8=E=new Int8Array(e),i.HEAP16=Oe=new Int16Array(e),i.HEAP32=m=new Int32Array(e),i.HEAPU8=F=new Uint8Array(e),i.HEAPU16=new Uint16Array(e),i.HEAPU32=new Uint32Array(e),i.HEAPF32=vt=new Float32Array(e),i.HEAPF64=kt=new Float64Array(e)}var ae,Yt=[],Xt=[],Zt=[];function or(){var e=i.preRun.shift();Yt.unshift(e)}var ue=0,qt=null,qe=null;i.preloadedImages={},i.preloadedAudios={};function Z(e){throw i.onAbort&&i.onAbort(e),e="Aborted("+e+")",ie(e),Kt=!0,new WebAssembly.RuntimeError(e+". Build with -s ASSERTIONS=1 for more info.")}function en(){return U.startsWith("data:application/octet-stream;base64,")}var U;if(U="sql-wasm.wasm",!en()){var tn=U;U=i.locateFile?i.locateFile(tn,R):R+tn}function nn(){var e=U;try{if(e==U&&ve)return new Uint8Array(ve);if(Me)return Me(e);throw"both async and sync fetching of the wasm failed"}catch(t){Z(t)}}function sr(){if(!ve&&(K||M)){if(typeof fetch=="function"&&!U.startsWith("file://"))return fetch(U,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+U+"'";return e.arrayBuffer()}).catch(function(){return nn()});if(Re)return new Promise(function(e,t){Re(U,function(n){e(new Uint8Array(n))},t)})}return Promise.resolve().then(function(){return nn()})}var I,G;function Dt(e){for(;0<e.length;){var t=e.shift();if(typeof t=="function")t(i);else{var n=t.Jb;typeof n=="number"?t.fb===void 0?He(n)():He(n)(t.fb):n(t.fb===void 0?null:t.fb)}}}var ye=[];function He(e){var t=ye[e];return t||(e>=ye.length&&(ye.length=e+1),ye[e]=t=ae.get(e)),t}function It(e,t){for(var n=0,r=e.length-1;0<=r;r--){var o=e[r];o==="."?e.splice(r,1):o===".."?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n;n--)e.unshift("..");return e}function V(e){var t=e.charAt(0)==="/",n=e.substr(-1)==="/";return(e=It(e.split("/").filter(function(r){return!!r}),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e}function ar(e){var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1);return e=t[0],t=t[1],!e&&!t?".":(t&&(t=t.substr(0,t.length-1)),e+t)}function Ue(e){if(e==="/")return"/";e=V(e),e=e.replace(/\/$/,"");var t=e.lastIndexOf("/");return t===-1?e:e.substr(t+1)}function ur(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var e=new Uint8Array(1);return function(){return crypto.getRandomValues(e),e[0]}}if(B)try{var t=require("crypto");return function(){return t.randomBytes(1)[0]}}catch{}return function(){Z("randomDevice")}}function Ge(){for(var e="",t=!1,n=arguments.length-1;-1<=n&&!t;n--){if(t=0<=n?arguments[n]:"/",typeof t!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!t)return"";e=t+"/"+e,t=t.charAt(0)==="/"}return e=It(e.split("/").filter(function(r){return!!r}),!t).join("/"),(t?"/":"")+e||"."}var rn=[];function on(e,t){rn[e]={input:[],output:[],Xa:t},At(e,lr)}var lr={open:function(e){var t=rn[e.node.rdev];if(!t)throw new u(43);e.tty=t,e.seekable=!1},close:function(e){e.tty.Xa.flush(e.tty)},flush:function(e){e.tty.Xa.flush(e.tty)},read:function(e,t,n,r){if(!e.tty||!e.tty.Xa.tb)throw new u(60);for(var o=0,s=0;s<r;s++){try{var p=e.tty.Xa.tb(e.tty)}catch{throw new u(29)}if(p===void 0&&o===0)throw new u(6);if(p==null)break;o++,t[n+s]=p}return o&&(e.node.timestamp=Date.now()),o},write:function(e,t,n,r){if(!e.tty||!e.tty.Xa.jb)throw new u(60);try{for(var o=0;o<r;o++)e.tty.Xa.jb(e.tty,t[n+o])}catch{throw new u(29)}return r&&(e.node.timestamp=Date.now()),o}},cr={tb:function(e){if(!e.input.length){var t=null;if(B){var n=Buffer.alloc(256),r=0;try{r=Te.readSync(process.stdin.fd,n,0,256,-1)}catch(o){if(o.toString().includes("EOF"))r=0;else throw o}0<r?t=n.slice(0,r).toString("utf-8"):t=null}else typeof window<"u"&&typeof window.prompt=="function"?(t=window.prompt("Input: "),t!==null&&(t+=`
`)):typeof readline=="function"&&(t=readline(),t!==null&&(t+=`
`));if(!t)return null;e.input=En(t,!0)}return e.input.shift()},jb:function(e,t){t===null||t===10?(Qt(he(e.output,0)),e.output=[]):t!=0&&e.output.push(t)},flush:function(e){e.output&&0<e.output.length&&(Qt(he(e.output,0)),e.output=[])}},fr={jb:function(e,t){t===null||t===10?(ie(he(e.output,0)),e.output=[]):t!=0&&e.output.push(t)},flush:function(e){e.output&&0<e.output.length&&(ie(he(e.output,0)),e.output=[])}},w={Pa:null,Qa:function(){return w.createNode(null,"/",16895,0)},createNode:function(e,t,n,r){if((n&61440)===24576||(n&61440)===4096)throw new u(63);return w.Pa||(w.Pa={dir:{node:{Oa:w.Ga.Oa,Na:w.Ga.Na,lookup:w.Ga.lookup,$a:w.Ga.$a,rename:w.Ga.rename,unlink:w.Ga.unlink,rmdir:w.Ga.rmdir,readdir:w.Ga.readdir,symlink:w.Ga.symlink},stream:{Ta:w.Ha.Ta}},file:{node:{Oa:w.Ga.Oa,Na:w.Ga.Na},stream:{Ta:w.Ha.Ta,read:w.Ha.read,write:w.Ha.write,lb:w.Ha.lb,ab:w.Ha.ab,bb:w.Ha.bb}},link:{node:{Oa:w.Ga.Oa,Na:w.Ga.Na,readlink:w.Ga.readlink},stream:{}},pb:{node:{Oa:w.Ga.Oa,Na:w.Ga.Na},stream:yr}}),n=ln(e,t,n,r),(n.mode&61440)===16384?(n.Ga=w.Pa.dir.node,n.Ha=w.Pa.dir.stream,n.Ia={}):(n.mode&61440)===32768?(n.Ga=w.Pa.file.node,n.Ha=w.Pa.file.stream,n.Ma=0,n.Ia=null):(n.mode&61440)===40960?(n.Ga=w.Pa.link.node,n.Ha=w.Pa.link.stream):(n.mode&61440)===8192&&(n.Ga=w.Pa.pb.node,n.Ha=w.Pa.pb.stream),n.timestamp=Date.now(),e&&(e.Ia[t]=n,e.timestamp=n.timestamp),n},Kb:function(e){return e.Ia?e.Ia.subarray?e.Ia.subarray(0,e.Ma):new Uint8Array(e.Ia):new Uint8Array(0)},qb:function(e,t){var n=e.Ia?e.Ia.length:0;n>=t||(t=Math.max(t,n*(1048576>n?2:1.125)>>>0),n!=0&&(t=Math.max(t,256)),n=e.Ia,e.Ia=new Uint8Array(t),0<e.Ma&&e.Ia.set(n.subarray(0,e.Ma),0))},Gb:function(e,t){if(e.Ma!=t)if(t==0)e.Ia=null,e.Ma=0;else{var n=e.Ia;e.Ia=new Uint8Array(t),n&&e.Ia.set(n.subarray(0,Math.min(t,e.Ma))),e.Ma=t}},Ga:{Oa:function(e){var t={};return t.dev=(e.mode&61440)===8192?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,(e.mode&61440)===16384?t.size=4096:(e.mode&61440)===32768?t.size=e.Ma:(e.mode&61440)===40960?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.Ab=4096,t.blocks=Math.ceil(t.size/t.Ab),t},Na:function(e,t){t.mode!==void 0&&(e.mode=t.mode),t.timestamp!==void 0&&(e.timestamp=t.timestamp),t.size!==void 0&&w.Gb(e,t.size)},lookup:function(){throw St[44]},$a:function(e,t,n,r){return w.createNode(e,t,n,r)},rename:function(e,t,n){if((e.mode&61440)===16384){try{var r=le(t,n)}catch{}if(r)for(var o in r.Ia)throw new u(55)}delete e.parent.Ia[e.name],e.parent.timestamp=Date.now(),e.name=n,t.Ia[n]=e,t.timestamp=e.parent.timestamp,e.parent=t},unlink:function(e,t){delete e.Ia[t],e.timestamp=Date.now()},rmdir:function(e,t){var n=le(e,t),r;for(r in n.Ia)throw new u(55);delete e.Ia[t],e.timestamp=Date.now()},readdir:function(e){var t=[".",".."],n;for(n in e.Ia)e.Ia.hasOwnProperty(n)&&t.push(n);return t},symlink:function(e,t,n){return e=w.createNode(e,t,41471,0),e.link=n,e},readlink:function(e){if((e.mode&61440)!==40960)throw new u(28);return e.link}},Ha:{read:function(e,t,n,r,o){var s=e.node.Ia;if(o>=e.node.Ma)return 0;if(e=Math.min(e.node.Ma-o,r),8<e&&s.subarray)t.set(s.subarray(o,o+e),n);else for(r=0;r<e;r++)t[n+r]=s[o+r];return e},write:function(e,t,n,r,o,s){if(t.buffer===E.buffer&&(s=!1),!r)return 0;if(e=e.node,e.timestamp=Date.now(),t.subarray&&(!e.Ia||e.Ia.subarray)){if(s)return e.Ia=t.subarray(n,n+r),e.Ma=r;if(e.Ma===0&&o===0)return e.Ia=t.slice(n,n+r),e.Ma=r;if(o+r<=e.Ma)return e.Ia.set(t.subarray(n,n+r),o),r}if(w.qb(e,o+r),e.Ia.subarray&&t.subarray)e.Ia.set(t.subarray(n,n+r),o);else for(s=0;s<r;s++)e.Ia[o+s]=t[n+s];return e.Ma=Math.max(e.Ma,o+r),r},Ta:function(e,t,n){if(n===1?t+=e.position:n===2&&(e.node.mode&61440)===32768&&(t+=e.node.Ma),0>t)throw new u(28);return t},lb:function(e,t,n){w.qb(e.node,t+n),e.node.Ma=Math.max(e.node.Ma,t+n)},ab:function(e,t,n,r,o,s){if(t!==0)throw new u(28);if((e.node.mode&61440)!==32768)throw new u(43);if(e=e.node.Ia,s&2||e.buffer!==_t){if((0<r||r+n<e.length)&&(e.subarray?e=e.subarray(r,r+n):e=Array.prototype.slice.call(e,r,r+n)),r=!0,n=65536*Math.ceil(n/65536),(s=Ln(65536,n))?(F.fill(0,s,s+n),n=s):n=0,!n)throw new u(48);E.set(e,n)}else r=!1,n=e.byteOffset;return{Fb:n,vb:r}},bb:function(e,t,n,r,o){if((e.node.mode&61440)!==32768)throw new u(43);return o&2||w.Ha.write(e,t,0,r,n,!1),0}}},xt=null,sn={},C=[],pr=1,ee=null,an=!0,u=null,St={},O=(e,t={})=>{if(e=Ge("/",e),!e)return{path:"",node:null};if(t=Object.assign({rb:!0,kb:0},t),8<t.kb)throw new u(32);e=It(e.split("/").filter(p=>!!p),!1);for(var n=xt,r="/",o=0;o<e.length;o++){var s=o===e.length-1;if(s&&t.parent)break;if(n=le(n,e[o]),r=V(r+"/"+e[o]),n.Va&&(!s||s&&t.rb)&&(n=n.Va.root),!s||t.Sa){for(s=0;(n.mode&61440)===40960;)if(n=yn(r),r=Ge(ar(r),n),n=O(r,{kb:t.kb+1}).node,40<s++)throw new u(32)}}return{path:r,node:n}},De=e=>{for(var t;;){if(e===e.parent)return e=e.Qa.ub,t?e[e.length-1]!=="/"?e+"/"+t:e+t:e;t=t?e.name+"/"+t:e.name,e=e.parent}},Et=(e,t)=>{for(var n=0,r=0;r<t.length;r++)n=(n<<5)-n+t.charCodeAt(r)|0;return(e+n>>>0)%ee.length},un=e=>{var t=Et(e.parent.id,e.name);if(ee[t]===e)ee[t]=e.Wa;else for(t=ee[t];t;){if(t.Wa===e){t.Wa=e.Wa;break}t=t.Wa}},le=(e,t)=>{var n;if(n=(n=be(e,"x"))?n:e.Ga.lookup?0:2)throw new u(n,e);for(n=ee[Et(e.id,t)];n;n=n.Wa){var r=n.name;if(n.parent.id===e.id&&r===t)return n}return e.Ga.lookup(e,t)},ln=(e,t,n,r)=>(e=new Sn(e,t,n,r),t=Et(e.parent.id,e.name),e.Wa=ee[t],ee[t]=e),mr={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},cn=e=>{var t=["r","w","rw"][e&3];return e&512&&(t+="w"),t},be=(e,t)=>{if(an)return 0;if(!t.includes("r")||e.mode&292){if(t.includes("w")&&!(e.mode&146)||t.includes("x")&&!(e.mode&73))return 2}else return 2;return 0},fn=(e,t)=>{try{return le(e,t),20}catch{}return be(e,"wx")},pn=(e,t,n)=>{try{var r=le(e,t)}catch(o){return o.Ka}if(e=be(e,"wx"))return e;if(n){if((r.mode&61440)!==16384)return 54;if(r===r.parent||De(r)==="/")return 10}else if((r.mode&61440)===16384)return 31;return 0},hr=(e=0,t=4096)=>{for(;e<=t;e++)if(!C[e])return e;throw new u(33)},dr=(e,t)=>(Ne||(Ne=function(){},Ne.prototype={}),e=Object.assign(new Ne,e),t=hr(t,void 0),e.fd=t,C[t]=e),yr={open:e=>{e.Ha=sn[e.node.rdev].Ha,e.Ha.open&&e.Ha.open(e)},Ta:()=>{throw new u(70)}},At=(e,t)=>{sn[e]={Ha:t}},mn=(e,t)=>{var n=t==="/",r=!t;if(n&&xt)throw new u(10);if(!n&&!r){var o=O(t,{rb:!1});if(t=o.path,o=o.node,o.Va)throw new u(10);if((o.mode&61440)!==16384)throw new u(54)}t={type:e,Lb:{},ub:t,Eb:[]},e=e.Qa(t),e.Qa=t,t.root=e,n?xt=e:o&&(o.Va=t,o.Qa&&o.Qa.Eb.push(t))},Fe=(e,t,n)=>{var r=O(e,{parent:!0}).node;if(e=Ue(e),!e||e==="."||e==="..")throw new u(28);var o=fn(r,e);if(o)throw new u(o);if(!r.Ga.$a)throw new u(63);return r.Ga.$a(r,e,t,n)},Q=(e,t)=>Fe(e,(t!==void 0?t:511)&1023|16384,0),Ce=(e,t,n)=>{typeof n>"u"&&(n=t,t=438),Fe(e,t|8192,n)},Lt=(e,t)=>{if(!Ge(e))throw new u(44);var n=O(t,{parent:!0}).node;if(!n)throw new u(44);t=Ue(t);var r=fn(n,t);if(r)throw new u(r);if(!n.Ga.symlink)throw new u(63);n.Ga.symlink(n,t,e)},hn=e=>{var t=O(e,{parent:!0}).node;e=Ue(e);var n=le(t,e),r=pn(t,e,!0);if(r)throw new u(r);if(!t.Ga.rmdir)throw new u(63);if(n.Va)throw new u(10);t.Ga.rmdir(t,e),un(n)},dn=e=>{var t=O(e,{parent:!0}).node;if(!t)throw new u(44);e=Ue(e);var n=le(t,e),r=pn(t,e,!1);if(r)throw new u(r);if(!t.Ga.unlink)throw new u(63);if(n.Va)throw new u(10);t.Ga.unlink(t,e),un(n)},yn=e=>{if(e=O(e).node,!e)throw new u(44);if(!e.Ga.readlink)throw new u(28);return Ge(De(e.parent),e.Ga.readlink(e))},Ie=(e,t)=>{if(e=O(e,{Sa:!t}).node,!e)throw new u(44);if(!e.Ga.Oa)throw new u(63);return e.Ga.Oa(e)},bn=e=>Ie(e,!0),je=(e,t)=>{if(e=typeof e=="string"?O(e,{Sa:!0}).node:e,!e.Ga.Na)throw new u(63);e.Ga.Na(e,{mode:t&4095|e.mode&-4096,timestamp:Date.now()})},gn=(e,t)=>{if(0>t)throw new u(28);if(e=typeof e=="string"?O(e,{Sa:!0}).node:e,!e.Ga.Na)throw new u(63);if((e.mode&61440)===16384)throw new u(31);if((e.mode&61440)!==32768)throw new u(28);var n=be(e,"w");if(n)throw new u(n);e.Ga.Na(e,{size:t,timestamp:Date.now()})},ce=(e,t,n,r)=>{if(e==="")throw new u(44);if(typeof t=="string"){var o=mr[t];if(typeof o>"u")throw Error("Unknown file open mode: "+t);t=o}if(n=t&64?(typeof n>"u"?438:n)&4095|32768:0,typeof e=="object")var s=e;else{e=V(e);try{s=O(e,{Sa:!(t&131072)}).node}catch{}}if(o=!1,t&64)if(s){if(t&128)throw new u(20)}else s=Fe(e,n,0),o=!0;if(!s)throw new u(44);if((s.mode&61440)===8192&&(t&=-513),t&65536&&(s.mode&61440)!==16384)throw new u(54);if(!o&&(n=s?(s.mode&61440)===40960?32:(s.mode&61440)===16384&&(cn(t)!=="r"||t&512)?31:be(s,cn(t)):44))throw new u(n);return t&512&&gn(s,0),t&=-131713,r=dr({node:s,path:De(s),flags:t,seekable:!0,position:0,Ha:s.Ha,Ib:[],error:!1},r),r.Ha.open&&r.Ha.open(r),!i.logReadFiles||t&1||(ze||(ze={}),e in ze||(ze[e]=1)),r},Bt=e=>{if(e.fd===null)throw new u(8);e.hb&&(e.hb=null);try{e.Ha.close&&e.Ha.close(e)}catch(t){throw t}finally{C[e.fd]=null}e.fd=null},wn=(e,t,n)=>{if(e.fd===null)throw new u(8);if(!e.seekable||!e.Ha.Ta)throw new u(70);if(n!=0&&n!=1&&n!=2)throw new u(28);e.position=e.Ha.Ta(e,t,n),e.Ib=[]},_n=(e,t,n,r,o)=>{if(0>r||0>o)throw new u(28);if(e.fd===null)throw new u(8);if((e.flags&2097155)===1)throw new u(8);if((e.node.mode&61440)===16384)throw new u(31);if(!e.Ha.read)throw new u(28);var s=typeof o<"u";if(!s)o=e.position;else if(!e.seekable)throw new u(70);return t=e.Ha.read(e,t,n,r,o),s||(e.position+=t),t},vn=(e,t,n,r,o,s)=>{if(0>r||0>o)throw new u(28);if(e.fd===null)throw new u(8);if((e.flags&2097155)===0)throw new u(8);if((e.node.mode&61440)===16384)throw new u(31);if(!e.Ha.write)throw new u(28);e.seekable&&e.flags&1024&&wn(e,0,2);var p=typeof o<"u";if(!p)o=e.position;else if(!e.seekable)throw new u(70);return t=e.Ha.write(e,t,n,r,o,s),p||(e.position+=t),t},br=e=>{var t="binary";if(t!=="utf8"&&t!=="binary")throw Error('Invalid encoding type "'+t+'"');var n,r=ce(e,r||0);e=Ie(e).size;var o=new Uint8Array(e);return _n(r,o,0,e,0),t==="utf8"?n=he(o,0):t==="binary"&&(n=o),Bt(r),n},kn=()=>{u||(u=function(e,t){this.node=t,this.Hb=function(n){this.Ka=n},this.Hb(e),this.message="FS error"},u.prototype=Error(),u.prototype.constructor=u,[44].forEach(e=>{St[e]=new u(e),St[e].stack="<generic error, no stack>"}))},qn,Dn=(e,t)=>{var n=0;return e&&(n|=365),t&&(n|=146),n},xe=(e,t,n)=>{e=V("/dev/"+e);var r=Dn(!!t,!!n);Rt||(Rt=64);var o=Rt++<<8|0;At(o,{open:s=>{s.seekable=!1},close:()=>{n&&n.buffer&&n.buffer.length&&n(10)},read:(s,p,_,v)=>{for(var k=0,L=0;L<v;L++){try{var Y=t()}catch{throw new u(29)}if(Y===void 0&&k===0)throw new u(6);if(Y==null)break;k++,p[_+L]=Y}return k&&(s.node.timestamp=Date.now()),k},write:(s,p,_,v)=>{for(var k=0;k<v;k++)try{n(p[_+k])}catch{throw new u(29)}return v&&(s.node.timestamp=Date.now()),k}}),Ce(e,r,o)},Rt,D={},Ne,ze;function ge(e,t,n){if(t[0]==="/")return t;if(e===-100)e="/";else{if(e=C[e],!e)throw new u(8);e=e.path}if(t.length==0){if(!n)throw new u(44);return e}return V(e+"/"+t)}function We(e,t,n){try{var r=e(t)}catch(o){if(o&&o.node&&V(t)!==V(De(o.node)))return-54;throw o}return m[n>>2]=r.dev,m[n+4>>2]=0,m[n+8>>2]=r.ino,m[n+12>>2]=r.mode,m[n+16>>2]=r.nlink,m[n+20>>2]=r.uid,m[n+24>>2]=r.gid,m[n+28>>2]=r.rdev,m[n+32>>2]=0,G=[r.size>>>0,(I=r.size,1<=+Math.abs(I)?0<I?(Math.min(+Math.floor(I/4294967296),4294967295)|0)>>>0:~~+Math.ceil((I-+(~~I>>>0))/4294967296)>>>0:0)],m[n+40>>2]=G[0],m[n+44>>2]=G[1],m[n+48>>2]=4096,m[n+52>>2]=r.blocks,m[n+56>>2]=r.atime.getTime()/1e3|0,m[n+60>>2]=0,m[n+64>>2]=r.mtime.getTime()/1e3|0,m[n+68>>2]=0,m[n+72>>2]=r.ctime.getTime()/1e3|0,m[n+76>>2]=0,G=[r.ino>>>0,(I=r.ino,1<=+Math.abs(I)?0<I?(Math.min(+Math.floor(I/4294967296),4294967295)|0)>>>0:~~+Math.ceil((I-+(~~I>>>0))/4294967296)>>>0:0)],m[n+80>>2]=G[0],m[n+84>>2]=G[1],0}var Qe=void 0;function Ke(){return Qe+=4,m[Qe-4>>2]}function te(e){if(e=C[e],!e)throw new u(8);return e}function gr(e,t,n){function r(v){return(v=v.toTimeString().match(/\(([A-Za-z ]+)\)$/))?v[1]:"GMT"}var o=new Date().getFullYear(),s=new Date(o,0,1),p=new Date(o,6,1);o=s.getTimezoneOffset();var _=p.getTimezoneOffset();m[e>>2]=60*Math.max(o,_),m[t>>2]=Number(o!=_),e=r(s),t=r(p),e=Vt(e),t=Vt(t),_<o?(m[n>>2]=e,m[n+4>>2]=t):(m[n>>2]=t,m[n+4>>2]=e)}function Mt(e,t,n){Mt.Bb||(Mt.Bb=!0,gr(e,t,n))}var In;In=B?()=>{var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:()=>performance.now();var Tt={};function xn(){if(!Pt){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:x||"./this.program"},t;for(t in Tt)Tt[t]===void 0?delete e[t]:e[t]=Tt[t];var n=[];for(t in e)n.push(t+"="+e[t]);Pt=n}return Pt}var Pt;function Sn(e,t,n,r){e||(e=this),this.parent=e,this.Qa=e.Qa,this.Va=null,this.id=pr++,this.name=t,this.mode=n,this.Ga={},this.Ha={},this.rdev=r}Object.defineProperties(Sn.prototype,{read:{get:function(){return(this.mode&365)===365},set:function(e){e?this.mode|=365:this.mode&=-366}},write:{get:function(){return(this.mode&146)===146},set:function(e){e?this.mode|=146:this.mode&=-147}}}),kn(),ee=Array(4096),mn(w,"/"),Q("/tmp"),Q("/home"),Q("/home/web_user"),(()=>{Q("/dev"),At(259,{read:()=>0,write:(t,n,r,o)=>o}),Ce("/dev/null",259),on(1280,cr),on(1536,fr),Ce("/dev/tty",1280),Ce("/dev/tty1",1536);var e=ur();xe("random",e),xe("urandom",e),Q("/dev/shm"),Q("/dev/shm/tmp")})(),(()=>{Q("/proc");var e=Q("/proc/self");Q("/proc/self/fd"),mn({Qa:()=>{var t=ln(e,"fd",16895,73);return t.Ga={lookup:(n,r)=>{var o=C[+r];if(!o)throw new u(8);return n={parent:null,Qa:{ub:"fake"},Ga:{readlink:()=>o.path}},n.parent=n}},t}},"/proc/self/fd")})();function En(e,t){var n=Array(de(e)+1);return e=se(e,n,0,n.length),t&&(n.length=e),n}var wr={a:function(e,t,n,r){Z("Assertion failed: "+A(e)+", at: "+[t?A(t):"unknown filename",n,r?A(r):"unknown function"])},g:function(e,t){try{return e=A(e),je(e,t),0}catch(n){if(typeof D>"u"||!(n instanceof u))throw n;return-n.Ka}},I:function(e,t,n){try{if(t=A(t),t=ge(e,t),n&-8)var r=-28;else{var o=O(t,{Sa:!0}).node;o?(e="",n&4&&(e+="r"),n&2&&(e+="w"),n&1&&(e+="x"),r=e&&be(o,e)?-2:0):r=-44}return r}catch(s){if(typeof D>"u"||!(s instanceof u))throw s;return-s.Ka}},h:function(e,t){try{var n=C[e];if(!n)throw new u(8);return je(n.node,t),0}catch(r){if(typeof D>"u"||!(r instanceof u))throw r;return-r.Ka}},H:function(e){try{var t=C[e];if(!t)throw new u(8);var n=t.node,r=typeof n=="string"?O(n,{Sa:!0}).node:n;if(!r.Ga.Na)throw new u(63);return r.Ga.Na(r,{timestamp:Date.now()}),0}catch(o){if(typeof D>"u"||!(o instanceof u))throw o;return-o.Ka}},b:function(e,t,n){Qe=n;try{var r=te(e);switch(t){case 0:var o=Ke();return 0>o?-28:ce(r.path,r.flags,0,o).fd;case 1:case 2:return 0;case 3:return r.flags;case 4:return o=Ke(),r.flags|=o,0;case 5:return o=Ke(),Oe[o+0>>1]=2,0;case 6:case 7:return 0;case 16:case 8:return-28;case 9:return m[An()>>2]=28,-1;default:return-28}}catch(s){if(typeof D>"u"||!(s instanceof u))throw s;return-s.Ka}},G:function(e,t){try{var n=te(e);return We(Ie,n.path,t)}catch(r){if(typeof D>"u"||!(r instanceof u))throw r;return-r.Ka}},B:function(e,t){try{var n=C[e];if(!n)throw new u(8);if((n.flags&2097155)===0)throw new u(28);return gn(n.node,t),0}catch(r){if(typeof D>"u"||!(r instanceof u))throw r;return-r.Ka}},A:function(e,t){try{return t===0?-28:t<de("/")+1?-68:(se("/",F,e,t),e)}catch(n){if(typeof D>"u"||!(n instanceof u))throw n;return-n.Ka}},E:function(e,t){try{return e=A(e),We(bn,e,t)}catch(n){if(typeof D>"u"||!(n instanceof u))throw n;return-n.Ka}},x:function(e,t){try{return e=A(e),e=V(e),e[e.length-1]==="/"&&(e=e.substr(0,e.length-1)),Q(e,t),0}catch(n){if(typeof D>"u"||!(n instanceof u))throw n;return-n.Ka}},D:function(e,t,n,r){try{t=A(t);var o=r&256;return t=ge(e,t,r&4096),We(o?bn:Ie,t,n)}catch(s){if(typeof D>"u"||!(s instanceof u))throw s;return-s.Ka}},u:function(e,t,n,r){Qe=r;try{t=A(t),t=ge(e,t);var o=r?Ke():0;return ce(t,n,o).fd}catch(s){if(typeof D>"u"||!(s instanceof u))throw s;return-s.Ka}},s:function(e,t,n,r){try{if(t=A(t),t=ge(e,t),0>=r)var o=-28;else{var s=yn(t),p=Math.min(r,de(s)),_=E[n+p];se(s,F,n,r+1),E[n+p]=_,o=p}return o}catch(v){if(typeof D>"u"||!(v instanceof u))throw v;return-v.Ka}},r:function(e){try{return e=A(e),hn(e),0}catch(t){if(typeof D>"u"||!(t instanceof u))throw t;return-t.Ka}},F:function(e,t){try{return e=A(e),We(Ie,e,t)}catch(n){if(typeof D>"u"||!(n instanceof u))throw n;return-n.Ka}},n:function(e,t,n){try{return t=A(t),t=ge(e,t),n===0?dn(t):n===512?hn(t):Z("Invalid flags passed to unlinkat"),0}catch(r){if(typeof D>"u"||!(r instanceof u))throw r;return-r.Ka}},m:function(e,t,n){try{if(t=A(t),t=ge(e,t,!0),n){var r=m[n>>2],o=m[n+4>>2];s=1e3*r+o/1e6,n+=8,r=m[n>>2],o=m[n+4>>2],p=1e3*r+o/1e6}else var s=Date.now(),p=s;e=s;var _=O(t,{Sa:!0}).node;return _.Ga.Na(_,{timestamp:Math.max(e,p)}),0}catch(v){if(typeof D>"u"||!(v instanceof u))throw v;return-v.Ka}},e:function(){return Date.now()},i:function(e,t){e=new Date(1e3*m[e>>2]),m[t>>2]=e.getSeconds(),m[t+4>>2]=e.getMinutes(),m[t+8>>2]=e.getHours(),m[t+12>>2]=e.getDate(),m[t+16>>2]=e.getMonth(),m[t+20>>2]=e.getFullYear()-1900,m[t+24>>2]=e.getDay();var n=new Date(e.getFullYear(),0,1);m[t+28>>2]=(e.getTime()-n.getTime())/864e5|0,m[t+36>>2]=-(60*e.getTimezoneOffset());var r=new Date(e.getFullYear(),6,1).getTimezoneOffset();n=n.getTimezoneOffset(),m[t+32>>2]=(r!=n&&e.getTimezoneOffset()==Math.min(n,r))|0},v:function(e,t,n,r,o,s,p){try{var _=C[o];if(!_)return-8;if((n&2)!==0&&(r&2)===0&&(_.flags&2097155)!==2)throw new u(2);if((_.flags&2097155)===1)throw new u(2);if(!_.Ha.ab)throw new u(43);var v=_.Ha.ab(_,e,t,s,n,r),k=v.Fb;return m[p>>2]=v.vb,k}catch(L){if(typeof D>"u"||!(L instanceof u))throw L;return-L.Ka}},w:function(e,t,n,r,o,s){try{var p=C[o];if(p&&n&2){var _=F.slice(e,e+t);p&&p.Ha.bb&&p.Ha.bb(p,_,s,t,r)}}catch(v){if(typeof D>"u"||!(v instanceof u))throw v;return-v.Ka}},j:Mt,p:function(){return 2147483648},d:In,o:function(e,t,n){F.copyWithin(e,t,t+n)},c:function(e){var t=F.length;if(e>>>=0,2147483648<e)return!1;for(var n=1;4>=n;n*=2){var r=t*(1+.2/n);r=Math.min(r,e+100663296);var o=Math;r=Math.max(e,r),o=o.min.call(o,2147483648,r+(65536-r%65536)%65536);e:{try{gt.grow(o-_t.byteLength+65535>>>16),Jt();var s=1;break e}catch{}s=void 0}if(s)return!0}return!1},y:function(e,t){var n=0;return xn().forEach(function(r,o){var s=t+n;for(o=m[e+4*o>>2]=s,s=0;s<r.length;++s)E[o++>>0]=r.charCodeAt(s);E[o>>0]=0,n+=r.length+1}),0},z:function(e,t){var n=xn();m[e>>2]=n.length;var r=0;return n.forEach(function(o){r+=o.length+1}),m[t>>2]=r,0},f:function(e){try{var t=te(e);return Bt(t),0}catch(n){if(typeof D>"u"||!(n instanceof u))throw n;return n.Ka}},l:function(e,t){try{var n=te(e);return E[t>>0]=n.tty?2:(n.mode&61440)===16384?3:(n.mode&61440)===40960?7:4,0}catch(r){if(typeof D>"u"||!(r instanceof u))throw r;return r.Ka}},t:function(e,t,n,r){try{e:{for(var o=te(e),s=e=0;s<n;s++){var p=m[t+(8*s+4)>>2],_=_n(o,E,m[t+8*s>>2],p,void 0);if(0>_){var v=-1;break e}if(e+=_,_<p)break}v=e}return m[r>>2]=v,0}catch(k){if(typeof D>"u"||!(k instanceof u))throw k;return k.Ka}},k:function(e,t,n,r,o){try{var s=te(e);return e=4294967296*n+(t>>>0),-9007199254740992>=e||9007199254740992<=e?-61:(wn(s,e,r),G=[s.position>>>0,(I=s.position,1<=+Math.abs(I)?0<I?(Math.min(+Math.floor(I/4294967296),4294967295)|0)>>>0:~~+Math.ceil((I-+(~~I>>>0))/4294967296)>>>0:0)],m[o>>2]=G[0],m[o+4>>2]=G[1],s.hb&&e===0&&r===0&&(s.hb=null),0)}catch(p){if(typeof D>"u"||!(p instanceof u))throw p;return p.Ka}},C:function(e){try{var t=te(e);return t.Ha&&t.Ha.fsync?-t.Ha.fsync(t):0}catch(n){if(typeof D>"u"||!(n instanceof u))throw n;return n.Ka}},q:function(e,t,n,r){try{e:{for(var o=te(e),s=e=0;s<n;s++){var p=vn(o,E,m[t+8*s>>2],m[t+(8*s+4)>>2],void 0);if(0>p){var _=-1;break e}e+=p}_=e}return m[r>>2]=_,0}catch(v){if(typeof D>"u"||!(v instanceof u))throw v;return v.Ka}}};(function(){function e(o){i.asm=o.exports,gt=i.asm.J,Jt(),ae=i.asm.Aa,Xt.unshift(i.asm.K),ue--,i.monitorRunDependencies&&i.monitorRunDependencies(ue),ue==0&&(qt!==null&&(clearInterval(qt),qt=null),qe&&(o=qe,qe=null,o()))}function t(o){e(o.instance)}function n(o){return sr().then(function(s){return WebAssembly.instantiate(s,r)}).then(function(s){return s}).then(o,function(s){ie("failed to asynchronously prepare wasm: "+s),Z(s)})}var r={a:wr};if(ue++,i.monitorRunDependencies&&i.monitorRunDependencies(ue),i.instantiateWasm)try{return i.instantiateWasm(r,e)}catch(o){return ie("Module.instantiateWasm callback failed with error: "+o),!1}return function(){return ve||typeof WebAssembly.instantiateStreaming!="function"||en()||U.startsWith("file://")||typeof fetch!="function"?n(t):fetch(U,{credentials:"same-origin"}).then(function(o){return WebAssembly.instantiateStreaming(o,r).then(t,function(s){return ie("wasm streaming compile failed: "+s),ie("falling back to ArrayBuffer instantiation"),n(t)})})}(),{}})(),i.___wasm_call_ctors=function(){return(i.___wasm_call_ctors=i.asm.K).apply(null,arguments)},i._sqlite3_free=function(){return(i._sqlite3_free=i.asm.L).apply(null,arguments)};var An=i.___errno_location=function(){return(An=i.___errno_location=i.asm.M).apply(null,arguments)};i._sqlite3_step=function(){return(i._sqlite3_step=i.asm.N).apply(null,arguments)},i._sqlite3_finalize=function(){return(i._sqlite3_finalize=i.asm.O).apply(null,arguments)},i._sqlite3_prepare_v2=function(){return(i._sqlite3_prepare_v2=i.asm.P).apply(null,arguments)},i._sqlite3_reset=function(){return(i._sqlite3_reset=i.asm.Q).apply(null,arguments)},i._sqlite3_clear_bindings=function(){return(i._sqlite3_clear_bindings=i.asm.R).apply(null,arguments)},i._sqlite3_value_blob=function(){return(i._sqlite3_value_blob=i.asm.S).apply(null,arguments)},i._sqlite3_value_text=function(){return(i._sqlite3_value_text=i.asm.T).apply(null,arguments)},i._sqlite3_value_bytes=function(){return(i._sqlite3_value_bytes=i.asm.U).apply(null,arguments)},i._sqlite3_value_double=function(){return(i._sqlite3_value_double=i.asm.V).apply(null,arguments)},i._sqlite3_value_int=function(){return(i._sqlite3_value_int=i.asm.W).apply(null,arguments)},i._sqlite3_value_type=function(){return(i._sqlite3_value_type=i.asm.X).apply(null,arguments)},i._sqlite3_result_blob=function(){return(i._sqlite3_result_blob=i.asm.Y).apply(null,arguments)},i._sqlite3_result_double=function(){return(i._sqlite3_result_double=i.asm.Z).apply(null,arguments)},i._sqlite3_result_error=function(){return(i._sqlite3_result_error=i.asm._).apply(null,arguments)},i._sqlite3_result_int=function(){return(i._sqlite3_result_int=i.asm.$).apply(null,arguments)},i._sqlite3_result_int64=function(){return(i._sqlite3_result_int64=i.asm.aa).apply(null,arguments)},i._sqlite3_result_null=function(){return(i._sqlite3_result_null=i.asm.ba).apply(null,arguments)},i._sqlite3_result_text=function(){return(i._sqlite3_result_text=i.asm.ca).apply(null,arguments)},i._sqlite3_column_count=function(){return(i._sqlite3_column_count=i.asm.da).apply(null,arguments)},i._sqlite3_data_count=function(){return(i._sqlite3_data_count=i.asm.ea).apply(null,arguments)},i._sqlite3_column_blob=function(){return(i._sqlite3_column_blob=i.asm.fa).apply(null,arguments)},i._sqlite3_column_bytes=function(){return(i._sqlite3_column_bytes=i.asm.ga).apply(null,arguments)},i._sqlite3_column_double=function(){return(i._sqlite3_column_double=i.asm.ha).apply(null,arguments)},i._sqlite3_column_text=function(){return(i._sqlite3_column_text=i.asm.ia).apply(null,arguments)},i._sqlite3_column_type=function(){return(i._sqlite3_column_type=i.asm.ja).apply(null,arguments)},i._sqlite3_column_name=function(){return(i._sqlite3_column_name=i.asm.ka).apply(null,arguments)},i._sqlite3_bind_blob=function(){return(i._sqlite3_bind_blob=i.asm.la).apply(null,arguments)},i._sqlite3_bind_double=function(){return(i._sqlite3_bind_double=i.asm.ma).apply(null,arguments)},i._sqlite3_bind_int=function(){return(i._sqlite3_bind_int=i.asm.na).apply(null,arguments)},i._sqlite3_bind_text=function(){return(i._sqlite3_bind_text=i.asm.oa).apply(null,arguments)},i._sqlite3_bind_parameter_index=function(){return(i._sqlite3_bind_parameter_index=i.asm.pa).apply(null,arguments)},i._sqlite3_sql=function(){return(i._sqlite3_sql=i.asm.qa).apply(null,arguments)},i._sqlite3_normalized_sql=function(){return(i._sqlite3_normalized_sql=i.asm.ra).apply(null,arguments)},i._sqlite3_errmsg=function(){return(i._sqlite3_errmsg=i.asm.sa).apply(null,arguments)},i._sqlite3_exec=function(){return(i._sqlite3_exec=i.asm.ta).apply(null,arguments)},i._sqlite3_changes=function(){return(i._sqlite3_changes=i.asm.ua).apply(null,arguments)},i._sqlite3_close_v2=function(){return(i._sqlite3_close_v2=i.asm.va).apply(null,arguments)},i._sqlite3_create_function_v2=function(){return(i._sqlite3_create_function_v2=i.asm.wa).apply(null,arguments)},i._sqlite3_open=function(){return(i._sqlite3_open=i.asm.xa).apply(null,arguments)};var $e=i._malloc=function(){return($e=i._malloc=i.asm.ya).apply(null,arguments)},Ve=i._free=function(){return(Ve=i._free=i.asm.za).apply(null,arguments)};i._RegisterExtensionFunctions=function(){return(i._RegisterExtensionFunctions=i.asm.Ba).apply(null,arguments)};var Ln=i._emscripten_builtin_memalign=function(){return(Ln=i._emscripten_builtin_memalign=i.asm.Ca).apply(null,arguments)},Se=i.stackSave=function(){return(Se=i.stackSave=i.asm.Da).apply(null,arguments)},Ee=i.stackRestore=function(){return(Ee=i.stackRestore=i.asm.Ea).apply(null,arguments)},J=i.stackAlloc=function(){return(J=i.stackAlloc=i.asm.Fa).apply(null,arguments)};i.cwrap=function(e,t,n,r){n=n||[];var o=n.every(function(s){return s==="number"});return t!=="string"&&o&&!r?i["_"+e]:function(){return nr(e,t,n,arguments)}},i.UTF8ToString=A,i.stackSave=Se,i.stackRestore=Ee,i.stackAlloc=J;var Je;qe=function e(){Je||Ot(),Je||(qe=e)};function Ot(){function e(){if(!Je&&(Je=!0,i.calledRun=!0,!Kt)){if(i.noFSInit||qn||(qn=!0,kn(),i.stdin=i.stdin,i.stdout=i.stdout,i.stderr=i.stderr,i.stdin?xe("stdin",i.stdin):Lt("/dev/tty","/dev/stdin"),i.stdout?xe("stdout",null,i.stdout):Lt("/dev/tty","/dev/stdout"),i.stderr?xe("stderr",null,i.stderr):Lt("/dev/tty1","/dev/stderr"),ce("/dev/stdin",0),ce("/dev/stdout",1),ce("/dev/stderr",1)),an=!1,Dt(Xt),i.onRuntimeInitialized&&i.onRuntimeInitialized(),i.postRun)for(typeof i.postRun=="function"&&(i.postRun=[i.postRun]);i.postRun.length;){var t=i.postRun.shift();Zt.unshift(t)}Dt(Zt)}}if(!(0<ue)){if(i.preRun)for(typeof i.preRun=="function"&&(i.preRun=[i.preRun]);i.preRun.length;)or();Dt(Yt),0<ue||(i.setStatus?(i.setStatus("Running..."),setTimeout(function(){setTimeout(function(){i.setStatus("")},1),e()},1)):e())}}if(i.run=Ot,i.preInit)for(typeof i.preInit=="function"&&(i.preInit=[i.preInit]);0<i.preInit.length;)i.preInit.pop()();return Ot(),d}),ut)};typeof ct=="object"&&typeof me=="object"?(me.exports=lt,me.exports.default=lt):typeof define=="function"&&define.amd?define([],function(){return lt}):typeof ct=="object"&&(ct.Module=lt)});var di={};ei(di,{default:()=>Zn});module.exports=ti(di);var mt=require("react");var nt=require("react");var Ze=`
SELECT id, content, type, entityType, documentId
FROM BlockSearch(?)
ORDER BY rank + customRank
LIMIT ?
`,Un=`
SELECT id, content, type, entityType, documentId
FROM BlockSearch
ORDER BY customRank
LIMIT ?
`,Gn=`
SELECT id, content, type, entityType, documentId
FROM BlockSearch
WHERE entityType = 'document'
ORDER BY customRank
LIMIT ?
`,_e=40,et=l=>{if(!l||l.length===0)return"";let c=oi(l);return`{content exactMatchContent} : (${si(c).join(") OR (")})`},tt=(l,c,h,d)=>{try{return l.exec(h,d).map(g=>g.values).flat().map(Nn(c))}catch(g){return console.error(`db exec error: ${g}`),[]}},Fn=(l,c)=>{if(c.length===0)return[];let h=jn(c),g=`select documentId, content from BlockSearch where entityType = 'document' and documentId in (${new Array(h.length).fill("?").join(", ")})`;try{return l.exec(g,h).map(i=>i.values).flat().map(([i,q])=>c.filter(x=>x.documentID===i).forEach(x=>x.documentName=q)),c}catch(i){return console.error(`db exec error: ${i}`),[]}},Cn=(l,c,h)=>{if(h.length===0)return[];let d=jn(h),i=`SELECT id, content, type, entityType, documentId FROM BlockSearch WHERE documentId in (${new Array(d.length).fill("?").join(", ")})`;try{return l.exec(i,d).map(q=>q.values).flat().reduce(ni(c),[])}catch(q){return console.error(`db exec error: ${q}`),[]}},ni=l=>(c,h)=>{let d=Nn(l)(h),g=c.find(i=>i.block.documentID===d.documentID);return g?ii(g,d):c.push(ri(d)),c},ri=l=>l.entityType==="document"?{block:l,blocks:[]}:{block:{documentID:l.documentID},blocks:[l]},ii=(l,c)=>{c.entityType==="document"?l.block=c:l.blocks.push(c)},jn=l=>[...new Set(l.map(c=>c.documentID))],oi=l=>l.split(/\s+/).map(c=>c.trim()).map(c=>c.replace('"'," ")).map(c=>`"${c}"`),si=l=>{let c=[l.join(" "),l.join(" ")+"*"];return l.length>1&&c.push(l.join("* ")+"*"),c},Nn=l=>([c,h,d,g,i])=>({id:c,content:h,type:d,entityType:g,documentID:i,spaceID:l});function Ut({databasesLoading:l,databases:c},h){let[d,g]=(0,nt.useState)({resultsLoading:!0,results:[]});return(0,nt.useEffect)(()=>{if(l)return;g(B=>({...B,resultsLoading:!0}));let i=et(h),[q,x]=i.length>0?[Ze,[i,_e]]:[Un,[_e]],M=c.map(({database:B,spaceID:R})=>({database:B,blocks:tt(B,R,q,x)})).map(({database:B,blocks:R})=>Fn(B,R)).flat();g({results:M,resultsLoading:!1}),console.debug(`got ${M.length} results for query search '${h}'`)},[l,h]),d}var z=require("@raycast/api");var pe=require("@raycast/api"),rt=require("react/jsx-runtime");function Ae({query:l,spaceID:c}){return(0,rt.jsx)(pe.List.Item,{title:`Create '${l}'`,detail:(0,rt.jsx)(pe.List.Item.Detail,{markdown:`Create document '${l}'`}),actions:(0,rt.jsx)(pe.ActionPanel,{children:(0,rt.jsx)(pe.Action.OpenInBrowser,{url:`craftdocs://createdocument?spaceId=${c}&title=${encodeURIComponent(l)}&content=&folderId=`})})})}var ne=require("react/jsx-runtime");function Gt(l){let{isLoading:c,onSearchTextChange:h,blocks:d,query:g,config:i}=l,q=i?.primarySpace()?.spaceID||"";return(0,ne.jsxs)(z.List,{isLoading:c,onSearchTextChange:h,children:[d.map(x=>(0,ne.jsx)(ai,{block:x},x.id)),g.length>0&&(0,ne.jsx)(z.List.Section,{title:"Create new document",children:(0,ne.jsx)(Ae,{query:g,spaceID:q})})]})}var ai=({block:l})=>(0,ne.jsx)(z.List.Item,{icon:l.entityType==="document"?{source:"doc_richtext.png",tintColor:z.Color.PrimaryText}:{source:"doc_on_doc.png",tintColor:z.Color.PrimaryText},subtitle:l.content,title:l.documentName||l.content,actions:(0,ne.jsx)(z.ActionPanel,{children:(0,ne.jsx)(z.Action.OpenInBrowser,{title:"Open in Craft",url:`craftdocs://open?blockId=${l.id}&spaceId=${l.spaceID}`})})});var it=require("react"),Kn=require("@raycast/api");var zn=require("@raycast/api"),Wn=["com.lukilabs.lukiapp","com.lukilabs.lukiapp-setapp"],Qn=()=>(0,zn.getPreferenceValues)();function Ft(){let[l,c]=(0,it.useState)({appExistsLoading:!0,appExists:!1});return(0,it.useEffect)(()=>{(async()=>{let d=await(0,Kn.getApplications)(),g=Qn().application,i=d.find(x=>x.bundleId&&Wn.includes(x.bundleId));if(!(g||i))return c({appExistsLoading:!1,appExists:!1});c({appExistsLoading:!1,appExists:!0})})()},[]),l}var at=require("react");var ot=require("os"),Le=require("fs"),st=Hn(require("path")),ui=["com.lukilabs.lukiapp","com.lukilabs.lukiapp-setapp"],[$n]=ui.map(l=>st.default.join((0,ot.homedir)(),`/Library/Containers/${l}/Data/Library/Application Support/${l}`)).filter(Le.existsSync),li=st.default.join($n,"Search"),Be=class{constructor(){this.primarySpace=()=>this.spaces.find(c=>c.primary);this.buildFilterRegexForExistingRealms=()=>{let c=$n.replace("~",(0,ot.homedir)()),h=(0,Le.readdirSync)(c).filter(this.selectRealmFiles).map(this.extractSpaceIDs).filter(d=>d).join("|");return new RegExp(`(?:${h})[^.]*.sqlite$`)};this.selectRealmFiles=c=>c.match(/\.realm$/)!==null;this.extractSpaceIDs=c=>{let h=c.split("_");if(h.length===3)return h[1].split("||").pop()};this.makeSpaceFromStr=(c,h)=>({primary:!h.includes("||"),path:st.default.join(c,h),spaceID:h.match(/\w{8}-\w{4}-\w{4}-\w{4}-\w{12}/g)?.pop()||""});try{let c=li.replace("~",(0,ot.homedir)()),h=this.buildFilterRegexForExistingRealms();this.spaces=(0,Le.readdirSync)(c).filter(d=>d.match(h)).map(d=>this.makeSpaceFromStr(c,d))}catch(c){console.debug(`failed getting files: ${c}`),this.spaces=[]}console.debug("constructed config object")}};function Ct({appExistsLoading:l,appExists:c}){let[h,d]=(0,at.useState)({configLoading:!0,config:null});return(0,at.useEffect)(()=>{if(!l){if(!c)return d(g=>({...g,configIsLoading:!1}));d({configLoading:!1,config:new Be})}},[l]),h}var Jn=Hn(Vn()),Yn=require("path"),jt=require("fs"),Xn=require("@raycast/api"),ft=require("react");function Nt({config:l,configLoading:c}){let[{databases:h,databasesLoading:d},g]=(0,ft.useState)({databasesLoading:!0,databases:[]});return(0,ft.useEffect)(()=>{c||!l||Promise.all(l.spaces.map(i=>ci(i.path).then(q=>({db:q,space:i})))).then(i=>g({databases:i.map(q=>({database:q.db,spaceID:q.space.spaceID})),databasesLoading:!1})).then(()=>console.debug("initialized databases "+l.spaces.map(i=>i.spaceID).join(", ")))},[c]),{databases:h,databasesLoading:d,spaces:l?.spaces}}var ci=async l=>{let c=(0,jt.readFileSync)((0,Yn.join)(Xn.environment.assetsPath,"sql-wasm-fts5.wasm")),h=await(0,Jn.default)({wasmBinary:c});return new h.Database((0,jt.readFileSync)(l))};var P=require("@raycast/api");var pt=require("react");function zt({databasesLoading:l,databases:c},h){let[d,g]=(0,pt.useState)({resultsLoading:!0,results:[]});return(0,pt.useEffect)(()=>{if(l)return;g(M=>({...M,resultsLoading:!0}));let i=et(h),[q,x]=i.length>0?[Ze,[i,_e]]:[Gn,[_e]],K=c.map(({database:M,spaceID:B})=>({database:M,spaceID:B,blocks:tt(M,B,q,x)})).map(({database:M,spaceID:B,blocks:R})=>Cn(M,B,R));g({resultsLoading:!1,results:K.flat()})},[l,h]),d}var X=require("@raycast/api");var re=require("react/jsx-runtime");function Wt({resultsLoading:l,results:c,setQuery:h,query:d,config:g}){return(0,re.jsxs)(X.List,{isLoading:l,isShowingDetail:!0,onSearchTextChange:h,children:[c.map(i=>(0,re.jsx)(X.List.Item,{title:i.block.content,detail:(0,re.jsx)(X.List.Item.Detail,{markdown:i.blocks.map(q=>q.type==="code"?"```\n"+q.content+"\n```":q.content).join(`

`)}),actions:(0,re.jsx)(X.ActionPanel,{children:(0,re.jsx)(X.Action.OpenInBrowser,{url:`craftdocs://open?blockId=${i.block.id}&spaceId=${i.block.spaceID}`})})},i.block.id)),d.length>0&&(0,re.jsx)(X.List.Section,{title:"Create new document",children:(0,re.jsx)(Ae,{query:d,spaceID:g?.primarySpace()?.spaceID||""})})]})}var W=require("react/jsx-runtime"),fi=P.Toast.Style,{useDetailedView:pi}=(0,P.getPreferenceValues)();function Zn(){let l=Ft(),c=Ct(l),h=Nt(c),[d,g]=(0,mt.useState)(""),i={appExists:l,db:h,query:d,setQuery:g,config:c};return(0,mt.useEffect)(()=>{l.appExistsLoading||l.appExists||(0,P.showToast)(fi.Failure,"Error","Craft app is not installed")},[l.appExistsLoading]),pi?hi(i):mi(i)}var mi=({appExists:l,db:c,query:h,setQuery:d,config:g})=>{let{resultsLoading:i,results:q}=Ut(c,h),x=(0,W.jsx)(Gt,{isLoading:i,onSearchTextChange:d,blocks:q,query:h,config:g.config}),K=l.appExists?x:(0,W.jsx)(er,{});return l.appExistsLoading?x:K},hi=({appExists:l,db:c,query:h,setQuery:d,config:g})=>{let{resultsLoading:i,results:q}=zt(c,h),x=(0,W.jsx)(Wt,{resultsLoading:i,setQuery:d,results:q,query:h,config:g.config}),K=l.appExists?x:(0,W.jsx)(er,{});return l.appExistsLoading?x:K},er=()=>(0,W.jsx)(W.Fragment,{children:(0,W.jsx)(P.List,{actions:(0,W.jsx)(P.ActionPanel,{children:(0,W.jsx)(P.Action,{title:"Open Extension Preferences",onAction:P.openExtensionPreferences})}),children:(0,W.jsx)(P.List.EmptyView,{title:"No results",description:"Selecting Craft application in preferences might help",icon:"command-icon-small.png"})})});0&&(module.exports={});
