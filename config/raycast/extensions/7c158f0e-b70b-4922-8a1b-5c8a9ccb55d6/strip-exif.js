"use strict";var _u=Object.create;var Ei=Object.defineProperty;var Ou=Object.getOwnPropertyDescriptor;var Pu=Object.getOwnPropertyNames;var Du=Object.getPrototypeOf,vu=Object.prototype.hasOwnProperty;var f=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports),Au=(i,e)=>{for(var t in e)Ei(i,t,{get:e[t],enumerable:!0})},mo=(i,e,t,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Pu(e))!vu.call(i,n)&&n!==t&&Ei(i,n,{get:()=>e[n],enumerable:!(s=Ou(e,n))||s.enumerable});return i};var re=(i,e,t)=>(t=i!=null?_u(Du(i)):{},mo(e||!i||!i.__esModule?Ei(t,"default",{value:i,enumerable:!0}):t,i)),Nu=i=>mo(Ei({},"__esModule",{value:!0}),i);var ct=f((Rg,go)=>{"use strict";var po=new Map([["C","cwd"],["f","file"],["z","gzip"],["P","preservePaths"],["U","unlink"],["strip-components","strip"],["stripComponents","strip"],["keep-newer","newer"],["keepNewer","newer"],["keep-newer-files","newer"],["keepNewerFiles","newer"],["k","keep"],["keep-existing","keep"],["keepExisting","keep"],["m","noMtime"],["no-mtime","noMtime"],["p","preserveOwner"],["L","follow"],["h","follow"]]);go.exports=i=>i?Object.keys(i).map(e=>[po.has(e)?po.get(e):e,i[e]]).reduce((e,t)=>(e[t[0]]=t[1],e),Object.create(null)):{}});var Oi=f(_o=>{"use strict";var yo=typeof process=="object"&&process?process:{stdout:null,stderr:null},Lu=require("events"),So=require("stream"),Cu=require("string_decoder"),wo=Cu.StringDecoder,me=Symbol("EOF"),pe=Symbol("maybeEmitEnd"),Ae=Symbol("emittedEnd"),bi=Symbol("emittingEnd"),$t=Symbol("emittedError"),Ri=Symbol("closed"),Eo=Symbol("read"),Ti=Symbol("flush"),bo=Symbol("flushChunk"),z=Symbol("encoding"),ge=Symbol("decoder"),Ii=Symbol("flowing"),zt=Symbol("paused"),ut=Symbol("resume"),O=Symbol("buffer"),oe=Symbol("pipes"),A=Symbol("bufferLength"),Ws=Symbol("bufferPush"),js=Symbol("bufferShift"),M=Symbol("objectMode"),P=Symbol("destroyed"),Ks=Symbol("error"),Ys=Symbol("emitData"),Ro=Symbol("emitEnd"),Xs=Symbol("emitEnd2"),ye=Symbol("async"),Vs=Symbol("abort"),xi=Symbol("aborted"),Ye=Symbol("signal"),Wt=i=>Promise.resolve().then(i),xo=global._MP_NO_ITERATOR_SYMBOLS_!=="1",To=xo&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),Io=xo&&Symbol.iterator||Symbol("iterator not implemented"),Fu=i=>i==="end"||i==="finish"||i==="prefinish",Mu=i=>i instanceof ArrayBuffer||typeof i=="object"&&i.constructor&&i.constructor.name==="ArrayBuffer"&&i.byteLength>=0,Bu=i=>!Buffer.isBuffer(i)&&ArrayBuffer.isView(i),_i=class{constructor(e,t,s){this.src=e,this.dest=t,this.opts=s,this.ondrain=()=>e[ut](),t.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},Zs=class extends _i{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,t,s){super(e,t,s),this.proxyErrors=n=>t.emit("error",n),e.on("error",this.proxyErrors)}},jt=class extends So{constructor(e){super(),this[Ii]=!1,this[zt]=!1,this[oe]=[],this[O]=[],this[M]=e&&e.objectMode||!1,this[M]?this[z]=null:this[z]=e&&e.encoding||null,this[z]==="buffer"&&(this[z]=null),this[ye]=e&&!!e.async||!1,this[ge]=this[z]?new wo(this[z]):null,this[me]=!1,this[Ae]=!1,this[bi]=!1,this[Ri]=!1,this[$t]=null,this.writable=!0,this.readable=!0,this[A]=0,this[P]=!1,e&&e.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[O]}),e&&e.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[oe]}),this[Ye]=e&&e.signal,this[xi]=!1,this[Ye]&&(this[Ye].addEventListener("abort",()=>this[Vs]()),this[Ye].aborted&&this[Vs]())}get bufferLength(){return this[A]}get encoding(){return this[z]}set encoding(e){if(this[M])throw new Error("cannot set encoding in objectMode");if(this[z]&&e!==this[z]&&(this[ge]&&this[ge].lastNeed||this[A]))throw new Error("cannot change encoding");this[z]!==e&&(this[ge]=e?new wo(e):null,this[O].length&&(this[O]=this[O].map(t=>this[ge].write(t)))),this[z]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[M]}set objectMode(e){this[M]=this[M]||!!e}get async(){return this[ye]}set async(e){this[ye]=this[ye]||!!e}[Vs](){this[xi]=!0,this.emit("abort",this[Ye].reason),this.destroy(this[Ye].reason)}get aborted(){return this[xi]}set aborted(e){}write(e,t,s){if(this[xi])return!1;if(this[me])throw new Error("write after end");if(this[P])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof t=="function"&&(s=t,t="utf8"),t||(t="utf8");let n=this[ye]?Wt:r=>r();return!this[M]&&!Buffer.isBuffer(e)&&(Bu(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):Mu(e)?e=Buffer.from(e):typeof e!="string"&&(this.objectMode=!0)),this[M]?(this.flowing&&this[A]!==0&&this[Ti](!0),this.flowing?this.emit("data",e):this[Ws](e),this[A]!==0&&this.emit("readable"),s&&n(s),this.flowing):e.length?(typeof e=="string"&&!(t===this[z]&&!this[ge].lastNeed)&&(e=Buffer.from(e,t)),Buffer.isBuffer(e)&&this[z]&&(e=this[ge].write(e)),this.flowing&&this[A]!==0&&this[Ti](!0),this.flowing?this.emit("data",e):this[Ws](e),this[A]!==0&&this.emit("readable"),s&&n(s),this.flowing):(this[A]!==0&&this.emit("readable"),s&&n(s),this.flowing)}read(e){if(this[P])return null;if(this[A]===0||e===0||e>this[A])return this[pe](),null;this[M]&&(e=null),this[O].length>1&&!this[M]&&(this.encoding?this[O]=[this[O].join("")]:this[O]=[Buffer.concat(this[O],this[A])]);let t=this[Eo](e||null,this[O][0]);return this[pe](),t}[Eo](e,t){return e===t.length||e===null?this[js]():(this[O][0]=t.slice(e),t=t.slice(0,e),this[A]-=e),this.emit("data",t),!this[O].length&&!this[me]&&this.emit("drain"),t}end(e,t,s){return typeof e=="function"&&(s=e,e=null),typeof t=="function"&&(s=t,t="utf8"),e&&this.write(e,t),s&&this.once("end",s),this[me]=!0,this.writable=!1,(this.flowing||!this[zt])&&this[pe](),this}[ut](){this[P]||(this[zt]=!1,this[Ii]=!0,this.emit("resume"),this[O].length?this[Ti]():this[me]?this[pe]():this.emit("drain"))}resume(){return this[ut]()}pause(){this[Ii]=!1,this[zt]=!0}get destroyed(){return this[P]}get flowing(){return this[Ii]}get paused(){return this[zt]}[Ws](e){this[M]?this[A]+=1:this[A]+=e.length,this[O].push(e)}[js](){return this[M]?this[A]-=1:this[A]-=this[O][0].length,this[O].shift()}[Ti](e){do;while(this[bo](this[js]())&&this[O].length);!e&&!this[O].length&&!this[me]&&this.emit("drain")}[bo](e){return this.emit("data",e),this.flowing}pipe(e,t){if(this[P])return;let s=this[Ae];return t=t||{},e===yo.stdout||e===yo.stderr?t.end=!1:t.end=t.end!==!1,t.proxyErrors=!!t.proxyErrors,s?t.end&&e.end():(this[oe].push(t.proxyErrors?new Zs(this,e,t):new _i(this,e,t)),this[ye]?Wt(()=>this[ut]()):this[ut]()),e}unpipe(e){let t=this[oe].find(s=>s.dest===e);t&&(this[oe].splice(this[oe].indexOf(t),1),t.unpipe())}addListener(e,t){return this.on(e,t)}on(e,t){let s=super.on(e,t);return e==="data"&&!this[oe].length&&!this.flowing?this[ut]():e==="readable"&&this[A]!==0?super.emit("readable"):Fu(e)&&this[Ae]?(super.emit(e),this.removeAllListeners(e)):e==="error"&&this[$t]&&(this[ye]?Wt(()=>t.call(this,this[$t])):t.call(this,this[$t])),s}get emittedEnd(){return this[Ae]}[pe](){!this[bi]&&!this[Ae]&&!this[P]&&this[O].length===0&&this[me]&&(this[bi]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[Ri]&&this.emit("close"),this[bi]=!1)}emit(e,t,...s){if(e!=="error"&&e!=="close"&&e!==P&&this[P])return;if(e==="data")return!this[M]&&!t?!1:this[ye]?Wt(()=>this[Ys](t)):this[Ys](t);if(e==="end")return this[Ro]();if(e==="close"){if(this[Ri]=!0,!this[Ae]&&!this[P])return;let r=super.emit("close");return this.removeAllListeners("close"),r}else if(e==="error"){this[$t]=t,super.emit(Ks,t);let r=!this[Ye]||this.listeners("error").length?super.emit("error",t):!1;return this[pe](),r}else if(e==="resume"){let r=super.emit("resume");return this[pe](),r}else if(e==="finish"||e==="prefinish"){let r=super.emit(e);return this.removeAllListeners(e),r}let n=super.emit(e,t,...s);return this[pe](),n}[Ys](e){for(let s of this[oe])s.dest.write(e)===!1&&this.pause();let t=super.emit("data",e);return this[pe](),t}[Ro](){this[Ae]||(this[Ae]=!0,this.readable=!1,this[ye]?Wt(()=>this[Xs]()):this[Xs]())}[Xs](){if(this[ge]){let t=this[ge].end();if(t){for(let s of this[oe])s.dest.write(t);super.emit("data",t)}}for(let t of this[oe])t.end();let e=super.emit("end");return this.removeAllListeners("end"),e}collect(){let e=[];this[M]||(e.dataLength=0);let t=this.promise();return this.on("data",s=>{e.push(s),this[M]||(e.dataLength+=s.length)}),t.then(()=>e)}concat(){return this[M]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(e=>this[M]?Promise.reject(new Error("cannot concat in objectMode")):this[z]?e.join(""):Buffer.concat(e,e.dataLength))}promise(){return new Promise((e,t)=>{this.on(P,()=>t(new Error("stream destroyed"))),this.on("error",s=>t(s)),this.on("end",()=>e())})}[To](){let e=!1,t=()=>(this.pause(),e=!0,Promise.resolve({done:!0}));return{next:()=>{if(e)return t();let n=this.read();if(n!==null)return Promise.resolve({done:!1,value:n});if(this[me])return t();let r=null,o=null,a=u=>{this.removeListener("data",h),this.removeListener("end",l),this.removeListener(P,c),t(),o(u)},h=u=>{this.removeListener("error",a),this.removeListener("end",l),this.removeListener(P,c),this.pause(),r({value:u,done:!!this[me]})},l=()=>{this.removeListener("error",a),this.removeListener("data",h),this.removeListener(P,c),t(),r({done:!0})},c=()=>a(new Error("stream destroyed"));return new Promise((u,d)=>{o=d,r=u,this.once(P,c),this.once("error",a),this.once("end",l),this.once("data",h)})},throw:t,return:t,[To](){return this}}}[Io](){let e=!1,t=()=>(this.pause(),this.removeListener(Ks,t),this.removeListener(P,t),this.removeListener("end",t),e=!0,{done:!0}),s=()=>{if(e)return t();let n=this.read();return n===null?t():{value:n}};return this.once("end",t),this.once(Ks,t),this.once(P,t),{next:s,throw:t,return:t,[Io](){return this}}}destroy(e){return this[P]?(e?this.emit("error",e):this.emit(P),this):(this[P]=!0,this[O].length=0,this[A]=0,typeof this.close=="function"&&!this[Ri]&&this.close(),e?this.emit("error",e):this.emit(P),this)}static isStream(e){return!!e&&(e instanceof jt||e instanceof So||e instanceof Lu&&(typeof e.pipe=="function"||typeof e.write=="function"&&typeof e.end=="function"))}};_o.Minipass=jt});var Po=f((Ig,Oo)=>{var ku=require("zlib").constants||{ZLIB_VERNUM:4736};Oo.exports=Object.freeze(Object.assign(Object.create(null),{Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_VERSION_ERROR:-6,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,DEFLATE:1,INFLATE:2,GZIP:3,GUNZIP:4,DEFLATERAW:5,INFLATERAW:6,UNZIP:7,BROTLI_DECODE:8,BROTLI_ENCODE:9,Z_MIN_WINDOWBITS:8,Z_MAX_WINDOWBITS:15,Z_DEFAULT_WINDOWBITS:15,Z_MIN_CHUNK:64,Z_MAX_CHUNK:1/0,Z_DEFAULT_CHUNK:16384,Z_MIN_MEMLEVEL:1,Z_MAX_MEMLEVEL:9,Z_DEFAULT_MEMLEVEL:8,Z_MIN_LEVEL:-1,Z_MAX_LEVEL:9,Z_DEFAULT_LEVEL:-1,BROTLI_OPERATION_PROCESS:0,BROTLI_OPERATION_FLUSH:1,BROTLI_OPERATION_FINISH:2,BROTLI_OPERATION_EMIT_METADATA:3,BROTLI_MODE_GENERIC:0,BROTLI_MODE_TEXT:1,BROTLI_MODE_FONT:2,BROTLI_DEFAULT_MODE:0,BROTLI_MIN_QUALITY:0,BROTLI_MAX_QUALITY:11,BROTLI_DEFAULT_QUALITY:11,BROTLI_MIN_WINDOW_BITS:10,BROTLI_MAX_WINDOW_BITS:24,BROTLI_LARGE_MAX_WINDOW_BITS:30,BROTLI_DEFAULT_WINDOW:22,BROTLI_MIN_INPUT_BLOCK_BITS:16,BROTLI_MAX_INPUT_BLOCK_BITS:24,BROTLI_PARAM_MODE:0,BROTLI_PARAM_QUALITY:1,BROTLI_PARAM_LGWIN:2,BROTLI_PARAM_LGBLOCK:3,BROTLI_PARAM_DISABLE_LITERAL_CONTEXT_MODELING:4,BROTLI_PARAM_SIZE_HINT:5,BROTLI_PARAM_LARGE_WINDOW:6,BROTLI_PARAM_NPOSTFIX:7,BROTLI_PARAM_NDIRECT:8,BROTLI_DECODER_RESULT_ERROR:0,BROTLI_DECODER_RESULT_SUCCESS:1,BROTLI_DECODER_RESULT_NEEDS_MORE_INPUT:2,BROTLI_DECODER_RESULT_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_PARAM_DISABLE_RING_BUFFER_REALLOCATION:0,BROTLI_DECODER_PARAM_LARGE_WINDOW:1,BROTLI_DECODER_NO_ERROR:0,BROTLI_DECODER_SUCCESS:1,BROTLI_DECODER_NEEDS_MORE_INPUT:2,BROTLI_DECODER_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_NIBBLE:-1,BROTLI_DECODER_ERROR_FORMAT_RESERVED:-2,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_META_NIBBLE:-3,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_ALPHABET:-4,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_SAME:-5,BROTLI_DECODER_ERROR_FORMAT_CL_SPACE:-6,BROTLI_DECODER_ERROR_FORMAT_HUFFMAN_SPACE:-7,BROTLI_DECODER_ERROR_FORMAT_CONTEXT_MAP_REPEAT:-8,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_1:-9,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_2:-10,BROTLI_DECODER_ERROR_FORMAT_TRANSFORM:-11,BROTLI_DECODER_ERROR_FORMAT_DICTIONARY:-12,BROTLI_DECODER_ERROR_FORMAT_WINDOW_BITS:-13,BROTLI_DECODER_ERROR_FORMAT_PADDING_1:-14,BROTLI_DECODER_ERROR_FORMAT_PADDING_2:-15,BROTLI_DECODER_ERROR_FORMAT_DISTANCE:-16,BROTLI_DECODER_ERROR_DICTIONARY_NOT_SET:-19,BROTLI_DECODER_ERROR_INVALID_ARGUMENTS:-20,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MODES:-21,BROTLI_DECODER_ERROR_ALLOC_TREE_GROUPS:-22,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MAP:-25,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_1:-26,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_2:-27,BROTLI_DECODER_ERROR_ALLOC_BLOCK_TYPE_TREES:-30,BROTLI_DECODER_ERROR_UNREACHABLE:-31},ku))});var ko=f((xg,Bo)=>{"use strict";var Do=typeof process=="object"&&process?process:{stdout:null,stderr:null},Uu=require("events"),vo=require("stream"),Ao=require("string_decoder").StringDecoder,Se=Symbol("EOF"),we=Symbol("maybeEmitEnd"),Ne=Symbol("emittedEnd"),Pi=Symbol("emittingEnd"),Kt=Symbol("emittedError"),Di=Symbol("closed"),No=Symbol("read"),vi=Symbol("flush"),Lo=Symbol("flushChunk"),W=Symbol("encoding"),Ee=Symbol("decoder"),Ai=Symbol("flowing"),Yt=Symbol("paused"),ft=Symbol("resume"),N=Symbol("bufferLength"),Js=Symbol("bufferPush"),Qs=Symbol("bufferShift"),k=Symbol("objectMode"),U=Symbol("destroyed"),en=Symbol("emitData"),Co=Symbol("emitEnd"),tn=Symbol("emitEnd2"),be=Symbol("async"),Xt=i=>Promise.resolve().then(i),Fo=global._MP_NO_ITERATOR_SYMBOLS_!=="1",qu=Fo&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),Gu=Fo&&Symbol.iterator||Symbol("iterator not implemented"),Hu=i=>i==="end"||i==="finish"||i==="prefinish",$u=i=>i instanceof ArrayBuffer||typeof i=="object"&&i.constructor&&i.constructor.name==="ArrayBuffer"&&i.byteLength>=0,zu=i=>!Buffer.isBuffer(i)&&ArrayBuffer.isView(i),Ni=class{constructor(e,t,s){this.src=e,this.dest=t,this.opts=s,this.ondrain=()=>e[ft](),t.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},sn=class extends Ni{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,t,s){super(e,t,s),this.proxyErrors=n=>t.emit("error",n),e.on("error",this.proxyErrors)}};Bo.exports=class Mo extends vo{constructor(e){super(),this[Ai]=!1,this[Yt]=!1,this.pipes=[],this.buffer=[],this[k]=e&&e.objectMode||!1,this[k]?this[W]=null:this[W]=e&&e.encoding||null,this[W]==="buffer"&&(this[W]=null),this[be]=e&&!!e.async||!1,this[Ee]=this[W]?new Ao(this[W]):null,this[Se]=!1,this[Ne]=!1,this[Pi]=!1,this[Di]=!1,this[Kt]=null,this.writable=!0,this.readable=!0,this[N]=0,this[U]=!1}get bufferLength(){return this[N]}get encoding(){return this[W]}set encoding(e){if(this[k])throw new Error("cannot set encoding in objectMode");if(this[W]&&e!==this[W]&&(this[Ee]&&this[Ee].lastNeed||this[N]))throw new Error("cannot change encoding");this[W]!==e&&(this[Ee]=e?new Ao(e):null,this.buffer.length&&(this.buffer=this.buffer.map(t=>this[Ee].write(t)))),this[W]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[k]}set objectMode(e){this[k]=this[k]||!!e}get async(){return this[be]}set async(e){this[be]=this[be]||!!e}write(e,t,s){if(this[Se])throw new Error("write after end");if(this[U])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof t=="function"&&(s=t,t="utf8"),t||(t="utf8");let n=this[be]?Xt:r=>r();return!this[k]&&!Buffer.isBuffer(e)&&(zu(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):$u(e)?e=Buffer.from(e):typeof e!="string"&&(this.objectMode=!0)),this[k]?(this.flowing&&this[N]!==0&&this[vi](!0),this.flowing?this.emit("data",e):this[Js](e),this[N]!==0&&this.emit("readable"),s&&n(s),this.flowing):e.length?(typeof e=="string"&&!(t===this[W]&&!this[Ee].lastNeed)&&(e=Buffer.from(e,t)),Buffer.isBuffer(e)&&this[W]&&(e=this[Ee].write(e)),this.flowing&&this[N]!==0&&this[vi](!0),this.flowing?this.emit("data",e):this[Js](e),this[N]!==0&&this.emit("readable"),s&&n(s),this.flowing):(this[N]!==0&&this.emit("readable"),s&&n(s),this.flowing)}read(e){if(this[U])return null;if(this[N]===0||e===0||e>this[N])return this[we](),null;this[k]&&(e=null),this.buffer.length>1&&!this[k]&&(this.encoding?this.buffer=[this.buffer.join("")]:this.buffer=[Buffer.concat(this.buffer,this[N])]);let t=this[No](e||null,this.buffer[0]);return this[we](),t}[No](e,t){return e===t.length||e===null?this[Qs]():(this.buffer[0]=t.slice(e),t=t.slice(0,e),this[N]-=e),this.emit("data",t),!this.buffer.length&&!this[Se]&&this.emit("drain"),t}end(e,t,s){return typeof e=="function"&&(s=e,e=null),typeof t=="function"&&(s=t,t="utf8"),e&&this.write(e,t),s&&this.once("end",s),this[Se]=!0,this.writable=!1,(this.flowing||!this[Yt])&&this[we](),this}[ft](){this[U]||(this[Yt]=!1,this[Ai]=!0,this.emit("resume"),this.buffer.length?this[vi]():this[Se]?this[we]():this.emit("drain"))}resume(){return this[ft]()}pause(){this[Ai]=!1,this[Yt]=!0}get destroyed(){return this[U]}get flowing(){return this[Ai]}get paused(){return this[Yt]}[Js](e){this[k]?this[N]+=1:this[N]+=e.length,this.buffer.push(e)}[Qs](){return this.buffer.length&&(this[k]?this[N]-=1:this[N]-=this.buffer[0].length),this.buffer.shift()}[vi](e){do;while(this[Lo](this[Qs]()));!e&&!this.buffer.length&&!this[Se]&&this.emit("drain")}[Lo](e){return e?(this.emit("data",e),this.flowing):!1}pipe(e,t){if(this[U])return;let s=this[Ne];return t=t||{},e===Do.stdout||e===Do.stderr?t.end=!1:t.end=t.end!==!1,t.proxyErrors=!!t.proxyErrors,s?t.end&&e.end():(this.pipes.push(t.proxyErrors?new sn(this,e,t):new Ni(this,e,t)),this[be]?Xt(()=>this[ft]()):this[ft]()),e}unpipe(e){let t=this.pipes.find(s=>s.dest===e);t&&(this.pipes.splice(this.pipes.indexOf(t),1),t.unpipe())}addListener(e,t){return this.on(e,t)}on(e,t){let s=super.on(e,t);return e==="data"&&!this.pipes.length&&!this.flowing?this[ft]():e==="readable"&&this[N]!==0?super.emit("readable"):Hu(e)&&this[Ne]?(super.emit(e),this.removeAllListeners(e)):e==="error"&&this[Kt]&&(this[be]?Xt(()=>t.call(this,this[Kt])):t.call(this,this[Kt])),s}get emittedEnd(){return this[Ne]}[we](){!this[Pi]&&!this[Ne]&&!this[U]&&this.buffer.length===0&&this[Se]&&(this[Pi]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[Di]&&this.emit("close"),this[Pi]=!1)}emit(e,t,...s){if(e!=="error"&&e!=="close"&&e!==U&&this[U])return;if(e==="data")return t?this[be]?Xt(()=>this[en](t)):this[en](t):!1;if(e==="end")return this[Co]();if(e==="close"){if(this[Di]=!0,!this[Ne]&&!this[U])return;let r=super.emit("close");return this.removeAllListeners("close"),r}else if(e==="error"){this[Kt]=t;let r=super.emit("error",t);return this[we](),r}else if(e==="resume"){let r=super.emit("resume");return this[we](),r}else if(e==="finish"||e==="prefinish"){let r=super.emit(e);return this.removeAllListeners(e),r}let n=super.emit(e,t,...s);return this[we](),n}[en](e){for(let s of this.pipes)s.dest.write(e)===!1&&this.pause();let t=super.emit("data",e);return this[we](),t}[Co](){this[Ne]||(this[Ne]=!0,this.readable=!1,this[be]?Xt(()=>this[tn]()):this[tn]())}[tn](){if(this[Ee]){let t=this[Ee].end();if(t){for(let s of this.pipes)s.dest.write(t);super.emit("data",t)}}for(let t of this.pipes)t.end();let e=super.emit("end");return this.removeAllListeners("end"),e}collect(){let e=[];this[k]||(e.dataLength=0);let t=this.promise();return this.on("data",s=>{e.push(s),this[k]||(e.dataLength+=s.length)}),t.then(()=>e)}concat(){return this[k]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(e=>this[k]?Promise.reject(new Error("cannot concat in objectMode")):this[W]?e.join(""):Buffer.concat(e,e.dataLength))}promise(){return new Promise((e,t)=>{this.on(U,()=>t(new Error("stream destroyed"))),this.on("error",s=>t(s)),this.on("end",()=>e())})}[qu](){return{next:()=>{let t=this.read();if(t!==null)return Promise.resolve({done:!1,value:t});if(this[Se])return Promise.resolve({done:!0});let s=null,n=null,r=l=>{this.removeListener("data",o),this.removeListener("end",a),n(l)},o=l=>{this.removeListener("error",r),this.removeListener("end",a),this.pause(),s({value:l,done:!!this[Se]})},a=()=>{this.removeListener("error",r),this.removeListener("data",o),s({done:!0})},h=()=>r(new Error("stream destroyed"));return new Promise((l,c)=>{n=c,s=l,this.once(U,h),this.once("error",r),this.once("end",a),this.once("data",o)})}}}[Gu](){return{next:()=>{let t=this.read();return{value:t,done:t===null}}}}destroy(e){return this[U]?(e?this.emit("error",e):this.emit(U),this):(this[U]=!0,this.buffer.length=0,this[N]=0,typeof this.close=="function"&&!this[Di]&&this.close(),e?this.emit("error",e):this.emit(U),this)}static isStream(e){return!!e&&(e instanceof Mo||e instanceof vo||e instanceof Uu&&(typeof e.pipe=="function"||typeof e.write=="function"&&typeof e.end=="function"))}}});var wn=f(Y=>{"use strict";var ln=require("assert"),Le=require("buffer").Buffer,Go=require("zlib"),Xe=Y.constants=Po(),Wu=ko(),Uo=Le.concat,Ve=Symbol("_superWrite"),mt=class extends Error{constructor(e){super("zlib: "+e.message),this.code=e.code,this.errno=e.errno,this.code||(this.code="ZLIB_ERROR"),this.message="zlib: "+e.message,Error.captureStackTrace(this,this.constructor)}get name(){return"ZlibError"}},ju=Symbol("opts"),Vt=Symbol("flushFlag"),qo=Symbol("finishFlushFlag"),Sn=Symbol("fullFlushFlag"),I=Symbol("handle"),Li=Symbol("onError"),dt=Symbol("sawError"),nn=Symbol("level"),rn=Symbol("strategy"),on=Symbol("ended"),_g=Symbol("_defaultFullFlush"),Ci=class extends Wu{constructor(e,t){if(!e||typeof e!="object")throw new TypeError("invalid options for ZlibBase constructor");super(e),this[dt]=!1,this[on]=!1,this[ju]=e,this[Vt]=e.flush,this[qo]=e.finishFlush;try{this[I]=new Go[t](e)}catch(s){throw new mt(s)}this[Li]=s=>{this[dt]||(this[dt]=!0,this.close(),this.emit("error",s))},this[I].on("error",s=>this[Li](new mt(s))),this.once("end",()=>this.close)}close(){this[I]&&(this[I].close(),this[I]=null,this.emit("close"))}reset(){if(!this[dt])return ln(this[I],"zlib binding closed"),this[I].reset()}flush(e){this.ended||(typeof e!="number"&&(e=this[Sn]),this.write(Object.assign(Le.alloc(0),{[Vt]:e})))}end(e,t,s){return e&&this.write(e,t),this.flush(this[qo]),this[on]=!0,super.end(null,null,s)}get ended(){return this[on]}write(e,t,s){if(typeof t=="function"&&(s=t,t="utf8"),typeof e=="string"&&(e=Le.from(e,t)),this[dt])return;ln(this[I],"zlib binding closed");let n=this[I]._handle,r=n.close;n.close=()=>{};let o=this[I].close;this[I].close=()=>{},Le.concat=l=>l;let a;try{let l=typeof e[Vt]=="number"?e[Vt]:this[Vt];a=this[I]._processChunk(e,l),Le.concat=Uo}catch(l){Le.concat=Uo,this[Li](new mt(l))}finally{this[I]&&(this[I]._handle=n,n.close=r,this[I].close=o,this[I].removeAllListeners("error"))}this[I]&&this[I].on("error",l=>this[Li](new mt(l)));let h;if(a)if(Array.isArray(a)&&a.length>0){h=this[Ve](Le.from(a[0]));for(let l=1;l<a.length;l++)h=this[Ve](a[l])}else h=this[Ve](Le.from(a));return s&&s(),h}[Ve](e){return super.write(e)}},Re=class extends Ci{constructor(e,t){e=e||{},e.flush=e.flush||Xe.Z_NO_FLUSH,e.finishFlush=e.finishFlush||Xe.Z_FINISH,super(e,t),this[Sn]=Xe.Z_FULL_FLUSH,this[nn]=e.level,this[rn]=e.strategy}params(e,t){if(!this[dt]){if(!this[I])throw new Error("cannot switch params when binding is closed");if(!this[I].params)throw new Error("not supported in this implementation");if(this[nn]!==e||this[rn]!==t){this.flush(Xe.Z_SYNC_FLUSH),ln(this[I],"zlib binding closed");let s=this[I].flush;this[I].flush=(n,r)=>{this.flush(n),r()};try{this[I].params(e,t)}finally{this[I].flush=s}this[I]&&(this[nn]=e,this[rn]=t)}}}},hn=class extends Re{constructor(e){super(e,"Deflate")}},cn=class extends Re{constructor(e){super(e,"Inflate")}},an=Symbol("_portable"),un=class extends Re{constructor(e){super(e,"Gzip"),this[an]=e&&!!e.portable}[Ve](e){return this[an]?(this[an]=!1,e[9]=255,super[Ve](e)):super[Ve](e)}},fn=class extends Re{constructor(e){super(e,"Gunzip")}},dn=class extends Re{constructor(e){super(e,"DeflateRaw")}},mn=class extends Re{constructor(e){super(e,"InflateRaw")}},pn=class extends Re{constructor(e){super(e,"Unzip")}},Fi=class extends Ci{constructor(e,t){e=e||{},e.flush=e.flush||Xe.BROTLI_OPERATION_PROCESS,e.finishFlush=e.finishFlush||Xe.BROTLI_OPERATION_FINISH,super(e,t),this[Sn]=Xe.BROTLI_OPERATION_FLUSH}},gn=class extends Fi{constructor(e){super(e,"BrotliCompress")}},yn=class extends Fi{constructor(e){super(e,"BrotliDecompress")}};Y.Deflate=hn;Y.Inflate=cn;Y.Gzip=un;Y.Gunzip=fn;Y.DeflateRaw=dn;Y.InflateRaw=mn;Y.Unzip=pn;typeof Go.BrotliCompress=="function"?(Y.BrotliCompress=gn,Y.BrotliDecompress=yn):Y.BrotliCompress=Y.BrotliDecompress=class{constructor(){throw new Error("Brotli is not supported in this version of Node.js")}}});var pt=f((Dg,Ho)=>{var Ku=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform;Ho.exports=Ku!=="win32"?i=>i:i=>i&&i.replace(/\\/g,"/")});var Mi=f((Ag,$o)=>{"use strict";var{Minipass:Yu}=Oi(),En=pt(),bn=Symbol("slurp");$o.exports=class extends Yu{constructor(e,t,s){switch(super(),this.pause(),this.extended=t,this.globalExtended=s,this.header=e,this.startBlockSize=512*Math.ceil(e.size/512),this.blockRemain=this.startBlockSize,this.remain=e.size,this.type=e.type,this.meta=!1,this.ignore=!1,this.type){case"File":case"OldFile":case"Link":case"SymbolicLink":case"CharacterDevice":case"BlockDevice":case"Directory":case"FIFO":case"ContiguousFile":case"GNUDumpDir":break;case"NextFileHasLongLinkpath":case"NextFileHasLongPath":case"OldGnuLongPath":case"GlobalExtendedHeader":case"ExtendedHeader":case"OldExtendedHeader":this.meta=!0;break;default:this.ignore=!0}this.path=En(e.path),this.mode=e.mode,this.mode&&(this.mode=this.mode&4095),this.uid=e.uid,this.gid=e.gid,this.uname=e.uname,this.gname=e.gname,this.size=e.size,this.mtime=e.mtime,this.atime=e.atime,this.ctime=e.ctime,this.linkpath=En(e.linkpath),this.uname=e.uname,this.gname=e.gname,t&&this[bn](t),s&&this[bn](s,!0)}write(e){let t=e.length;if(t>this.blockRemain)throw new Error("writing more to entry than is appropriate");let s=this.remain,n=this.blockRemain;return this.remain=Math.max(0,s-t),this.blockRemain=Math.max(0,n-t),this.ignore?!0:s>=t?super.write(e):super.write(e.slice(0,s))}[bn](e,t){for(let s in e)e[s]!==null&&e[s]!==void 0&&!(t&&s==="path")&&(this[s]=s==="path"||s==="linkpath"?En(e[s]):e[s])}}});var Rn=f(Bi=>{"use strict";Bi.name=new Map([["0","File"],["","OldFile"],["1","Link"],["2","SymbolicLink"],["3","CharacterDevice"],["4","BlockDevice"],["5","Directory"],["6","FIFO"],["7","ContiguousFile"],["g","GlobalExtendedHeader"],["x","ExtendedHeader"],["A","SolarisACL"],["D","GNUDumpDir"],["I","Inode"],["K","NextFileHasLongLinkpath"],["L","NextFileHasLongPath"],["M","ContinuationFile"],["N","OldGnuLongPath"],["S","SparseFile"],["V","TapeVolumeHeader"],["X","OldExtendedHeader"]]);Bi.code=new Map(Array.from(Bi.name).map(i=>[i[1],i[0]]))});var Ko=f((Lg,jo)=>{"use strict";var Xu=(i,e)=>{if(Number.isSafeInteger(i))i<0?Zu(i,e):Vu(i,e);else throw Error("cannot encode number outside of javascript safe integer range");return e},Vu=(i,e)=>{e[0]=128;for(var t=e.length;t>1;t--)e[t-1]=i&255,i=Math.floor(i/256)},Zu=(i,e)=>{e[0]=255;var t=!1;i=i*-1;for(var s=e.length;s>1;s--){var n=i&255;i=Math.floor(i/256),t?e[s-1]=zo(n):n===0?e[s-1]=0:(t=!0,e[s-1]=Wo(n))}},Ju=i=>{let e=i[0],t=e===128?ef(i.slice(1,i.length)):e===255?Qu(i):null;if(t===null)throw Error("invalid base256 encoding");if(!Number.isSafeInteger(t))throw Error("parsed number outside of javascript safe integer range");return t},Qu=i=>{for(var e=i.length,t=0,s=!1,n=e-1;n>-1;n--){var r=i[n],o;s?o=zo(r):r===0?o=r:(s=!0,o=Wo(r)),o!==0&&(t-=o*Math.pow(256,e-n-1))}return t},ef=i=>{for(var e=i.length,t=0,s=e-1;s>-1;s--){var n=i[s];n!==0&&(t+=n*Math.pow(256,e-s-1))}return t},zo=i=>(255^i)&255,Wo=i=>(255^i)+1&255;jo.exports={encode:Xu,parse:Ju}});var yt=f((Cg,Xo)=>{"use strict";var Tn=Rn(),gt=require("path").posix,Yo=Ko(),In=Symbol("slurp"),X=Symbol("type"),On=class{constructor(e,t,s,n){this.cksumValid=!1,this.needPax=!1,this.nullBlock=!1,this.block=null,this.path=null,this.mode=null,this.uid=null,this.gid=null,this.size=null,this.mtime=null,this.cksum=null,this[X]="0",this.linkpath=null,this.uname=null,this.gname=null,this.devmaj=0,this.devmin=0,this.atime=null,this.ctime=null,Buffer.isBuffer(e)?this.decode(e,t||0,s,n):e&&this.set(e)}decode(e,t,s,n){if(t||(t=0),!e||!(e.length>=t+512))throw new Error("need 512 bytes for header");if(this.path=Ze(e,t,100),this.mode=Ce(e,t+100,8),this.uid=Ce(e,t+108,8),this.gid=Ce(e,t+116,8),this.size=Ce(e,t+124,12),this.mtime=xn(e,t+136,12),this.cksum=Ce(e,t+148,12),this[In](s),this[In](n,!0),this[X]=Ze(e,t+156,1),this[X]===""&&(this[X]="0"),this[X]==="0"&&this.path.slice(-1)==="/"&&(this[X]="5"),this[X]==="5"&&(this.size=0),this.linkpath=Ze(e,t+157,100),e.slice(t+257,t+265).toString()==="ustar\x0000")if(this.uname=Ze(e,t+265,32),this.gname=Ze(e,t+297,32),this.devmaj=Ce(e,t+329,8),this.devmin=Ce(e,t+337,8),e[t+475]!==0){let o=Ze(e,t+345,155);this.path=o+"/"+this.path}else{let o=Ze(e,t+345,130);o&&(this.path=o+"/"+this.path),this.atime=xn(e,t+476,12),this.ctime=xn(e,t+488,12)}let r=8*32;for(let o=t;o<t+148;o++)r+=e[o];for(let o=t+156;o<t+512;o++)r+=e[o];this.cksumValid=r===this.cksum,this.cksum===null&&r===8*32&&(this.nullBlock=!0)}[In](e,t){for(let s in e)e[s]!==null&&e[s]!==void 0&&!(t&&s==="path")&&(this[s]=e[s])}encode(e,t){if(e||(e=this.block=Buffer.alloc(512),t=0),t||(t=0),!(e.length>=t+512))throw new Error("need 512 bytes for header");let s=this.ctime||this.atime?130:155,n=tf(this.path||"",s),r=n[0],o=n[1];this.needPax=n[2],this.needPax=Je(e,t,100,r)||this.needPax,this.needPax=Fe(e,t+100,8,this.mode)||this.needPax,this.needPax=Fe(e,t+108,8,this.uid)||this.needPax,this.needPax=Fe(e,t+116,8,this.gid)||this.needPax,this.needPax=Fe(e,t+124,12,this.size)||this.needPax,this.needPax=_n(e,t+136,12,this.mtime)||this.needPax,e[t+156]=this[X].charCodeAt(0),this.needPax=Je(e,t+157,100,this.linkpath)||this.needPax,e.write("ustar\x0000",t+257,8),this.needPax=Je(e,t+265,32,this.uname)||this.needPax,this.needPax=Je(e,t+297,32,this.gname)||this.needPax,this.needPax=Fe(e,t+329,8,this.devmaj)||this.needPax,this.needPax=Fe(e,t+337,8,this.devmin)||this.needPax,this.needPax=Je(e,t+345,s,o)||this.needPax,e[t+475]!==0?this.needPax=Je(e,t+345,155,o)||this.needPax:(this.needPax=Je(e,t+345,130,o)||this.needPax,this.needPax=_n(e,t+476,12,this.atime)||this.needPax,this.needPax=_n(e,t+488,12,this.ctime)||this.needPax);let a=8*32;for(let h=t;h<t+148;h++)a+=e[h];for(let h=t+156;h<t+512;h++)a+=e[h];return this.cksum=a,Fe(e,t+148,8,this.cksum),this.cksumValid=!0,this.needPax}set(e){for(let t in e)e[t]!==null&&e[t]!==void 0&&(this[t]=e[t])}get type(){return Tn.name.get(this[X])||this[X]}get typeKey(){return this[X]}set type(e){Tn.code.has(e)?this[X]=Tn.code.get(e):this[X]=e}},tf=(i,e)=>{let s=i,n="",r,o=gt.parse(i).root||".";if(Buffer.byteLength(s)<100)r=[s,n,!1];else{n=gt.dirname(s),s=gt.basename(s);do Buffer.byteLength(s)<=100&&Buffer.byteLength(n)<=e?r=[s,n,!1]:Buffer.byteLength(s)>100&&Buffer.byteLength(n)<=e?r=[s.slice(0,100-1),n,!0]:(s=gt.join(gt.basename(n),s),n=gt.dirname(n));while(n!==o&&!r);r||(r=[i.slice(0,100-1),"",!0])}return r},Ze=(i,e,t)=>i.slice(e,e+t).toString("utf8").replace(/\0.*/,""),xn=(i,e,t)=>sf(Ce(i,e,t)),sf=i=>i===null?null:new Date(i*1e3),Ce=(i,e,t)=>i[e]&128?Yo.parse(i.slice(e,e+t)):rf(i,e,t),nf=i=>isNaN(i)?null:i,rf=(i,e,t)=>nf(parseInt(i.slice(e,e+t).toString("utf8").replace(/\0.*$/,"").trim(),8)),of={12:8589934591,8:2097151},Fe=(i,e,t,s)=>s===null?!1:s>of[t]||s<0?(Yo.encode(s,i.slice(e,e+t)),!0):(af(i,e,t,s),!1),af=(i,e,t,s)=>i.write(lf(s,t),e,t,"ascii"),lf=(i,e)=>hf(Math.floor(i).toString(8),e),hf=(i,e)=>(i.length===e-1?i:new Array(e-i.length-1).join("0")+i+" ")+"\0",_n=(i,e,t,s)=>s===null?!1:Fe(i,e,t,s.getTime()/1e3),cf=new Array(156).join("\0"),Je=(i,e,t,s)=>s===null?!1:(i.write(s+cf,e,t,"utf8"),s.length!==Buffer.byteLength(s)||s.length>t);Xo.exports=On});var ki=f((Fg,Vo)=>{"use strict";var uf=yt(),ff=require("path"),Zt=class{constructor(e,t){this.atime=e.atime||null,this.charset=e.charset||null,this.comment=e.comment||null,this.ctime=e.ctime||null,this.gid=e.gid||null,this.gname=e.gname||null,this.linkpath=e.linkpath||null,this.mtime=e.mtime||null,this.path=e.path||null,this.size=e.size||null,this.uid=e.uid||null,this.uname=e.uname||null,this.dev=e.dev||null,this.ino=e.ino||null,this.nlink=e.nlink||null,this.global=t||!1}encode(){let e=this.encodeBody();if(e==="")return null;let t=Buffer.byteLength(e),s=512*Math.ceil(1+t/512),n=Buffer.allocUnsafe(s);for(let r=0;r<512;r++)n[r]=0;new uf({path:("PaxHeader/"+ff.basename(this.path)).slice(0,99),mode:this.mode||420,uid:this.uid||null,gid:this.gid||null,size:t,mtime:this.mtime||null,type:this.global?"GlobalExtendedHeader":"ExtendedHeader",linkpath:"",uname:this.uname||"",gname:this.gname||"",devmaj:0,devmin:0,atime:this.atime||null,ctime:this.ctime||null}).encode(n),n.write(e,512,t,"utf8");for(let r=t+512;r<n.length;r++)n[r]=0;return n}encodeBody(){return this.encodeField("path")+this.encodeField("ctime")+this.encodeField("atime")+this.encodeField("dev")+this.encodeField("ino")+this.encodeField("nlink")+this.encodeField("charset")+this.encodeField("comment")+this.encodeField("gid")+this.encodeField("gname")+this.encodeField("linkpath")+this.encodeField("mtime")+this.encodeField("size")+this.encodeField("uid")+this.encodeField("uname")}encodeField(e){if(this[e]===null||this[e]===void 0)return"";let t=this[e]instanceof Date?this[e].getTime()/1e3:this[e],s=" "+(e==="dev"||e==="ino"||e==="nlink"?"SCHILY.":"")+e+"="+t+`
`,n=Buffer.byteLength(s),r=Math.floor(Math.log(n)/Math.log(10))+1;return n+r>=Math.pow(10,r)&&(r+=1),r+n+s}};Zt.parse=(i,e,t)=>new Zt(df(mf(i),e),t);var df=(i,e)=>e?Object.keys(i).reduce((t,s)=>(t[s]=i[s],t),e):i,mf=i=>i.replace(/\n$/,"").split(`
`).reduce(pf,Object.create(null)),pf=(i,e)=>{let t=parseInt(e,10);if(t!==Buffer.byteLength(e)+1)return i;e=e.slice((t+" ").length);let s=e.split("="),n=s.shift().replace(/^SCHILY\.(dev|ino|nlink)/,"$1");if(!n)return i;let r=s.join("=");return i[n]=/^([A-Z]+\.)?([mac]|birth|creation)time$/.test(n)?new Date(r*1e3):/^[0-9]+$/.test(r)?+r:r,i};Vo.exports=Zt});var St=f((Mg,Zo)=>{Zo.exports=i=>{let e=i.length-1,t=-1;for(;e>-1&&i.charAt(e)==="/";)t=e,e--;return t===-1?i:i.slice(0,t)}});var Ui=f((Bg,Jo)=>{"use strict";Jo.exports=i=>class extends i{warn(e,t,s={}){this.file&&(s.file=this.file),this.cwd&&(s.cwd=this.cwd),s.code=t instanceof Error&&t.code||e,s.tarCode=e,!this.strict&&s.recoverable!==!1?(t instanceof Error&&(s=Object.assign(t,s),t=t.message),this.emit("warn",s.tarCode,t,s)):t instanceof Error?this.emit("error",Object.assign(t,s)):this.emit("error",Object.assign(new Error(`${e}: ${t}`),s))}}});var Dn=f((Ug,Qo)=>{"use strict";var qi=["|","<",">","?",":"],Pn=qi.map(i=>String.fromCharCode(61440+i.charCodeAt(0))),gf=new Map(qi.map((i,e)=>[i,Pn[e]])),yf=new Map(Pn.map((i,e)=>[i,qi[e]]));Qo.exports={encode:i=>qi.reduce((e,t)=>e.split(t).join(gf.get(t)),i),decode:i=>Pn.reduce((e,t)=>e.split(t).join(yf.get(t)),i)}});var vn=f((qg,ta)=>{var{isAbsolute:Sf,parse:ea}=require("path").win32;ta.exports=i=>{let e="",t=ea(i);for(;Sf(i)||t.root;){let s=i.charAt(0)==="/"&&i.slice(0,4)!=="//?/"?"/":t.root;i=i.slice(s.length),e+=s,t=ea(i)}return[e,i]}});var sa=f((Gg,ia)=>{"use strict";ia.exports=(i,e,t)=>(i&=4095,t&&(i=(i|384)&-19),e&&(i&256&&(i|=64),i&32&&(i|=8),i&4&&(i|=1)),i)});var qn=f((zg,ya)=>{"use strict";var{Minipass:ca}=Oi(),ua=ki(),fa=yt(),le=require("fs"),na=require("path"),ae=pt(),wf=St(),da=(i,e)=>e?(i=ae(i).replace(/^\.(\/|$)/,""),wf(e)+"/"+i):ae(i),Ef=16*1024*1024,ra=Symbol("process"),oa=Symbol("file"),aa=Symbol("directory"),Nn=Symbol("symlink"),la=Symbol("hardlink"),Jt=Symbol("header"),Gi=Symbol("read"),Ln=Symbol("lstat"),Hi=Symbol("onlstat"),Cn=Symbol("onread"),Fn=Symbol("onreadlink"),Mn=Symbol("openfile"),Bn=Symbol("onopenfile"),Me=Symbol("close"),$i=Symbol("mode"),kn=Symbol("awaitDrain"),An=Symbol("ondrain"),he=Symbol("prefix"),ha=Symbol("hadError"),ma=Ui(),bf=Dn(),pa=vn(),ga=sa(),zi=ma(class extends ca{constructor(e,t){if(t=t||{},super(t),typeof e!="string")throw new TypeError("path is required");this.path=ae(e),this.portable=!!t.portable,this.myuid=process.getuid&&process.getuid()||0,this.myuser=process.env.USER||"",this.maxReadSize=t.maxReadSize||Ef,this.linkCache=t.linkCache||new Map,this.statCache=t.statCache||new Map,this.preservePaths=!!t.preservePaths,this.cwd=ae(t.cwd||process.cwd()),this.strict=!!t.strict,this.noPax=!!t.noPax,this.noMtime=!!t.noMtime,this.mtime=t.mtime||null,this.prefix=t.prefix?ae(t.prefix):null,this.fd=null,this.blockLen=null,this.blockRemain=null,this.buf=null,this.offset=null,this.length=null,this.pos=null,this.remain=null,typeof t.onwarn=="function"&&this.on("warn",t.onwarn);let s=!1;if(!this.preservePaths){let[n,r]=pa(this.path);n&&(this.path=r,s=n)}this.win32=!!t.win32||process.platform==="win32",this.win32&&(this.path=bf.decode(this.path.replace(/\\/g,"/")),e=e.replace(/\\/g,"/")),this.absolute=ae(t.absolute||na.resolve(this.cwd,e)),this.path===""&&(this.path="./"),s&&this.warn("TAR_ENTRY_INFO",`stripping ${s} from absolute path`,{entry:this,path:s+this.path}),this.statCache.has(this.absolute)?this[Hi](this.statCache.get(this.absolute)):this[Ln]()}emit(e,...t){return e==="error"&&(this[ha]=!0),super.emit(e,...t)}[Ln](){le.lstat(this.absolute,(e,t)=>{if(e)return this.emit("error",e);this[Hi](t)})}[Hi](e){this.statCache.set(this.absolute,e),this.stat=e,e.isFile()||(e.size=0),this.type=Tf(e),this.emit("stat",e),this[ra]()}[ra](){switch(this.type){case"File":return this[oa]();case"Directory":return this[aa]();case"SymbolicLink":return this[Nn]();default:return this.end()}}[$i](e){return ga(e,this.type==="Directory",this.portable)}[he](e){return da(e,this.prefix)}[Jt](){this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.header=new fa({path:this[he](this.path),linkpath:this.type==="Link"?this[he](this.linkpath):this.linkpath,mode:this[$i](this.stat.mode),uid:this.portable?null:this.stat.uid,gid:this.portable?null:this.stat.gid,size:this.stat.size,mtime:this.noMtime?null:this.mtime||this.stat.mtime,type:this.type,uname:this.portable?null:this.stat.uid===this.myuid?this.myuser:"",atime:this.portable?null:this.stat.atime,ctime:this.portable?null:this.stat.ctime}),this.header.encode()&&!this.noPax&&super.write(new ua({atime:this.portable?null:this.header.atime,ctime:this.portable?null:this.header.ctime,gid:this.portable?null:this.header.gid,mtime:this.noMtime?null:this.mtime||this.header.mtime,path:this[he](this.path),linkpath:this.type==="Link"?this[he](this.linkpath):this.linkpath,size:this.header.size,uid:this.portable?null:this.header.uid,uname:this.portable?null:this.header.uname,dev:this.portable?null:this.stat.dev,ino:this.portable?null:this.stat.ino,nlink:this.portable?null:this.stat.nlink}).encode()),super.write(this.header.block)}[aa](){this.path.slice(-1)!=="/"&&(this.path+="/"),this.stat.size=0,this[Jt](),this.end()}[Nn](){le.readlink(this.absolute,(e,t)=>{if(e)return this.emit("error",e);this[Fn](t)})}[Fn](e){this.linkpath=ae(e),this[Jt](),this.end()}[la](e){this.type="Link",this.linkpath=ae(na.relative(this.cwd,e)),this.stat.size=0,this[Jt](),this.end()}[oa](){if(this.stat.nlink>1){let e=this.stat.dev+":"+this.stat.ino;if(this.linkCache.has(e)){let t=this.linkCache.get(e);if(t.indexOf(this.cwd)===0)return this[la](t)}this.linkCache.set(e,this.absolute)}if(this[Jt](),this.stat.size===0)return this.end();this[Mn]()}[Mn](){le.open(this.absolute,"r",(e,t)=>{if(e)return this.emit("error",e);this[Bn](t)})}[Bn](e){if(this.fd=e,this[ha])return this[Me]();this.blockLen=512*Math.ceil(this.stat.size/512),this.blockRemain=this.blockLen;let t=Math.min(this.blockLen,this.maxReadSize);this.buf=Buffer.allocUnsafe(t),this.offset=0,this.pos=0,this.remain=this.stat.size,this.length=this.buf.length,this[Gi]()}[Gi](){let{fd:e,buf:t,offset:s,length:n,pos:r}=this;le.read(e,t,s,n,r,(o,a)=>{if(o)return this[Me](()=>this.emit("error",o));this[Cn](a)})}[Me](e){le.close(this.fd,e)}[Cn](e){if(e<=0&&this.remain>0){let n=new Error("encountered unexpected EOF");return n.path=this.absolute,n.syscall="read",n.code="EOF",this[Me](()=>this.emit("error",n))}if(e>this.remain){let n=new Error("did not encounter expected EOF");return n.path=this.absolute,n.syscall="read",n.code="EOF",this[Me](()=>this.emit("error",n))}if(e===this.remain)for(let n=e;n<this.length&&e<this.blockRemain;n++)this.buf[n+this.offset]=0,e++,this.remain++;let t=this.offset===0&&e===this.buf.length?this.buf:this.buf.slice(this.offset,this.offset+e);this.write(t)?this[An]():this[kn](()=>this[An]())}[kn](e){this.once("drain",e)}write(e){if(this.blockRemain<e.length){let t=new Error("writing more data than expected");return t.path=this.absolute,this.emit("error",t)}return this.remain-=e.length,this.blockRemain-=e.length,this.pos+=e.length,this.offset+=e.length,super.write(e)}[An](){if(!this.remain)return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),this[Me](e=>e?this.emit("error",e):this.end());this.offset>=this.length&&(this.buf=Buffer.allocUnsafe(Math.min(this.blockRemain,this.buf.length)),this.offset=0),this.length=this.buf.length-this.offset,this[Gi]()}}),Un=class extends zi{[Ln](){this[Hi](le.lstatSync(this.absolute))}[Nn](){this[Fn](le.readlinkSync(this.absolute))}[Mn](){this[Bn](le.openSync(this.absolute,"r"))}[Gi](){let e=!0;try{let{fd:t,buf:s,offset:n,length:r,pos:o}=this,a=le.readSync(t,s,n,r,o);this[Cn](a),e=!1}finally{if(e)try{this[Me](()=>{})}catch{}}}[kn](e){e()}[Me](e){le.closeSync(this.fd),e()}},Rf=ma(class extends ca{constructor(e,t){t=t||{},super(t),this.preservePaths=!!t.preservePaths,this.portable=!!t.portable,this.strict=!!t.strict,this.noPax=!!t.noPax,this.noMtime=!!t.noMtime,this.readEntry=e,this.type=e.type,this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.prefix=t.prefix||null,this.path=ae(e.path),this.mode=this[$i](e.mode),this.uid=this.portable?null:e.uid,this.gid=this.portable?null:e.gid,this.uname=this.portable?null:e.uname,this.gname=this.portable?null:e.gname,this.size=e.size,this.mtime=this.noMtime?null:t.mtime||e.mtime,this.atime=this.portable?null:e.atime,this.ctime=this.portable?null:e.ctime,this.linkpath=ae(e.linkpath),typeof t.onwarn=="function"&&this.on("warn",t.onwarn);let s=!1;if(!this.preservePaths){let[n,r]=pa(this.path);n&&(this.path=r,s=n)}this.remain=e.size,this.blockRemain=e.startBlockSize,this.header=new fa({path:this[he](this.path),linkpath:this.type==="Link"?this[he](this.linkpath):this.linkpath,mode:this.mode,uid:this.portable?null:this.uid,gid:this.portable?null:this.gid,size:this.size,mtime:this.noMtime?null:this.mtime,type:this.type,uname:this.portable?null:this.uname,atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime}),s&&this.warn("TAR_ENTRY_INFO",`stripping ${s} from absolute path`,{entry:this,path:s+this.path}),this.header.encode()&&!this.noPax&&super.write(new ua({atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime,gid:this.portable?null:this.gid,mtime:this.noMtime?null:this.mtime,path:this[he](this.path),linkpath:this.type==="Link"?this[he](this.linkpath):this.linkpath,size:this.size,uid:this.portable?null:this.uid,uname:this.portable?null:this.uname,dev:this.portable?null:this.readEntry.dev,ino:this.portable?null:this.readEntry.ino,nlink:this.portable?null:this.readEntry.nlink}).encode()),super.write(this.header.block),e.pipe(this)}[he](e){return da(e,this.prefix)}[$i](e){return ga(e,this.type==="Directory",this.portable)}write(e){let t=e.length;if(t>this.blockRemain)throw new Error("writing more to entry than is appropriate");return this.blockRemain-=t,super.write(e)}end(){return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),super.end()}});zi.Sync=Un;zi.Tar=Rf;var Tf=i=>i.isFile()?"File":i.isDirectory()?"Directory":i.isSymbolicLink()?"SymbolicLink":"Unsupported";ya.exports=zi});var wa=f((Wg,Sa)=>{"use strict";Sa.exports=function(i){i.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var Gn=f((jg,Ea)=>{"use strict";Ea.exports=S;S.Node=Qe;S.create=S;function S(i){var e=this;if(e instanceof S||(e=new S),e.tail=null,e.head=null,e.length=0,i&&typeof i.forEach=="function")i.forEach(function(n){e.push(n)});else if(arguments.length>0)for(var t=0,s=arguments.length;t<s;t++)e.push(arguments[t]);return e}S.prototype.removeNode=function(i){if(i.list!==this)throw new Error("removing node which does not belong to this list");var e=i.next,t=i.prev;return e&&(e.prev=t),t&&(t.next=e),i===this.head&&(this.head=e),i===this.tail&&(this.tail=t),i.list.length--,i.next=null,i.prev=null,i.list=null,e};S.prototype.unshiftNode=function(i){if(i!==this.head){i.list&&i.list.removeNode(i);var e=this.head;i.list=this,i.next=e,e&&(e.prev=i),this.head=i,this.tail||(this.tail=i),this.length++}};S.prototype.pushNode=function(i){if(i!==this.tail){i.list&&i.list.removeNode(i);var e=this.tail;i.list=this,i.prev=e,e&&(e.next=i),this.tail=i,this.head||(this.head=i),this.length++}};S.prototype.push=function(){for(var i=0,e=arguments.length;i<e;i++)xf(this,arguments[i]);return this.length};S.prototype.unshift=function(){for(var i=0,e=arguments.length;i<e;i++)_f(this,arguments[i]);return this.length};S.prototype.pop=function(){if(this.tail){var i=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,i}};S.prototype.shift=function(){if(this.head){var i=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,i}};S.prototype.forEach=function(i,e){e=e||this;for(var t=this.head,s=0;t!==null;s++)i.call(e,t.value,s,this),t=t.next};S.prototype.forEachReverse=function(i,e){e=e||this;for(var t=this.tail,s=this.length-1;t!==null;s--)i.call(e,t.value,s,this),t=t.prev};S.prototype.get=function(i){for(var e=0,t=this.head;t!==null&&e<i;e++)t=t.next;if(e===i&&t!==null)return t.value};S.prototype.getReverse=function(i){for(var e=0,t=this.tail;t!==null&&e<i;e++)t=t.prev;if(e===i&&t!==null)return t.value};S.prototype.map=function(i,e){e=e||this;for(var t=new S,s=this.head;s!==null;)t.push(i.call(e,s.value,this)),s=s.next;return t};S.prototype.mapReverse=function(i,e){e=e||this;for(var t=new S,s=this.tail;s!==null;)t.push(i.call(e,s.value,this)),s=s.prev;return t};S.prototype.reduce=function(i,e){var t,s=this.head;if(arguments.length>1)t=e;else if(this.head)s=this.head.next,t=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var n=0;s!==null;n++)t=i(t,s.value,n),s=s.next;return t};S.prototype.reduceReverse=function(i,e){var t,s=this.tail;if(arguments.length>1)t=e;else if(this.tail)s=this.tail.prev,t=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var n=this.length-1;s!==null;n--)t=i(t,s.value,n),s=s.prev;return t};S.prototype.toArray=function(){for(var i=new Array(this.length),e=0,t=this.head;t!==null;e++)i[e]=t.value,t=t.next;return i};S.prototype.toArrayReverse=function(){for(var i=new Array(this.length),e=0,t=this.tail;t!==null;e++)i[e]=t.value,t=t.prev;return i};S.prototype.slice=function(i,e){e=e||this.length,e<0&&(e+=this.length),i=i||0,i<0&&(i+=this.length);var t=new S;if(e<i||e<0)return t;i<0&&(i=0),e>this.length&&(e=this.length);for(var s=0,n=this.head;n!==null&&s<i;s++)n=n.next;for(;n!==null&&s<e;s++,n=n.next)t.push(n.value);return t};S.prototype.sliceReverse=function(i,e){e=e||this.length,e<0&&(e+=this.length),i=i||0,i<0&&(i+=this.length);var t=new S;if(e<i||e<0)return t;i<0&&(i=0),e>this.length&&(e=this.length);for(var s=this.length,n=this.tail;n!==null&&s>e;s--)n=n.prev;for(;n!==null&&s>i;s--,n=n.prev)t.push(n.value);return t};S.prototype.splice=function(i,e,...t){i>this.length&&(i=this.length-1),i<0&&(i=this.length+i);for(var s=0,n=this.head;n!==null&&s<i;s++)n=n.next;for(var r=[],s=0;n&&s<e;s++)r.push(n.value),n=this.removeNode(n);n===null&&(n=this.tail),n!==this.head&&n!==this.tail&&(n=n.prev);for(var s=0;s<t.length;s++)n=If(this,n,t[s]);return r};S.prototype.reverse=function(){for(var i=this.head,e=this.tail,t=i;t!==null;t=t.prev){var s=t.prev;t.prev=t.next,t.next=s}return this.head=e,this.tail=i,this};function If(i,e,t){var s=e===i.head?new Qe(t,null,e,i):new Qe(t,e,e.next,i);return s.next===null&&(i.tail=s),s.prev===null&&(i.head=s),i.length++,s}function xf(i,e){i.tail=new Qe(e,i.tail,null,i),i.head||(i.head=i.tail),i.length++}function _f(i,e){i.head=new Qe(e,null,i.head,i),i.tail||(i.tail=i.head),i.length++}function Qe(i,e,t,s){if(!(this instanceof Qe))return new Qe(i,e,t,s);this.list=s,this.value=i,e?(e.next=this,this.prev=e):this.prev=null,t?(t.prev=this,this.next=t):this.next=null}try{wa()(S)}catch{}});var Qi=f((Yg,Pa)=>{"use strict";var Zi=class{constructor(e,t){this.path=e||"./",this.absolute=t,this.entry=null,this.stat=null,this.readdir=null,this.pending=!1,this.ignore=!1,this.piped=!1}},{Minipass:Of}=Oi(),ba=wn(),Pf=Mi(),Vn=qn(),Df=Vn.Sync,vf=Vn.Tar,Af=Gn(),Ra=Buffer.alloc(1024),Ki=Symbol("onStat"),Wi=Symbol("ended"),ce=Symbol("queue"),wt=Symbol("current"),et=Symbol("process"),ji=Symbol("processing"),Ta=Symbol("processJob"),ue=Symbol("jobs"),Hn=Symbol("jobDone"),Yi=Symbol("addFSEntry"),Ia=Symbol("addTarEntry"),jn=Symbol("stat"),Kn=Symbol("readdir"),Xi=Symbol("onreaddir"),Vi=Symbol("pipe"),xa=Symbol("entry"),$n=Symbol("entryOpt"),Yn=Symbol("writeEntryClass"),Oa=Symbol("write"),zn=Symbol("ondrain"),Ji=require("fs"),_a=require("path"),Nf=Ui(),Wn=pt(),Zn=Nf(class extends Of{constructor(e){if(super(e),e=e||Object.create(null),this.opt=e,this.file=e.file||"",this.cwd=e.cwd||process.cwd(),this.maxReadSize=e.maxReadSize,this.preservePaths=!!e.preservePaths,this.strict=!!e.strict,this.noPax=!!e.noPax,this.prefix=Wn(e.prefix||""),this.linkCache=e.linkCache||new Map,this.statCache=e.statCache||new Map,this.readdirCache=e.readdirCache||new Map,this[Yn]=Vn,typeof e.onwarn=="function"&&this.on("warn",e.onwarn),this.portable=!!e.portable,this.zip=null,e.gzip||e.brotli){if(e.gzip&&e.brotli)throw new TypeError("gzip and brotli are mutually exclusive");e.gzip&&(typeof e.gzip!="object"&&(e.gzip={}),this.portable&&(e.gzip.portable=!0),this.zip=new ba.Gzip(e.gzip)),e.brotli&&(typeof e.brotli!="object"&&(e.brotli={}),this.zip=new ba.BrotliCompress(e.brotli)),this.zip.on("data",t=>super.write(t)),this.zip.on("end",t=>super.end()),this.zip.on("drain",t=>this[zn]()),this.on("resume",t=>this.zip.resume())}else this.on("drain",this[zn]);this.noDirRecurse=!!e.noDirRecurse,this.follow=!!e.follow,this.noMtime=!!e.noMtime,this.mtime=e.mtime||null,this.filter=typeof e.filter=="function"?e.filter:t=>!0,this[ce]=new Af,this[ue]=0,this.jobs=+e.jobs||4,this[ji]=!1,this[Wi]=!1}[Oa](e){return super.write(e)}add(e){return this.write(e),this}end(e){return e&&this.write(e),this[Wi]=!0,this[et](),this}write(e){if(this[Wi])throw new Error("write after end");return e instanceof Pf?this[Ia](e):this[Yi](e),this.flowing}[Ia](e){let t=Wn(_a.resolve(this.cwd,e.path));if(!this.filter(e.path,e))e.resume();else{let s=new Zi(e.path,t,!1);s.entry=new vf(e,this[$n](s)),s.entry.on("end",n=>this[Hn](s)),this[ue]+=1,this[ce].push(s)}this[et]()}[Yi](e){let t=Wn(_a.resolve(this.cwd,e));this[ce].push(new Zi(e,t)),this[et]()}[jn](e){e.pending=!0,this[ue]+=1;let t=this.follow?"stat":"lstat";Ji[t](e.absolute,(s,n)=>{e.pending=!1,this[ue]-=1,s?this.emit("error",s):this[Ki](e,n)})}[Ki](e,t){this.statCache.set(e.absolute,t),e.stat=t,this.filter(e.path,t)||(e.ignore=!0),this[et]()}[Kn](e){e.pending=!0,this[ue]+=1,Ji.readdir(e.absolute,(t,s)=>{if(e.pending=!1,this[ue]-=1,t)return this.emit("error",t);this[Xi](e,s)})}[Xi](e,t){this.readdirCache.set(e.absolute,t),e.readdir=t,this[et]()}[et](){if(!this[ji]){this[ji]=!0;for(let e=this[ce].head;e!==null&&this[ue]<this.jobs;e=e.next)if(this[Ta](e.value),e.value.ignore){let t=e.next;this[ce].removeNode(e),e.next=t}this[ji]=!1,this[Wi]&&!this[ce].length&&this[ue]===0&&(this.zip?this.zip.end(Ra):(super.write(Ra),super.end()))}}get[wt](){return this[ce]&&this[ce].head&&this[ce].head.value}[Hn](e){this[ce].shift(),this[ue]-=1,this[et]()}[Ta](e){if(!e.pending){if(e.entry){e===this[wt]&&!e.piped&&this[Vi](e);return}if(e.stat||(this.statCache.has(e.absolute)?this[Ki](e,this.statCache.get(e.absolute)):this[jn](e)),!!e.stat&&!e.ignore&&!(!this.noDirRecurse&&e.stat.isDirectory()&&!e.readdir&&(this.readdirCache.has(e.absolute)?this[Xi](e,this.readdirCache.get(e.absolute)):this[Kn](e),!e.readdir))){if(e.entry=this[xa](e),!e.entry){e.ignore=!0;return}e===this[wt]&&!e.piped&&this[Vi](e)}}}[$n](e){return{onwarn:(t,s,n)=>this.warn(t,s,n),noPax:this.noPax,cwd:this.cwd,absolute:e.absolute,preservePaths:this.preservePaths,maxReadSize:this.maxReadSize,strict:this.strict,portable:this.portable,linkCache:this.linkCache,statCache:this.statCache,noMtime:this.noMtime,mtime:this.mtime,prefix:this.prefix}}[xa](e){this[ue]+=1;try{return new this[Yn](e.path,this[$n](e)).on("end",()=>this[Hn](e)).on("error",t=>this.emit("error",t))}catch(t){this.emit("error",t)}}[zn](){this[wt]&&this[wt].entry&&this[wt].entry.resume()}[Vi](e){e.piped=!0,e.readdir&&e.readdir.forEach(n=>{let r=e.path,o=r==="./"?"":r.replace(/\/*$/,"/");this[Yi](o+n)});let t=e.entry,s=this.zip;s?t.on("data",n=>{s.write(n)||t.pause()}):t.on("data",n=>{super.write(n)||t.pause()})}pause(){return this.zip&&this.zip.pause(),super.pause()}}),Xn=class extends Zn{constructor(e){super(e),this[Yn]=Df}pause(){}resume(){}[jn](e){let t=this.follow?"statSync":"lstatSync";this[Ki](e,Ji[t](e.absolute))}[Kn](e,t){this[Xi](e,Ji.readdirSync(e.absolute))}[Vi](e){let t=e.entry,s=this.zip;e.readdir&&e.readdir.forEach(n=>{let r=e.path,o=r==="./"?"":r.replace(/\/*$/,"/");this[Yi](o+n)}),s?t.on("data",n=>{s.write(n)}):t.on("data",n=>{super[Oa](n)})}};Zn.Sync=Xn;Pa.exports=Zn});var ka=f((Xg,Ba)=>{"use strict";var Da=typeof process=="object"&&process?process:{stdout:null,stderr:null},Lf=require("events"),va=require("stream"),Aa=require("string_decoder").StringDecoder,Te=Symbol("EOF"),Ie=Symbol("maybeEmitEnd"),Be=Symbol("emittedEnd"),es=Symbol("emittingEnd"),Qt=Symbol("emittedError"),ts=Symbol("closed"),Na=Symbol("read"),is=Symbol("flush"),La=Symbol("flushChunk"),j=Symbol("encoding"),xe=Symbol("decoder"),ss=Symbol("flowing"),ei=Symbol("paused"),Et=Symbol("resume"),L=Symbol("bufferLength"),Jn=Symbol("bufferPush"),Qn=Symbol("bufferShift"),q=Symbol("objectMode"),G=Symbol("destroyed"),er=Symbol("emitData"),Ca=Symbol("emitEnd"),tr=Symbol("emitEnd2"),_e=Symbol("async"),ti=i=>Promise.resolve().then(i),Fa=global._MP_NO_ITERATOR_SYMBOLS_!=="1",Cf=Fa&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),Ff=Fa&&Symbol.iterator||Symbol("iterator not implemented"),Mf=i=>i==="end"||i==="finish"||i==="prefinish",Bf=i=>i instanceof ArrayBuffer||typeof i=="object"&&i.constructor&&i.constructor.name==="ArrayBuffer"&&i.byteLength>=0,kf=i=>!Buffer.isBuffer(i)&&ArrayBuffer.isView(i),ns=class{constructor(e,t,s){this.src=e,this.dest=t,this.opts=s,this.ondrain=()=>e[Et](),t.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},ir=class extends ns{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,t,s){super(e,t,s),this.proxyErrors=n=>t.emit("error",n),e.on("error",this.proxyErrors)}};Ba.exports=class Ma extends va{constructor(e){super(),this[ss]=!1,this[ei]=!1,this.pipes=[],this.buffer=[],this[q]=e&&e.objectMode||!1,this[q]?this[j]=null:this[j]=e&&e.encoding||null,this[j]==="buffer"&&(this[j]=null),this[_e]=e&&!!e.async||!1,this[xe]=this[j]?new Aa(this[j]):null,this[Te]=!1,this[Be]=!1,this[es]=!1,this[ts]=!1,this[Qt]=null,this.writable=!0,this.readable=!0,this[L]=0,this[G]=!1}get bufferLength(){return this[L]}get encoding(){return this[j]}set encoding(e){if(this[q])throw new Error("cannot set encoding in objectMode");if(this[j]&&e!==this[j]&&(this[xe]&&this[xe].lastNeed||this[L]))throw new Error("cannot change encoding");this[j]!==e&&(this[xe]=e?new Aa(e):null,this.buffer.length&&(this.buffer=this.buffer.map(t=>this[xe].write(t)))),this[j]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[q]}set objectMode(e){this[q]=this[q]||!!e}get async(){return this[_e]}set async(e){this[_e]=this[_e]||!!e}write(e,t,s){if(this[Te])throw new Error("write after end");if(this[G])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof t=="function"&&(s=t,t="utf8"),t||(t="utf8");let n=this[_e]?ti:r=>r();return!this[q]&&!Buffer.isBuffer(e)&&(kf(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):Bf(e)?e=Buffer.from(e):typeof e!="string"&&(this.objectMode=!0)),this[q]?(this.flowing&&this[L]!==0&&this[is](!0),this.flowing?this.emit("data",e):this[Jn](e),this[L]!==0&&this.emit("readable"),s&&n(s),this.flowing):e.length?(typeof e=="string"&&!(t===this[j]&&!this[xe].lastNeed)&&(e=Buffer.from(e,t)),Buffer.isBuffer(e)&&this[j]&&(e=this[xe].write(e)),this.flowing&&this[L]!==0&&this[is](!0),this.flowing?this.emit("data",e):this[Jn](e),this[L]!==0&&this.emit("readable"),s&&n(s),this.flowing):(this[L]!==0&&this.emit("readable"),s&&n(s),this.flowing)}read(e){if(this[G])return null;if(this[L]===0||e===0||e>this[L])return this[Ie](),null;this[q]&&(e=null),this.buffer.length>1&&!this[q]&&(this.encoding?this.buffer=[this.buffer.join("")]:this.buffer=[Buffer.concat(this.buffer,this[L])]);let t=this[Na](e||null,this.buffer[0]);return this[Ie](),t}[Na](e,t){return e===t.length||e===null?this[Qn]():(this.buffer[0]=t.slice(e),t=t.slice(0,e),this[L]-=e),this.emit("data",t),!this.buffer.length&&!this[Te]&&this.emit("drain"),t}end(e,t,s){return typeof e=="function"&&(s=e,e=null),typeof t=="function"&&(s=t,t="utf8"),e&&this.write(e,t),s&&this.once("end",s),this[Te]=!0,this.writable=!1,(this.flowing||!this[ei])&&this[Ie](),this}[Et](){this[G]||(this[ei]=!1,this[ss]=!0,this.emit("resume"),this.buffer.length?this[is]():this[Te]?this[Ie]():this.emit("drain"))}resume(){return this[Et]()}pause(){this[ss]=!1,this[ei]=!0}get destroyed(){return this[G]}get flowing(){return this[ss]}get paused(){return this[ei]}[Jn](e){this[q]?this[L]+=1:this[L]+=e.length,this.buffer.push(e)}[Qn](){return this.buffer.length&&(this[q]?this[L]-=1:this[L]-=this.buffer[0].length),this.buffer.shift()}[is](e){do;while(this[La](this[Qn]()));!e&&!this.buffer.length&&!this[Te]&&this.emit("drain")}[La](e){return e?(this.emit("data",e),this.flowing):!1}pipe(e,t){if(this[G])return;let s=this[Be];return t=t||{},e===Da.stdout||e===Da.stderr?t.end=!1:t.end=t.end!==!1,t.proxyErrors=!!t.proxyErrors,s?t.end&&e.end():(this.pipes.push(t.proxyErrors?new ir(this,e,t):new ns(this,e,t)),this[_e]?ti(()=>this[Et]()):this[Et]()),e}unpipe(e){let t=this.pipes.find(s=>s.dest===e);t&&(this.pipes.splice(this.pipes.indexOf(t),1),t.unpipe())}addListener(e,t){return this.on(e,t)}on(e,t){let s=super.on(e,t);return e==="data"&&!this.pipes.length&&!this.flowing?this[Et]():e==="readable"&&this[L]!==0?super.emit("readable"):Mf(e)&&this[Be]?(super.emit(e),this.removeAllListeners(e)):e==="error"&&this[Qt]&&(this[_e]?ti(()=>t.call(this,this[Qt])):t.call(this,this[Qt])),s}get emittedEnd(){return this[Be]}[Ie](){!this[es]&&!this[Be]&&!this[G]&&this.buffer.length===0&&this[Te]&&(this[es]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[ts]&&this.emit("close"),this[es]=!1)}emit(e,t,...s){if(e!=="error"&&e!=="close"&&e!==G&&this[G])return;if(e==="data")return t?this[_e]?ti(()=>this[er](t)):this[er](t):!1;if(e==="end")return this[Ca]();if(e==="close"){if(this[ts]=!0,!this[Be]&&!this[G])return;let r=super.emit("close");return this.removeAllListeners("close"),r}else if(e==="error"){this[Qt]=t;let r=super.emit("error",t);return this[Ie](),r}else if(e==="resume"){let r=super.emit("resume");return this[Ie](),r}else if(e==="finish"||e==="prefinish"){let r=super.emit(e);return this.removeAllListeners(e),r}let n=super.emit(e,t,...s);return this[Ie](),n}[er](e){for(let s of this.pipes)s.dest.write(e)===!1&&this.pause();let t=super.emit("data",e);return this[Ie](),t}[Ca](){this[Be]||(this[Be]=!0,this.readable=!1,this[_e]?ti(()=>this[tr]()):this[tr]())}[tr](){if(this[xe]){let t=this[xe].end();if(t){for(let s of this.pipes)s.dest.write(t);super.emit("data",t)}}for(let t of this.pipes)t.end();let e=super.emit("end");return this.removeAllListeners("end"),e}collect(){let e=[];this[q]||(e.dataLength=0);let t=this.promise();return this.on("data",s=>{e.push(s),this[q]||(e.dataLength+=s.length)}),t.then(()=>e)}concat(){return this[q]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(e=>this[q]?Promise.reject(new Error("cannot concat in objectMode")):this[j]?e.join(""):Buffer.concat(e,e.dataLength))}promise(){return new Promise((e,t)=>{this.on(G,()=>t(new Error("stream destroyed"))),this.on("error",s=>t(s)),this.on("end",()=>e())})}[Cf](){return{next:()=>{let t=this.read();if(t!==null)return Promise.resolve({done:!1,value:t});if(this[Te])return Promise.resolve({done:!0});let s=null,n=null,r=l=>{this.removeListener("data",o),this.removeListener("end",a),n(l)},o=l=>{this.removeListener("error",r),this.removeListener("end",a),this.pause(),s({value:l,done:!!this[Te]})},a=()=>{this.removeListener("error",r),this.removeListener("data",o),s({done:!0})},h=()=>r(new Error("stream destroyed"));return new Promise((l,c)=>{n=c,s=l,this.once(G,h),this.once("error",r),this.once("end",a),this.once("data",o)})}}}[Ff](){return{next:()=>{let t=this.read();return{value:t,done:t===null}}}}destroy(e){return this[G]?(e?this.emit("error",e):this.emit(G),this):(this[G]=!0,this.buffer.length=0,this[L]=0,typeof this.close=="function"&&!this[ts]&&this.close(),e?this.emit("error",e):this.emit(G),this)}static isStream(e){return!!e&&(e instanceof Ma||e instanceof va||e instanceof Lf&&(typeof e.pipe=="function"||typeof e.write=="function"&&typeof e.end=="function"))}}});var Pt=f(si=>{"use strict";var Uf=ka(),qf=require("events").EventEmitter,K=require("fs"),rr=K.writev;if(!rr){let i=process.binding("fs"),e=i.FSReqWrap||i.FSReqCallback;rr=(t,s,n,r)=>{let o=(h,l)=>r(h,l,s),a=new e;a.oncomplete=o,i.writeBuffers(t,s,n,a)}}var _t=Symbol("_autoClose"),se=Symbol("_close"),ii=Symbol("_ended"),R=Symbol("_fd"),Ua=Symbol("_finished"),Ue=Symbol("_flags"),sr=Symbol("_flush"),or=Symbol("_handleChunk"),ar=Symbol("_makeBuf"),hs=Symbol("_mode"),rs=Symbol("_needDrain"),It=Symbol("_onerror"),Ot=Symbol("_onopen"),nr=Symbol("_onread"),Rt=Symbol("_onwrite"),qe=Symbol("_open"),Oe=Symbol("_path"),tt=Symbol("_pos"),fe=Symbol("_queue"),Tt=Symbol("_read"),qa=Symbol("_readSize"),ke=Symbol("_reading"),os=Symbol("_remain"),Ga=Symbol("_size"),as=Symbol("_write"),bt=Symbol("_writing"),ls=Symbol("_defaultFlag"),xt=Symbol("_errored"),cs=class extends Uf{constructor(e,t){if(t=t||{},super(t),this.readable=!0,this.writable=!1,typeof e!="string")throw new TypeError("path must be a string");this[xt]=!1,this[R]=typeof t.fd=="number"?t.fd:null,this[Oe]=e,this[qa]=t.readSize||16*1024*1024,this[ke]=!1,this[Ga]=typeof t.size=="number"?t.size:1/0,this[os]=this[Ga],this[_t]=typeof t.autoClose=="boolean"?t.autoClose:!0,typeof this[R]=="number"?this[Tt]():this[qe]()}get fd(){return this[R]}get path(){return this[Oe]}write(){throw new TypeError("this is a readable stream")}end(){throw new TypeError("this is a readable stream")}[qe](){K.open(this[Oe],"r",(e,t)=>this[Ot](e,t))}[Ot](e,t){e?this[It](e):(this[R]=t,this.emit("open",t),this[Tt]())}[ar](){return Buffer.allocUnsafe(Math.min(this[qa],this[os]))}[Tt](){if(!this[ke]){this[ke]=!0;let e=this[ar]();if(e.length===0)return process.nextTick(()=>this[nr](null,0,e));K.read(this[R],e,0,e.length,null,(t,s,n)=>this[nr](t,s,n))}}[nr](e,t,s){this[ke]=!1,e?this[It](e):this[or](t,s)&&this[Tt]()}[se](){if(this[_t]&&typeof this[R]=="number"){let e=this[R];this[R]=null,K.close(e,t=>t?this.emit("error",t):this.emit("close"))}}[It](e){this[ke]=!0,this[se](),this.emit("error",e)}[or](e,t){let s=!1;return this[os]-=e,e>0&&(s=super.write(e<t.length?t.slice(0,e):t)),(e===0||this[os]<=0)&&(s=!1,this[se](),super.end()),s}emit(e,t){switch(e){case"prefinish":case"finish":break;case"drain":typeof this[R]=="number"&&this[Tt]();break;case"error":return this[xt]?void 0:(this[xt]=!0,super.emit(e,t));default:return super.emit(e,t)}}},lr=class extends cs{[qe](){let e=!0;try{this[Ot](null,K.openSync(this[Oe],"r")),e=!1}finally{e&&this[se]()}}[Tt](){let e=!0;try{if(!this[ke]){this[ke]=!0;do{let t=this[ar](),s=t.length===0?0:K.readSync(this[R],t,0,t.length,null);if(!this[or](s,t))break}while(!0);this[ke]=!1}e=!1}finally{e&&this[se]()}}[se](){if(this[_t]&&typeof this[R]=="number"){let e=this[R];this[R]=null,K.closeSync(e),this.emit("close")}}},us=class extends qf{constructor(e,t){t=t||{},super(t),this.readable=!1,this.writable=!0,this[xt]=!1,this[bt]=!1,this[ii]=!1,this[rs]=!1,this[fe]=[],this[Oe]=e,this[R]=typeof t.fd=="number"?t.fd:null,this[hs]=t.mode===void 0?438:t.mode,this[tt]=typeof t.start=="number"?t.start:null,this[_t]=typeof t.autoClose=="boolean"?t.autoClose:!0;let s=this[tt]!==null?"r+":"w";this[ls]=t.flags===void 0,this[Ue]=this[ls]?s:t.flags,this[R]===null&&this[qe]()}emit(e,t){if(e==="error"){if(this[xt])return;this[xt]=!0}return super.emit(e,t)}get fd(){return this[R]}get path(){return this[Oe]}[It](e){this[se](),this[bt]=!0,this.emit("error",e)}[qe](){K.open(this[Oe],this[Ue],this[hs],(e,t)=>this[Ot](e,t))}[Ot](e,t){this[ls]&&this[Ue]==="r+"&&e&&e.code==="ENOENT"?(this[Ue]="w",this[qe]()):e?this[It](e):(this[R]=t,this.emit("open",t),this[sr]())}end(e,t){return e&&this.write(e,t),this[ii]=!0,!this[bt]&&!this[fe].length&&typeof this[R]=="number"&&this[Rt](null,0),this}write(e,t){return typeof e=="string"&&(e=Buffer.from(e,t)),this[ii]?(this.emit("error",new Error("write() after end()")),!1):this[R]===null||this[bt]||this[fe].length?(this[fe].push(e),this[rs]=!0,!1):(this[bt]=!0,this[as](e),!0)}[as](e){K.write(this[R],e,0,e.length,this[tt],(t,s)=>this[Rt](t,s))}[Rt](e,t){e?this[It](e):(this[tt]!==null&&(this[tt]+=t),this[fe].length?this[sr]():(this[bt]=!1,this[ii]&&!this[Ua]?(this[Ua]=!0,this[se](),this.emit("finish")):this[rs]&&(this[rs]=!1,this.emit("drain"))))}[sr](){if(this[fe].length===0)this[ii]&&this[Rt](null,0);else if(this[fe].length===1)this[as](this[fe].pop());else{let e=this[fe];this[fe]=[],rr(this[R],e,this[tt],(t,s)=>this[Rt](t,s))}}[se](){if(this[_t]&&typeof this[R]=="number"){let e=this[R];this[R]=null,K.close(e,t=>t?this.emit("error",t):this.emit("close"))}}},hr=class extends us{[qe](){let e;if(this[ls]&&this[Ue]==="r+")try{e=K.openSync(this[Oe],this[Ue],this[hs])}catch(t){if(t.code==="ENOENT")return this[Ue]="w",this[qe]();throw t}else e=K.openSync(this[Oe],this[Ue],this[hs]);this[Ot](null,e)}[se](){if(this[_t]&&typeof this[R]=="number"){let e=this[R];this[R]=null,K.closeSync(e),this.emit("close")}}[as](e){let t=!0;try{this[Rt](null,K.writeSync(this[R],e,0,e.length,this[tt])),t=!1}finally{if(t)try{this[se]()}catch{}}}};si.ReadStream=cs;si.ReadStreamSync=lr;si.WriteStream=us;si.WriteStreamSync=hr});var Ss=f((Jg,Za)=>{"use strict";var Gf=Ui(),Ha=yt(),Hf=require("events"),$f=Gn(),zf=1024*1024,Wf=Mi(),$a=ki(),za=wn(),{nextTick:jf}=require("process"),cr=Buffer.from([31,139]),J=Symbol("state"),it=Symbol("writeEntry"),Pe=Symbol("readEntry"),ur=Symbol("nextEntry"),Wa=Symbol("processEntry"),Q=Symbol("extendedHeader"),ni=Symbol("globalExtendedHeader"),Ge=Symbol("meta"),ja=Symbol("emitMeta"),x=Symbol("buffer"),De=Symbol("queue"),He=Symbol("ended"),Ka=Symbol("emittedEnd"),st=Symbol("emit"),C=Symbol("unzip"),fs=Symbol("consumeChunk"),ds=Symbol("consumeChunkSub"),fr=Symbol("consumeBody"),Ya=Symbol("consumeMeta"),Xa=Symbol("consumeHeader"),ms=Symbol("consuming"),dr=Symbol("bufferConcat"),mr=Symbol("maybeEnd"),ri=Symbol("writing"),$e=Symbol("aborted"),ps=Symbol("onDone"),nt=Symbol("sawValidEntry"),gs=Symbol("sawNullBlock"),ys=Symbol("sawEOF"),Va=Symbol("closeStream"),Kf=i=>!0;Za.exports=Gf(class extends Hf{constructor(e){e=e||{},super(e),this.file=e.file||"",this[nt]=null,this.on(ps,s=>{(this[J]==="begin"||this[nt]===!1)&&this.warn("TAR_BAD_ARCHIVE","Unrecognized archive format")}),e.ondone?this.on(ps,e.ondone):this.on(ps,s=>{this.emit("prefinish"),this.emit("finish"),this.emit("end")}),this.strict=!!e.strict,this.maxMetaEntrySize=e.maxMetaEntrySize||zf,this.filter=typeof e.filter=="function"?e.filter:Kf;let t=e.file&&(e.file.endsWith(".tar.br")||e.file.endsWith(".tbr"));this.brotli=!e.gzip&&e.brotli!==void 0?e.brotli:t?void 0:!1,this.writable=!0,this.readable=!1,this[De]=new $f,this[x]=null,this[Pe]=null,this[it]=null,this[J]="begin",this[Ge]="",this[Q]=null,this[ni]=null,this[He]=!1,this[C]=null,this[$e]=!1,this[gs]=!1,this[ys]=!1,this.on("end",()=>this[Va]()),typeof e.onwarn=="function"&&this.on("warn",e.onwarn),typeof e.onentry=="function"&&this.on("entry",e.onentry)}[Xa](e,t){this[nt]===null&&(this[nt]=!1);let s;try{s=new Ha(e,t,this[Q],this[ni])}catch(n){return this.warn("TAR_ENTRY_INVALID",n)}if(s.nullBlock)this[gs]?(this[ys]=!0,this[J]==="begin"&&(this[J]="header"),this[st]("eof")):(this[gs]=!0,this[st]("nullBlock"));else if(this[gs]=!1,!s.cksumValid)this.warn("TAR_ENTRY_INVALID","checksum failure",{header:s});else if(!s.path)this.warn("TAR_ENTRY_INVALID","path is required",{header:s});else{let n=s.type;if(/^(Symbolic)?Link$/.test(n)&&!s.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath required",{header:s});else if(!/^(Symbolic)?Link$/.test(n)&&s.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath forbidden",{header:s});else{let r=this[it]=new Wf(s,this[Q],this[ni]);if(!this[nt])if(r.remain){let o=()=>{r.invalid||(this[nt]=!0)};r.on("end",o)}else this[nt]=!0;r.meta?r.size>this.maxMetaEntrySize?(r.ignore=!0,this[st]("ignoredEntry",r),this[J]="ignore",r.resume()):r.size>0&&(this[Ge]="",r.on("data",o=>this[Ge]+=o),this[J]="meta"):(this[Q]=null,r.ignore=r.ignore||!this.filter(r.path,r),r.ignore?(this[st]("ignoredEntry",r),this[J]=r.remain?"ignore":"header",r.resume()):(r.remain?this[J]="body":(this[J]="header",r.end()),this[Pe]?this[De].push(r):(this[De].push(r),this[ur]())))}}}[Va](){jf(()=>this.emit("close"))}[Wa](e){let t=!0;return e?Array.isArray(e)?this.emit.apply(this,e):(this[Pe]=e,this.emit("entry",e),e.emittedEnd||(e.on("end",s=>this[ur]()),t=!1)):(this[Pe]=null,t=!1),t}[ur](){do;while(this[Wa](this[De].shift()));if(!this[De].length){let e=this[Pe];!e||e.flowing||e.size===e.remain?this[ri]||this.emit("drain"):e.once("drain",s=>this.emit("drain"))}}[fr](e,t){let s=this[it],n=s.blockRemain,r=n>=e.length&&t===0?e:e.slice(t,t+n);return s.write(r),s.blockRemain||(this[J]="header",this[it]=null,s.end()),r.length}[Ya](e,t){let s=this[it],n=this[fr](e,t);return this[it]||this[ja](s),n}[st](e,t,s){!this[De].length&&!this[Pe]?this.emit(e,t,s):this[De].push([e,t,s])}[ja](e){switch(this[st]("meta",this[Ge]),e.type){case"ExtendedHeader":case"OldExtendedHeader":this[Q]=$a.parse(this[Ge],this[Q],!1);break;case"GlobalExtendedHeader":this[ni]=$a.parse(this[Ge],this[ni],!0);break;case"NextFileHasLongPath":case"OldGnuLongPath":this[Q]=this[Q]||Object.create(null),this[Q].path=this[Ge].replace(/\0.*/,"");break;case"NextFileHasLongLinkpath":this[Q]=this[Q]||Object.create(null),this[Q].linkpath=this[Ge].replace(/\0.*/,"");break;default:throw new Error("unknown meta: "+e.type)}}abort(e){this[$e]=!0,this.emit("abort",e),this.warn("TAR_ABORT",e,{recoverable:!1})}write(e){if(this[$e])return;if((this[C]===null||this.brotli===void 0&&this[C]===!1)&&e){if(this[x]&&(e=Buffer.concat([this[x],e]),this[x]=null),e.length<cr.length)return this[x]=e,!0;for(let r=0;this[C]===null&&r<cr.length;r++)e[r]!==cr[r]&&(this[C]=!1);let n=this.brotli===void 0;if(this[C]===!1&&n)if(e.length<512)if(this[He])this.brotli=!0;else return this[x]=e,!0;else try{new Ha(e.slice(0,512)),this.brotli=!1}catch{this.brotli=!0}if(this[C]===null||this[C]===!1&&this.brotli){let r=this[He];this[He]=!1,this[C]=this[C]===null?new za.Unzip:new za.BrotliDecompress,this[C].on("data",a=>this[fs](a)),this[C].on("error",a=>this.abort(a)),this[C].on("end",a=>{this[He]=!0,this[fs]()}),this[ri]=!0;let o=this[C][r?"end":"write"](e);return this[ri]=!1,o}}this[ri]=!0,this[C]?this[C].write(e):this[fs](e),this[ri]=!1;let s=this[De].length?!1:this[Pe]?this[Pe].flowing:!0;return!s&&!this[De].length&&this[Pe].once("drain",n=>this.emit("drain")),s}[dr](e){e&&!this[$e]&&(this[x]=this[x]?Buffer.concat([this[x],e]):e)}[mr](){if(this[He]&&!this[Ka]&&!this[$e]&&!this[ms]){this[Ka]=!0;let e=this[it];if(e&&e.blockRemain){let t=this[x]?this[x].length:0;this.warn("TAR_BAD_ARCHIVE",`Truncated input (needed ${e.blockRemain} more bytes, only ${t} available)`,{entry:e}),this[x]&&e.write(this[x]),e.end()}this[st](ps)}}[fs](e){if(this[ms])this[dr](e);else if(!e&&!this[x])this[mr]();else{if(this[ms]=!0,this[x]){this[dr](e);let t=this[x];this[x]=null,this[ds](t)}else this[ds](e);for(;this[x]&&this[x].length>=512&&!this[$e]&&!this[ys];){let t=this[x];this[x]=null,this[ds](t)}this[ms]=!1}(!this[x]||this[He])&&this[mr]()}[ds](e){let t=0,s=e.length;for(;t+512<=s&&!this[$e]&&!this[ys];)switch(this[J]){case"begin":case"header":this[Xa](e,t),t+=512;break;case"ignore":case"body":t+=this[fr](e,t);break;case"meta":t+=this[Ya](e,t);break;default:throw new Error("invalid state: "+this[J])}t<s&&(this[x]?this[x]=Buffer.concat([e.slice(t),this[x]]):this[x]=e.slice(t))}end(e){this[$e]||(this[C]?this[C].end(e):(this[He]=!0,this.brotli===void 0&&(e=e||Buffer.alloc(0)),this.write(e)))}})});var ws=f((Qg,tl)=>{"use strict";var Yf=ct(),Qa=Ss(),Dt=require("fs"),Xf=Pt(),Ja=require("path"),pr=St();tl.exports=(i,e,t)=>{typeof i=="function"?(t=i,e=null,i={}):Array.isArray(i)&&(e=i,i={}),typeof e=="function"&&(t=e,e=null),e?e=Array.from(e):e=[];let s=Yf(i);if(s.sync&&typeof t=="function")throw new TypeError("callback not supported for sync tar functions");if(!s.file&&typeof t=="function")throw new TypeError("callback only supported with file option");return e.length&&Zf(s,e),s.noResume||Vf(s),s.file&&s.sync?Jf(s):s.file?Qf(s,t):el(s)};var Vf=i=>{let e=i.onentry;i.onentry=e?t=>{e(t),t.resume()}:t=>t.resume()},Zf=(i,e)=>{let t=new Map(e.map(r=>[pr(r),!0])),s=i.filter,n=(r,o)=>{let a=o||Ja.parse(r).root||".",h=r===a?!1:t.has(r)?t.get(r):n(Ja.dirname(r),a);return t.set(r,h),h};i.filter=s?(r,o)=>s(r,o)&&n(pr(r)):r=>n(pr(r))},Jf=i=>{let e=el(i),t=i.file,s=!0,n;try{let r=Dt.statSync(t),o=i.maxReadSize||16*1024*1024;if(r.size<o)e.end(Dt.readFileSync(t));else{let a=0,h=Buffer.allocUnsafe(o);for(n=Dt.openSync(t,"r");a<r.size;){let l=Dt.readSync(n,h,0,o,a);a+=l,e.write(h.slice(0,l))}e.end()}s=!1}finally{if(s&&n)try{Dt.closeSync(n)}catch{}}},Qf=(i,e)=>{let t=new Qa(i),s=i.maxReadSize||16*1024*1024,n=i.file,r=new Promise((o,a)=>{t.on("error",a),t.on("end",o),Dt.stat(n,(h,l)=>{if(h)a(h);else{let c=new Xf.ReadStream(n,{readSize:s,size:l.size});c.on("error",a),c.pipe(t)}})});return e?r.then(e,e):r},el=i=>new Qa(i)});var al=f((ey,ol)=>{"use strict";var ed=ct(),Es=Qi(),il=Pt(),sl=ws(),nl=require("path");ol.exports=(i,e,t)=>{if(typeof e=="function"&&(t=e),Array.isArray(i)&&(e=i,i={}),!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");e=Array.from(e);let s=ed(i);if(s.sync&&typeof t=="function")throw new TypeError("callback not supported for sync tar functions");if(!s.file&&typeof t=="function")throw new TypeError("callback only supported with file option");return s.file&&s.sync?td(s,e):s.file?id(s,e,t):s.sync?sd(s,e):nd(s,e)};var td=(i,e)=>{let t=new Es.Sync(i),s=new il.WriteStreamSync(i.file,{mode:i.mode||438});t.pipe(s),rl(t,e)},id=(i,e,t)=>{let s=new Es(i),n=new il.WriteStream(i.file,{mode:i.mode||438});s.pipe(n);let r=new Promise((o,a)=>{n.on("error",a),n.on("close",o),s.on("error",a)});return gr(s,e),t?r.then(t,t):r},rl=(i,e)=>{e.forEach(t=>{t.charAt(0)==="@"?sl({file:nl.resolve(i.cwd,t.slice(1)),sync:!0,noResume:!0,onentry:s=>i.add(s)}):i.add(t)}),i.end()},gr=(i,e)=>{for(;e.length;){let t=e.shift();if(t.charAt(0)==="@")return sl({file:nl.resolve(i.cwd,t.slice(1)),noResume:!0,onentry:s=>i.add(s)}).then(s=>gr(i,e));i.add(t)}i.end()},sd=(i,e)=>{let t=new Es.Sync(i);return rl(t,e),t},nd=(i,e)=>{let t=new Es(i);return gr(t,e),t}});var yr=f((ty,ml)=>{"use strict";var rd=ct(),ll=Qi(),V=require("fs"),hl=Pt(),cl=ws(),ul=require("path"),fl=yt();ml.exports=(i,e,t)=>{let s=rd(i);if(!s.file)throw new TypeError("file is required");if(s.gzip||s.brotli||s.file.endsWith(".br")||s.file.endsWith(".tbr"))throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");return e=Array.from(e),s.sync?od(s,e):ld(s,e,t)};var od=(i,e)=>{let t=new ll.Sync(i),s=!0,n,r;try{try{n=V.openSync(i.file,"r+")}catch(h){if(h.code==="ENOENT")n=V.openSync(i.file,"w+");else throw h}let o=V.fstatSync(n),a=Buffer.alloc(512);e:for(r=0;r<o.size;r+=512){for(let c=0,u=0;c<512;c+=u){if(u=V.readSync(n,a,c,a.length-c,r+c),r===0&&a[0]===31&&a[1]===139)throw new Error("cannot append to compressed archives");if(!u)break e}let h=new fl(a);if(!h.cksumValid)break;let l=512*Math.ceil(h.size/512);if(r+l+512>o.size)break;r+=l,i.mtimeCache&&i.mtimeCache.set(h.path,h.mtime)}s=!1,ad(i,t,r,n,e)}finally{if(s)try{V.closeSync(n)}catch{}}},ad=(i,e,t,s,n)=>{let r=new hl.WriteStreamSync(i.file,{fd:s,start:t});e.pipe(r),hd(e,n)},ld=(i,e,t)=>{e=Array.from(e);let s=new ll(i),n=(o,a,h)=>{let l=(p,E)=>{p?V.close(o,b=>h(p)):h(null,E)},c=0;if(a===0)return l(null,0);let u=0,d=Buffer.alloc(512),m=(p,E)=>{if(p)return l(p);if(u+=E,u<512&&E)return V.read(o,d,u,d.length-u,c+u,m);if(c===0&&d[0]===31&&d[1]===139)return l(new Error("cannot append to compressed archives"));if(u<512)return l(null,c);let b=new fl(d);if(!b.cksumValid)return l(null,c);let T=512*Math.ceil(b.size/512);if(c+T+512>a||(c+=T+512,c>=a))return l(null,c);i.mtimeCache&&i.mtimeCache.set(b.path,b.mtime),u=0,V.read(o,d,0,512,c,m)};V.read(o,d,0,512,c,m)},r=new Promise((o,a)=>{s.on("error",a);let h="r+",l=(c,u)=>{if(c&&c.code==="ENOENT"&&h==="r+")return h="w+",V.open(i.file,h,l);if(c)return a(c);V.fstat(u,(d,m)=>{if(d)return V.close(u,()=>a(d));n(u,m.size,(p,E)=>{if(p)return a(p);let b=new hl.WriteStream(i.file,{fd:u,start:E});s.pipe(b),b.on("error",a),b.on("close",o),dl(s,e)})})};V.open(i.file,h,l)});return t?r.then(t,t):r},hd=(i,e)=>{e.forEach(t=>{t.charAt(0)==="@"?cl({file:ul.resolve(i.cwd,t.slice(1)),sync:!0,noResume:!0,onentry:s=>i.add(s)}):i.add(t)}),i.end()},dl=(i,e)=>{for(;e.length;){let t=e.shift();if(t.charAt(0)==="@")return cl({file:ul.resolve(i.cwd,t.slice(1)),noResume:!0,onentry:s=>i.add(s)}).then(s=>dl(i,e));i.add(t)}i.end()}});var gl=f((iy,pl)=>{"use strict";var cd=ct(),ud=yr();pl.exports=(i,e,t)=>{let s=cd(i);if(!s.file)throw new TypeError("file is required");if(s.gzip||s.brotli||s.file.endsWith(".br")||s.file.endsWith(".tbr"))throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");return e=Array.from(e),fd(s),ud(s,e,t)};var fd=i=>{let e=i.filter;i.mtimeCache||(i.mtimeCache=new Map),i.filter=e?(t,s)=>e(t,s)&&!(i.mtimeCache.get(t)>s.mtime):(t,s)=>!(i.mtimeCache.get(t)>s.mtime)}});var wl=f((sy,Sl)=>{var{promisify:yl}=require("util"),ze=require("fs"),dd=i=>{if(!i)i={mode:511,fs:ze};else if(typeof i=="object")i={mode:511,fs:ze,...i};else if(typeof i=="number")i={mode:i,fs:ze};else if(typeof i=="string")i={mode:parseInt(i,8),fs:ze};else throw new TypeError("invalid options argument");return i.mkdir=i.mkdir||i.fs.mkdir||ze.mkdir,i.mkdirAsync=yl(i.mkdir),i.stat=i.stat||i.fs.stat||ze.stat,i.statAsync=yl(i.stat),i.statSync=i.statSync||i.fs.statSync||ze.statSync,i.mkdirSync=i.mkdirSync||i.fs.mkdirSync||ze.mkdirSync,i};Sl.exports=dd});var bl=f((ny,El)=>{var md=process.env.__TESTING_MKDIRP_PLATFORM__||process.platform,{resolve:pd,parse:gd}=require("path"),yd=i=>{if(/\0/.test(i))throw Object.assign(new TypeError("path must be a string without null bytes"),{path:i,code:"ERR_INVALID_ARG_VALUE"});if(i=pd(i),md==="win32"){let e=/[*|"<>?:]/,{root:t}=gd(i);if(e.test(i.substr(t.length)))throw Object.assign(new Error("Illegal characters in path."),{path:i,code:"EINVAL"})}return i};El.exports=yd});var _l=f((ry,xl)=>{var{dirname:Rl}=require("path"),Tl=(i,e,t=void 0)=>t===e?Promise.resolve():i.statAsync(e).then(s=>s.isDirectory()?t:void 0,s=>s.code==="ENOENT"?Tl(i,Rl(e),e):void 0),Il=(i,e,t=void 0)=>{if(t!==e)try{return i.statSync(e).isDirectory()?t:void 0}catch(s){return s.code==="ENOENT"?Il(i,Rl(e),e):void 0}};xl.exports={findMade:Tl,findMadeSync:Il}});var Er=f((oy,Pl)=>{var{dirname:Ol}=require("path"),Sr=(i,e,t)=>{e.recursive=!1;let s=Ol(i);return s===i?e.mkdirAsync(i,e).catch(n=>{if(n.code!=="EISDIR")throw n}):e.mkdirAsync(i,e).then(()=>t||i,n=>{if(n.code==="ENOENT")return Sr(s,e).then(r=>Sr(i,e,r));if(n.code!=="EEXIST"&&n.code!=="EROFS")throw n;return e.statAsync(i).then(r=>{if(r.isDirectory())return t;throw n},()=>{throw n})})},wr=(i,e,t)=>{let s=Ol(i);if(e.recursive=!1,s===i)try{return e.mkdirSync(i,e)}catch(n){if(n.code!=="EISDIR")throw n;return}try{return e.mkdirSync(i,e),t||i}catch(n){if(n.code==="ENOENT")return wr(i,e,wr(s,e,t));if(n.code!=="EEXIST"&&n.code!=="EROFS")throw n;try{if(!e.statSync(i).isDirectory())throw n}catch{throw n}}};Pl.exports={mkdirpManual:Sr,mkdirpManualSync:wr}});var Al=f((ay,vl)=>{var{dirname:Dl}=require("path"),{findMade:Sd,findMadeSync:wd}=_l(),{mkdirpManual:Ed,mkdirpManualSync:bd}=Er(),Rd=(i,e)=>(e.recursive=!0,Dl(i)===i?e.mkdirAsync(i,e):Sd(e,i).then(s=>e.mkdirAsync(i,e).then(()=>s).catch(n=>{if(n.code==="ENOENT")return Ed(i,e);throw n}))),Td=(i,e)=>{if(e.recursive=!0,Dl(i)===i)return e.mkdirSync(i,e);let s=wd(e,i);try{return e.mkdirSync(i,e),s}catch(n){if(n.code==="ENOENT")return bd(i,e);throw n}};vl.exports={mkdirpNative:Rd,mkdirpNativeSync:Td}});var Fl=f((ly,Cl)=>{var Nl=require("fs"),Id=process.env.__TESTING_MKDIRP_NODE_VERSION__||process.version,br=Id.replace(/^v/,"").split("."),Ll=+br[0]>10||+br[0]==10&&+br[1]>=12,xd=Ll?i=>i.mkdir===Nl.mkdir:()=>!1,_d=Ll?i=>i.mkdirSync===Nl.mkdirSync:()=>!1;Cl.exports={useNative:xd,useNativeSync:_d}});var Gl=f((hy,ql)=>{var vt=wl(),At=bl(),{mkdirpNative:Ml,mkdirpNativeSync:Bl}=Al(),{mkdirpManual:kl,mkdirpManualSync:Ul}=Er(),{useNative:Od,useNativeSync:Pd}=Fl(),Nt=(i,e)=>(i=At(i),e=vt(e),Od(e)?Ml(i,e):kl(i,e)),Dd=(i,e)=>(i=At(i),e=vt(e),Pd(e)?Bl(i,e):Ul(i,e));Nt.sync=Dd;Nt.native=(i,e)=>Ml(At(i),vt(e));Nt.manual=(i,e)=>kl(At(i),vt(e));Nt.nativeSync=(i,e)=>Bl(At(i),vt(e));Nt.manualSync=(i,e)=>Ul(At(i),vt(e));ql.exports=Nt});var Yl=f((cy,Kl)=>{"use strict";var ee=require("fs"),rt=require("path"),vd=ee.lchown?"lchown":"chown",Ad=ee.lchownSync?"lchownSync":"chownSync",$l=ee.lchown&&!process.version.match(/v1[1-9]+\./)&&!process.version.match(/v10\.[6-9]/),Hl=(i,e,t)=>{try{return ee[Ad](i,e,t)}catch(s){if(s.code!=="ENOENT")throw s}},Nd=(i,e,t)=>{try{return ee.chownSync(i,e,t)}catch(s){if(s.code!=="ENOENT")throw s}},Ld=$l?(i,e,t,s)=>n=>{!n||n.code!=="EISDIR"?s(n):ee.chown(i,e,t,s)}:(i,e,t,s)=>s,Rr=$l?(i,e,t)=>{try{return Hl(i,e,t)}catch(s){if(s.code!=="EISDIR")throw s;Nd(i,e,t)}}:(i,e,t)=>Hl(i,e,t),Cd=process.version,zl=(i,e,t)=>ee.readdir(i,e,t),Fd=(i,e)=>ee.readdirSync(i,e);/^v4\./.test(Cd)&&(zl=(i,e,t)=>ee.readdir(i,t));var bs=(i,e,t,s)=>{ee[vd](i,e,t,Ld(i,e,t,n=>{s(n&&n.code!=="ENOENT"?n:null)}))},Wl=(i,e,t,s,n)=>{if(typeof e=="string")return ee.lstat(rt.resolve(i,e),(r,o)=>{if(r)return n(r.code!=="ENOENT"?r:null);o.name=e,Wl(i,o,t,s,n)});if(e.isDirectory())Tr(rt.resolve(i,e.name),t,s,r=>{if(r)return n(r);let o=rt.resolve(i,e.name);bs(o,t,s,n)});else{let r=rt.resolve(i,e.name);bs(r,t,s,n)}},Tr=(i,e,t,s)=>{zl(i,{withFileTypes:!0},(n,r)=>{if(n){if(n.code==="ENOENT")return s();if(n.code!=="ENOTDIR"&&n.code!=="ENOTSUP")return s(n)}if(n||!r.length)return bs(i,e,t,s);let o=r.length,a=null,h=l=>{if(!a){if(l)return s(a=l);if(--o===0)return bs(i,e,t,s)}};r.forEach(l=>Wl(i,l,e,t,h))})},Md=(i,e,t,s)=>{if(typeof e=="string")try{let n=ee.lstatSync(rt.resolve(i,e));n.name=e,e=n}catch(n){if(n.code==="ENOENT")return;throw n}e.isDirectory()&&jl(rt.resolve(i,e.name),t,s),Rr(rt.resolve(i,e.name),t,s)},jl=(i,e,t)=>{let s;try{s=Fd(i,{withFileTypes:!0})}catch(n){if(n.code==="ENOENT")return;if(n.code==="ENOTDIR"||n.code==="ENOTSUP")return Rr(i,e,t);throw n}return s&&s.length&&s.forEach(n=>Md(i,n,e,t)),Rr(i,e,t)};Kl.exports=Tr;Tr.sync=jl});var Jl=f((uy,Ir)=>{"use strict";var Xl=Gl(),te=require("fs"),Rs=require("path"),Vl=Yl(),ne=pt(),Ts=class extends Error{constructor(e,t){super("Cannot extract through symbolic link"),this.path=t,this.symlink=e}get name(){return"SylinkError"}},Is=class extends Error{constructor(e,t){super(t+": Cannot cd into '"+e+"'"),this.path=e,this.code=t}get name(){return"CwdError"}},xs=(i,e)=>i.get(ne(e)),oi=(i,e,t)=>i.set(ne(e),t),Bd=(i,e)=>{te.stat(i,(t,s)=>{(t||!s.isDirectory())&&(t=new Is(i,t&&t.code||"ENOTDIR")),e(t)})};Ir.exports=(i,e,t)=>{i=ne(i);let s=e.umask,n=e.mode|448,r=(n&s)!==0,o=e.uid,a=e.gid,h=typeof o=="number"&&typeof a=="number"&&(o!==e.processUid||a!==e.processGid),l=e.preserve,c=e.unlink,u=e.cache,d=ne(e.cwd),m=(b,T)=>{b?t(b):(oi(u,i,!0),T&&h?Vl(T,o,a,Ke=>m(Ke)):r?te.chmod(i,n,t):t())};if(u&&xs(u,i)===!0)return m();if(i===d)return Bd(i,m);if(l)return Xl(i,{mode:n}).then(b=>m(null,b),m);let E=ne(Rs.relative(d,i)).split("/");_s(d,E,n,u,c,d,null,m)};var _s=(i,e,t,s,n,r,o,a)=>{if(!e.length)return a(null,o);let h=e.shift(),l=ne(Rs.resolve(i+"/"+h));if(xs(s,l))return _s(l,e,t,s,n,r,o,a);te.mkdir(l,t,Zl(l,e,t,s,n,r,o,a))},Zl=(i,e,t,s,n,r,o,a)=>h=>{h?te.lstat(i,(l,c)=>{if(l)l.path=l.path&&ne(l.path),a(l);else if(c.isDirectory())_s(i,e,t,s,n,r,o,a);else if(n)te.unlink(i,u=>{if(u)return a(u);te.mkdir(i,t,Zl(i,e,t,s,n,r,o,a))});else{if(c.isSymbolicLink())return a(new Ts(i,i+"/"+e.join("/")));a(h)}}):(o=o||i,_s(i,e,t,s,n,r,o,a))},kd=i=>{let e=!1,t="ENOTDIR";try{e=te.statSync(i).isDirectory()}catch(s){t=s.code}finally{if(!e)throw new Is(i,t)}};Ir.exports.sync=(i,e)=>{i=ne(i);let t=e.umask,s=e.mode|448,n=(s&t)!==0,r=e.uid,o=e.gid,a=typeof r=="number"&&typeof o=="number"&&(r!==e.processUid||o!==e.processGid),h=e.preserve,l=e.unlink,c=e.cache,u=ne(e.cwd),d=b=>{oi(c,i,!0),b&&a&&Vl.sync(b,r,o),n&&te.chmodSync(i,s)};if(c&&xs(c,i)===!0)return d();if(i===u)return kd(u),d();if(h)return d(Xl.sync(i,s));let p=ne(Rs.relative(u,i)).split("/"),E=null;for(let b=p.shift(),T=u;b&&(T+="/"+b);b=p.shift())if(T=ne(Rs.resolve(T)),!xs(c,T))try{te.mkdirSync(T,s),E=E||T,oi(c,T,!0)}catch{let wi=te.lstatSync(T);if(wi.isDirectory()){oi(c,T,!0);continue}else if(l){te.unlinkSync(T),te.mkdirSync(T,s),E=E||T,oi(c,T,!0);continue}else if(wi.isSymbolicLink())return new Ts(T,T+"/"+p.join("/"))}return d(E)}});var _r=f((fy,Ql)=>{var xr=Object.create(null),{hasOwnProperty:Ud}=Object.prototype;Ql.exports=i=>(Ud.call(xr,i)||(xr[i]=i.normalize("NFD")),xr[i])});var sh=f((dy,ih)=>{var eh=require("assert"),qd=_r(),Gd=St(),{join:th}=require("path"),Hd=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,$d=Hd==="win32";ih.exports=()=>{let i=new Map,e=new Map,t=l=>l.split("/").slice(0,-1).reduce((u,d)=>(u.length&&(d=th(u[u.length-1],d)),u.push(d||"/"),u),[]),s=new Set,n=l=>{let c=e.get(l);if(!c)throw new Error("function does not have any path reservations");return{paths:c.paths.map(u=>i.get(u)),dirs:[...c.dirs].map(u=>i.get(u))}},r=l=>{let{paths:c,dirs:u}=n(l);return c.every(d=>d[0]===l)&&u.every(d=>d[0]instanceof Set&&d[0].has(l))},o=l=>s.has(l)||!r(l)?!1:(s.add(l),l(()=>a(l)),!0),a=l=>{if(!s.has(l))return!1;let{paths:c,dirs:u}=e.get(l),d=new Set;return c.forEach(m=>{let p=i.get(m);eh.equal(p[0],l),p.length===1?i.delete(m):(p.shift(),typeof p[0]=="function"?d.add(p[0]):p[0].forEach(E=>d.add(E)))}),u.forEach(m=>{let p=i.get(m);eh(p[0]instanceof Set),p[0].size===1&&p.length===1?i.delete(m):p[0].size===1?(p.shift(),d.add(p[0])):p[0].delete(l)}),s.delete(l),d.forEach(m=>o(m)),!0};return{check:r,reserve:(l,c)=>{l=$d?["win32 parallelization disabled"]:l.map(d=>Gd(th(qd(d))).toLowerCase());let u=new Set(l.map(d=>t(d)).reduce((d,m)=>d.concat(m)));return e.set(c,{dirs:u,paths:l}),l.forEach(d=>{let m=i.get(d);m?m.push(c):i.set(d,[c])}),u.forEach(d=>{let m=i.get(d);m?m[m.length-1]instanceof Set?m[m.length-1].add(c):m.push(new Set([c])):i.set(d,[new Set([c])])}),o(c)}}}});var oh=f((my,rh)=>{var zd=process.env.__FAKE_PLATFORM__||process.platform,Wd=zd==="win32",jd=global.__FAKE_TESTING_FS__||require("fs"),{O_CREAT:Kd,O_TRUNC:Yd,O_WRONLY:Xd,UV_FS_O_FILEMAP:nh=0}=jd.constants,Vd=Wd&&!!nh,Zd=512*1024,Jd=nh|Yd|Kd|Xd;rh.exports=Vd?i=>i<Zd?Jd:"w":()=>"w"});var Fr=f((py,Eh)=>{"use strict";var Qd=require("assert"),em=Ss(),w=require("fs"),tm=Pt(),ve=require("path"),yh=Jl(),ah=Dn(),im=sh(),sm=vn(),Z=pt(),nm=St(),rm=_r(),lh=Symbol("onEntry"),Dr=Symbol("checkFs"),hh=Symbol("checkFs2"),Ds=Symbol("pruneCache"),vr=Symbol("isReusable"),ie=Symbol("makeFs"),Ar=Symbol("file"),Nr=Symbol("directory"),vs=Symbol("link"),ch=Symbol("symlink"),uh=Symbol("hardlink"),fh=Symbol("unsupported"),dh=Symbol("checkPath"),We=Symbol("mkdir"),H=Symbol("onError"),Os=Symbol("pending"),mh=Symbol("pend"),Lt=Symbol("unpend"),Or=Symbol("ended"),Pr=Symbol("maybeClose"),Lr=Symbol("skip"),ai=Symbol("doChown"),li=Symbol("uid"),hi=Symbol("gid"),ci=Symbol("checkedCwd"),Sh=require("crypto"),wh=oh(),om=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,ui=om==="win32",am=(i,e)=>{if(!ui)return w.unlink(i,e);let t=i+".DELETE."+Sh.randomBytes(16).toString("hex");w.rename(i,t,s=>{if(s)return e(s);w.unlink(t,e)})},lm=i=>{if(!ui)return w.unlinkSync(i);let e=i+".DELETE."+Sh.randomBytes(16).toString("hex");w.renameSync(i,e),w.unlinkSync(e)},ph=(i,e,t)=>i===i>>>0?i:e===e>>>0?e:t,gh=i=>nm(Z(rm(i))).toLowerCase(),hm=(i,e)=>{e=gh(e);for(let t of i.keys()){let s=gh(t);(s===e||s.indexOf(e+"/")===0)&&i.delete(t)}},cm=i=>{for(let e of i.keys())i.delete(e)},fi=class extends em{constructor(e){if(e||(e={}),e.ondone=t=>{this[Or]=!0,this[Pr]()},super(e),this[ci]=!1,this.reservations=im(),this.transform=typeof e.transform=="function"?e.transform:null,this.writable=!0,this.readable=!1,this[Os]=0,this[Or]=!1,this.dirCache=e.dirCache||new Map,typeof e.uid=="number"||typeof e.gid=="number"){if(typeof e.uid!="number"||typeof e.gid!="number")throw new TypeError("cannot set owner without number uid and gid");if(e.preserveOwner)throw new TypeError("cannot preserve owner in archive and also set owner explicitly");this.uid=e.uid,this.gid=e.gid,this.setOwner=!0}else this.uid=null,this.gid=null,this.setOwner=!1;e.preserveOwner===void 0&&typeof e.uid!="number"?this.preserveOwner=process.getuid&&process.getuid()===0:this.preserveOwner=!!e.preserveOwner,this.processUid=(this.preserveOwner||this.setOwner)&&process.getuid?process.getuid():null,this.processGid=(this.preserveOwner||this.setOwner)&&process.getgid?process.getgid():null,this.forceChown=e.forceChown===!0,this.win32=!!e.win32||ui,this.newer=!!e.newer,this.keep=!!e.keep,this.noMtime=!!e.noMtime,this.preservePaths=!!e.preservePaths,this.unlink=!!e.unlink,this.cwd=Z(ve.resolve(e.cwd||process.cwd())),this.strip=+e.strip||0,this.processUmask=e.noChmod?0:process.umask(),this.umask=typeof e.umask=="number"?e.umask:this.processUmask,this.dmode=e.dmode||511&~this.umask,this.fmode=e.fmode||438&~this.umask,this.on("entry",t=>this[lh](t))}warn(e,t,s={}){return(e==="TAR_BAD_ARCHIVE"||e==="TAR_ABORT")&&(s.recoverable=!1),super.warn(e,t,s)}[Pr](){this[Or]&&this[Os]===0&&(this.emit("prefinish"),this.emit("finish"),this.emit("end"))}[dh](e){if(this.strip){let t=Z(e.path).split("/");if(t.length<this.strip)return!1;if(e.path=t.slice(this.strip).join("/"),e.type==="Link"){let s=Z(e.linkpath).split("/");if(s.length>=this.strip)e.linkpath=s.slice(this.strip).join("/");else return!1}}if(!this.preservePaths){let t=Z(e.path),s=t.split("/");if(s.includes("..")||ui&&/^[a-z]:\.\.$/i.test(s[0]))return this.warn("TAR_ENTRY_ERROR","path contains '..'",{entry:e,path:t}),!1;let[n,r]=sm(t);n&&(e.path=r,this.warn("TAR_ENTRY_INFO",`stripping ${n} from absolute path`,{entry:e,path:t}))}if(ve.isAbsolute(e.path)?e.absolute=Z(ve.resolve(e.path)):e.absolute=Z(ve.resolve(this.cwd,e.path)),!this.preservePaths&&e.absolute.indexOf(this.cwd+"/")!==0&&e.absolute!==this.cwd)return this.warn("TAR_ENTRY_ERROR","path escaped extraction target",{entry:e,path:Z(e.path),resolvedPath:e.absolute,cwd:this.cwd}),!1;if(e.absolute===this.cwd&&e.type!=="Directory"&&e.type!=="GNUDumpDir")return!1;if(this.win32){let{root:t}=ve.win32.parse(e.absolute);e.absolute=t+ah.encode(e.absolute.slice(t.length));let{root:s}=ve.win32.parse(e.path);e.path=s+ah.encode(e.path.slice(s.length))}return!0}[lh](e){if(!this[dh](e))return e.resume();switch(Qd.equal(typeof e.absolute,"string"),e.type){case"Directory":case"GNUDumpDir":e.mode&&(e.mode=e.mode|448);case"File":case"OldFile":case"ContiguousFile":case"Link":case"SymbolicLink":return this[Dr](e);case"CharacterDevice":case"BlockDevice":case"FIFO":default:return this[fh](e)}}[H](e,t){e.name==="CwdError"?this.emit("error",e):(this.warn("TAR_ENTRY_ERROR",e,{entry:t}),this[Lt](),t.resume())}[We](e,t,s){yh(Z(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:t,noChmod:this.noChmod},s)}[ai](e){return this.forceChown||this.preserveOwner&&(typeof e.uid=="number"&&e.uid!==this.processUid||typeof e.gid=="number"&&e.gid!==this.processGid)||typeof this.uid=="number"&&this.uid!==this.processUid||typeof this.gid=="number"&&this.gid!==this.processGid}[li](e){return ph(this.uid,e.uid,this.processUid)}[hi](e){return ph(this.gid,e.gid,this.processGid)}[Ar](e,t){let s=e.mode&4095||this.fmode,n=new tm.WriteStream(e.absolute,{flags:wh(e.size),mode:s,autoClose:!1});n.on("error",h=>{n.fd&&w.close(n.fd,()=>{}),n.write=()=>!0,this[H](h,e),t()});let r=1,o=h=>{if(h){n.fd&&w.close(n.fd,()=>{}),this[H](h,e),t();return}--r===0&&w.close(n.fd,l=>{l?this[H](l,e):this[Lt](),t()})};n.on("finish",h=>{let l=e.absolute,c=n.fd;if(e.mtime&&!this.noMtime){r++;let u=e.atime||new Date,d=e.mtime;w.futimes(c,u,d,m=>m?w.utimes(l,u,d,p=>o(p&&m)):o())}if(this[ai](e)){r++;let u=this[li](e),d=this[hi](e);w.fchown(c,u,d,m=>m?w.chown(l,u,d,p=>o(p&&m)):o())}o()});let a=this.transform&&this.transform(e)||e;a!==e&&(a.on("error",h=>{this[H](h,e),t()}),e.pipe(a)),a.pipe(n)}[Nr](e,t){let s=e.mode&4095||this.dmode;this[We](e.absolute,s,n=>{if(n){this[H](n,e),t();return}let r=1,o=a=>{--r===0&&(t(),this[Lt](),e.resume())};e.mtime&&!this.noMtime&&(r++,w.utimes(e.absolute,e.atime||new Date,e.mtime,o)),this[ai](e)&&(r++,w.chown(e.absolute,this[li](e),this[hi](e),o)),o()})}[fh](e){e.unsupported=!0,this.warn("TAR_ENTRY_UNSUPPORTED",`unsupported entry type: ${e.type}`,{entry:e}),e.resume()}[ch](e,t){this[vs](e,e.linkpath,"symlink",t)}[uh](e,t){let s=Z(ve.resolve(this.cwd,e.linkpath));this[vs](e,s,"link",t)}[mh](){this[Os]++}[Lt](){this[Os]--,this[Pr]()}[Lr](e){this[Lt](),e.resume()}[vr](e,t){return e.type==="File"&&!this.unlink&&t.isFile()&&t.nlink<=1&&!ui}[Dr](e){this[mh]();let t=[e.path];e.linkpath&&t.push(e.linkpath),this.reservations.reserve(t,s=>this[hh](e,s))}[Ds](e){e.type==="SymbolicLink"?cm(this.dirCache):e.type!=="Directory"&&hm(this.dirCache,e.absolute)}[hh](e,t){this[Ds](e);let s=a=>{this[Ds](e),t(a)},n=()=>{this[We](this.cwd,this.dmode,a=>{if(a){this[H](a,e),s();return}this[ci]=!0,r()})},r=()=>{if(e.absolute!==this.cwd){let a=Z(ve.dirname(e.absolute));if(a!==this.cwd)return this[We](a,this.dmode,h=>{if(h){this[H](h,e),s();return}o()})}o()},o=()=>{w.lstat(e.absolute,(a,h)=>{if(h&&(this.keep||this.newer&&h.mtime>e.mtime)){this[Lr](e),s();return}if(a||this[vr](e,h))return this[ie](null,e,s);if(h.isDirectory()){if(e.type==="Directory"){let l=!this.noChmod&&e.mode&&(h.mode&4095)!==e.mode,c=u=>this[ie](u,e,s);return l?w.chmod(e.absolute,e.mode,c):c()}if(e.absolute!==this.cwd)return w.rmdir(e.absolute,l=>this[ie](l,e,s))}if(e.absolute===this.cwd)return this[ie](null,e,s);am(e.absolute,l=>this[ie](l,e,s))})};this[ci]?r():n()}[ie](e,t,s){if(e){this[H](e,t),s();return}switch(t.type){case"File":case"OldFile":case"ContiguousFile":return this[Ar](t,s);case"Link":return this[uh](t,s);case"SymbolicLink":return this[ch](t,s);case"Directory":case"GNUDumpDir":return this[Nr](t,s)}}[vs](e,t,s,n){w[s](t,e.absolute,r=>{r?this[H](r,e):(this[Lt](),e.resume()),n()})}},Ps=i=>{try{return[null,i()]}catch(e){return[e,null]}},Cr=class extends fi{[ie](e,t){return super[ie](e,t,()=>{})}[Dr](e){if(this[Ds](e),!this[ci]){let r=this[We](this.cwd,this.dmode);if(r)return this[H](r,e);this[ci]=!0}if(e.absolute!==this.cwd){let r=Z(ve.dirname(e.absolute));if(r!==this.cwd){let o=this[We](r,this.dmode);if(o)return this[H](o,e)}}let[t,s]=Ps(()=>w.lstatSync(e.absolute));if(s&&(this.keep||this.newer&&s.mtime>e.mtime))return this[Lr](e);if(t||this[vr](e,s))return this[ie](null,e);if(s.isDirectory()){if(e.type==="Directory"){let o=!this.noChmod&&e.mode&&(s.mode&4095)!==e.mode,[a]=o?Ps(()=>{w.chmodSync(e.absolute,e.mode)}):[];return this[ie](a,e)}let[r]=Ps(()=>w.rmdirSync(e.absolute));this[ie](r,e)}let[n]=e.absolute===this.cwd?[]:Ps(()=>lm(e.absolute));this[ie](n,e)}[Ar](e,t){let s=e.mode&4095||this.fmode,n=a=>{let h;try{w.closeSync(r)}catch(l){h=l}(a||h)&&this[H](a||h,e),t()},r;try{r=w.openSync(e.absolute,wh(e.size),s)}catch(a){return n(a)}let o=this.transform&&this.transform(e)||e;o!==e&&(o.on("error",a=>this[H](a,e)),e.pipe(o)),o.on("data",a=>{try{w.writeSync(r,a,0,a.length)}catch(h){n(h)}}),o.on("end",a=>{let h=null;if(e.mtime&&!this.noMtime){let l=e.atime||new Date,c=e.mtime;try{w.futimesSync(r,l,c)}catch(u){try{w.utimesSync(e.absolute,l,c)}catch{h=u}}}if(this[ai](e)){let l=this[li](e),c=this[hi](e);try{w.fchownSync(r,l,c)}catch(u){try{w.chownSync(e.absolute,l,c)}catch{h=h||u}}}n(h)})}[Nr](e,t){let s=e.mode&4095||this.dmode,n=this[We](e.absolute,s);if(n){this[H](n,e),t();return}if(e.mtime&&!this.noMtime)try{w.utimesSync(e.absolute,e.atime||new Date,e.mtime)}catch{}if(this[ai](e))try{w.chownSync(e.absolute,this[li](e),this[hi](e))}catch{}t(),e.resume()}[We](e,t){try{return yh.sync(Z(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:t})}catch(s){return s}}[vs](e,t,s,n){try{w[s+"Sync"](t,e.absolute),n(),e.resume()}catch(r){return this[H](r,e)}}};fi.Sync=Cr;Eh.exports=fi});var xh=f((gy,Ih)=>{"use strict";var um=ct(),As=Fr(),Rh=require("fs"),Th=Pt(),bh=require("path"),Mr=St();Ih.exports=(i,e,t)=>{typeof i=="function"?(t=i,e=null,i={}):Array.isArray(i)&&(e=i,i={}),typeof e=="function"&&(t=e,e=null),e?e=Array.from(e):e=[];let s=um(i);if(s.sync&&typeof t=="function")throw new TypeError("callback not supported for sync tar functions");if(!s.file&&typeof t=="function")throw new TypeError("callback only supported with file option");return e.length&&fm(s,e),s.file&&s.sync?dm(s):s.file?mm(s,t):s.sync?pm(s):gm(s)};var fm=(i,e)=>{let t=new Map(e.map(r=>[Mr(r),!0])),s=i.filter,n=(r,o)=>{let a=o||bh.parse(r).root||".",h=r===a?!1:t.has(r)?t.get(r):n(bh.dirname(r),a);return t.set(r,h),h};i.filter=s?(r,o)=>s(r,o)&&n(Mr(r)):r=>n(Mr(r))},dm=i=>{let e=new As.Sync(i),t=i.file,s=Rh.statSync(t),n=i.maxReadSize||16*1024*1024;new Th.ReadStreamSync(t,{readSize:n,size:s.size}).pipe(e)},mm=(i,e)=>{let t=new As(i),s=i.maxReadSize||16*1024*1024,n=i.file,r=new Promise((o,a)=>{t.on("error",a),t.on("close",o),Rh.stat(n,(h,l)=>{if(h)a(h);else{let c=new Th.ReadStream(n,{readSize:s,size:l.size});c.on("error",a),c.pipe(t)}})});return e?r.then(e,e):r},pm=i=>new As.Sync(i),gm=i=>new As(i)});var _h=f(D=>{"use strict";D.c=D.create=al();D.r=D.replace=yr();D.t=D.list=ws();D.u=D.update=gl();D.x=D.extract=xh();D.Pack=Qi();D.Unpack=Fr();D.Parse=Ss();D.ReadEntry=Mi();D.WriteEntry=qn();D.Header=yt();D.Pax=ki();D.types=Rn()});var Ah=f((Sy,vh)=>{vh.exports=Dh;Dh.sync=Sm;var Oh=require("fs");function ym(i,e){var t=e.pathExt!==void 0?e.pathExt:process.env.PATHEXT;if(!t||(t=t.split(";"),t.indexOf("")!==-1))return!0;for(var s=0;s<t.length;s++){var n=t[s].toLowerCase();if(n&&i.substr(-n.length).toLowerCase()===n)return!0}return!1}function Ph(i,e,t){return!i.isSymbolicLink()&&!i.isFile()?!1:ym(e,t)}function Dh(i,e,t){Oh.stat(i,function(s,n){t(s,s?!1:Ph(n,i,e))})}function Sm(i,e){return Ph(Oh.statSync(i),i,e)}});var Mh=f((wy,Fh)=>{Fh.exports=Lh;Lh.sync=wm;var Nh=require("fs");function Lh(i,e,t){Nh.stat(i,function(s,n){t(s,s?!1:Ch(n,e))})}function wm(i,e){return Ch(Nh.statSync(i),e)}function Ch(i,e){return i.isFile()&&Em(i,e)}function Em(i,e){var t=i.mode,s=i.uid,n=i.gid,r=e.uid!==void 0?e.uid:process.getuid&&process.getuid(),o=e.gid!==void 0?e.gid:process.getgid&&process.getgid(),a=parseInt("100",8),h=parseInt("010",8),l=parseInt("001",8),c=a|h,u=t&l||t&h&&n===o||t&a&&s===r||t&c&&r===0;return u}});var kh=f((by,Bh)=>{var Ey=require("fs"),Ns;process.platform==="win32"||global.TESTING_WINDOWS?Ns=Ah():Ns=Mh();Bh.exports=Br;Br.sync=bm;function Br(i,e,t){if(typeof e=="function"&&(t=e,e={}),!t){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(s,n){Br(i,e||{},function(r,o){r?n(r):s(o)})})}Ns(i,e||{},function(s,n){s&&(s.code==="EACCES"||e&&e.ignoreErrors)&&(s=null,n=!1),t(s,n)})}function bm(i,e){try{return Ns.sync(i,e||{})}catch(t){if(e&&e.ignoreErrors||t.code==="EACCES")return!1;throw t}}});var Wh=f((Ry,zh)=>{var Ct=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",Uh=require("path"),Rm=Ct?";":":",qh=kh(),Gh=i=>Object.assign(new Error(`not found: ${i}`),{code:"ENOENT"}),Hh=(i,e)=>{let t=e.colon||Rm,s=i.match(/\//)||Ct&&i.match(/\\/)?[""]:[...Ct?[process.cwd()]:[],...(e.path||process.env.PATH||"").split(t)],n=Ct?e.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",r=Ct?n.split(t):[""];return Ct&&i.indexOf(".")!==-1&&r[0]!==""&&r.unshift(""),{pathEnv:s,pathExt:r,pathExtExe:n}},$h=(i,e,t)=>{typeof e=="function"&&(t=e,e={}),e||(e={});let{pathEnv:s,pathExt:n,pathExtExe:r}=Hh(i,e),o=[],a=l=>new Promise((c,u)=>{if(l===s.length)return e.all&&o.length?c(o):u(Gh(i));let d=s[l],m=/^".*"$/.test(d)?d.slice(1,-1):d,p=Uh.join(m,i),E=!m&&/^\.[\\\/]/.test(i)?i.slice(0,2)+p:p;c(h(E,l,0))}),h=(l,c,u)=>new Promise((d,m)=>{if(u===n.length)return d(a(c+1));let p=n[u];qh(l+p,{pathExt:r},(E,b)=>{if(!E&&b)if(e.all)o.push(l+p);else return d(l+p);return d(h(l,c,u+1))})});return t?a(0).then(l=>t(null,l),t):a(0)},Tm=(i,e)=>{e=e||{};let{pathEnv:t,pathExt:s,pathExtExe:n}=Hh(i,e),r=[];for(let o=0;o<t.length;o++){let a=t[o],h=/^".*"$/.test(a)?a.slice(1,-1):a,l=Uh.join(h,i),c=!h&&/^\.[\\\/]/.test(i)?i.slice(0,2)+l:l;for(let u=0;u<s.length;u++){let d=c+s[u];try{if(qh.sync(d,{pathExt:n}))if(e.all)r.push(d);else return d}catch{}}}if(e.all&&r.length)return r;if(e.nothrow)return null;throw Gh(i)};zh.exports=$h;$h.sync=Tm});var Ur=f((Ty,kr)=>{"use strict";var jh=(i={})=>{let e=i.env||process.env;return(i.platform||process.platform)!=="win32"?"PATH":Object.keys(e).reverse().find(s=>s.toUpperCase()==="PATH")||"Path"};kr.exports=jh;kr.exports.default=jh});var Vh=f((Iy,Xh)=>{"use strict";var Kh=require("path"),Im=Wh(),xm=Ur();function Yh(i,e){let t=i.options.env||process.env,s=process.cwd(),n=i.options.cwd!=null,r=n&&process.chdir!==void 0&&!process.chdir.disabled;if(r)try{process.chdir(i.options.cwd)}catch{}let o;try{o=Im.sync(i.command,{path:t[xm({env:t})],pathExt:e?Kh.delimiter:void 0})}catch{}finally{r&&process.chdir(s)}return o&&(o=Kh.resolve(n?i.options.cwd:"",o)),o}function _m(i){return Yh(i)||Yh(i,!0)}Xh.exports=_m});var Zh=f((xy,Gr)=>{"use strict";var qr=/([()\][%!^"`<>&|;, *?])/g;function Om(i){return i=i.replace(qr,"^$1"),i}function Pm(i,e){return i=`${i}`,i=i.replace(/(\\*)"/g,'$1$1\\"'),i=i.replace(/(\\*)$/,"$1$1"),i=`"${i}"`,i=i.replace(qr,"^$1"),e&&(i=i.replace(qr,"^$1")),i}Gr.exports.command=Om;Gr.exports.argument=Pm});var Qh=f((_y,Jh)=>{"use strict";Jh.exports=/^#!(.*)/});var tc=f((Oy,ec)=>{"use strict";var Dm=Qh();ec.exports=(i="")=>{let e=i.match(Dm);if(!e)return null;let[t,s]=e[0].replace(/#! ?/,"").split(" "),n=t.split("/").pop();return n==="env"?s:s?`${n} ${s}`:n}});var sc=f((Py,ic)=>{"use strict";var Hr=require("fs"),vm=tc();function Am(i){let t=Buffer.alloc(150),s;try{s=Hr.openSync(i,"r"),Hr.readSync(s,t,0,150,0),Hr.closeSync(s)}catch{}return vm(t.toString())}ic.exports=Am});var ac=f((Dy,oc)=>{"use strict";var Nm=require("path"),nc=Vh(),rc=Zh(),Lm=sc(),Cm=process.platform==="win32",Fm=/\.(?:com|exe)$/i,Mm=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function Bm(i){i.file=nc(i);let e=i.file&&Lm(i.file);return e?(i.args.unshift(i.file),i.command=e,nc(i)):i.file}function km(i){if(!Cm)return i;let e=Bm(i),t=!Fm.test(e);if(i.options.forceShell||t){let s=Mm.test(e);i.command=Nm.normalize(i.command),i.command=rc.command(i.command),i.args=i.args.map(r=>rc.argument(r,s));let n=[i.command].concat(i.args).join(" ");i.args=["/d","/s","/c",`"${n}"`],i.command=process.env.comspec||"cmd.exe",i.options.windowsVerbatimArguments=!0}return i}function Um(i,e,t){e&&!Array.isArray(e)&&(t=e,e=null),e=e?e.slice(0):[],t=Object.assign({},t);let s={command:i,args:e,options:t,file:void 0,original:{command:i,args:e}};return t.shell?s:km(s)}oc.exports=Um});var cc=f((vy,hc)=>{"use strict";var $r=process.platform==="win32";function zr(i,e){return Object.assign(new Error(`${e} ${i.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${e} ${i.command}`,path:i.command,spawnargs:i.args})}function qm(i,e){if(!$r)return;let t=i.emit;i.emit=function(s,n){if(s==="exit"){let r=lc(n,e,"spawn");if(r)return t.call(i,"error",r)}return t.apply(i,arguments)}}function lc(i,e){return $r&&i===1&&!e.file?zr(e.original,"spawn"):null}function Gm(i,e){return $r&&i===1&&!e.file?zr(e.original,"spawnSync"):null}hc.exports={hookChildProcess:qm,verifyENOENT:lc,verifyENOENTSync:Gm,notFoundError:zr}});var dc=f((Ay,Ft)=>{"use strict";var uc=require("child_process"),Wr=ac(),jr=cc();function fc(i,e,t){let s=Wr(i,e,t),n=uc.spawn(s.command,s.args,s.options);return jr.hookChildProcess(n,s),n}function Hm(i,e,t){let s=Wr(i,e,t),n=uc.spawnSync(s.command,s.args,s.options);return n.error=n.error||jr.verifyENOENTSync(n.status,s),n}Ft.exports=fc;Ft.exports.spawn=fc;Ft.exports.sync=Hm;Ft.exports._parse=Wr;Ft.exports._enoent=jr});var pc=f((Ny,mc)=>{"use strict";mc.exports=i=>{let e=typeof i=="string"?`
`:`
`.charCodeAt(),t=typeof i=="string"?"\r":"\r".charCodeAt();return i[i.length-1]===e&&(i=i.slice(0,i.length-1)),i[i.length-1]===t&&(i=i.slice(0,i.length-1)),i}});var Sc=f((Ly,mi)=>{"use strict";var di=require("path"),gc=Ur(),yc=i=>{i={cwd:process.cwd(),path:process.env[gc()],execPath:process.execPath,...i};let e,t=di.resolve(i.cwd),s=[];for(;e!==t;)s.push(di.join(t,"node_modules/.bin")),e=t,t=di.resolve(t,"..");let n=di.resolve(i.cwd,i.execPath,"..");return s.push(n),s.concat(i.path).join(di.delimiter)};mi.exports=yc;mi.exports.default=yc;mi.exports.env=i=>{i={env:process.env,...i};let e={...i.env},t=gc({env:e});return i.path=e[t],e[t]=mi.exports(i),e}});var Ec=f((Cy,Kr)=>{"use strict";var wc=(i,e)=>{for(let t of Reflect.ownKeys(e))Object.defineProperty(i,t,Object.getOwnPropertyDescriptor(e,t));return i};Kr.exports=wc;Kr.exports.default=wc});var Rc=f((Fy,Cs)=>{"use strict";var $m=Ec(),Ls=new WeakMap,bc=(i,e={})=>{if(typeof i!="function")throw new TypeError("Expected a function");let t,s=0,n=i.displayName||i.name||"<anonymous>",r=function(...o){if(Ls.set(r,++s),s===1)t=i.apply(this,o),i=null;else if(e.throw===!0)throw new Error(`Function \`${n}\` can only be called once`);return t};return $m(r,i),Ls.set(r,s),r};Cs.exports=bc;Cs.exports.default=bc;Cs.exports.callCount=i=>{if(!Ls.has(i))throw new Error(`The given function \`${i.name}\` is not wrapped by the \`onetime\` package`);return Ls.get(i)}});var Tc=f(Fs=>{"use strict";Object.defineProperty(Fs,"__esModule",{value:!0});Fs.SIGNALS=void 0;var zm=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}];Fs.SIGNALS=zm});var Yr=f(Mt=>{"use strict";Object.defineProperty(Mt,"__esModule",{value:!0});Mt.SIGRTMAX=Mt.getRealtimeSignals=void 0;var Wm=function(){let i=xc-Ic+1;return Array.from({length:i},jm)};Mt.getRealtimeSignals=Wm;var jm=function(i,e){return{name:`SIGRT${e+1}`,number:Ic+e,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}},Ic=34,xc=64;Mt.SIGRTMAX=xc});var _c=f(Ms=>{"use strict";Object.defineProperty(Ms,"__esModule",{value:!0});Ms.getSignals=void 0;var Km=require("os"),Ym=Tc(),Xm=Yr(),Vm=function(){let i=(0,Xm.getRealtimeSignals)();return[...Ym.SIGNALS,...i].map(Zm)};Ms.getSignals=Vm;var Zm=function({name:i,number:e,description:t,action:s,forced:n=!1,standard:r}){let{signals:{[i]:o}}=Km.constants,a=o!==void 0;return{name:i,number:a?o:e,description:t,supported:a,action:s,forced:n,standard:r}}});var Pc=f(Bt=>{"use strict";Object.defineProperty(Bt,"__esModule",{value:!0});Bt.signalsByNumber=Bt.signalsByName=void 0;var Jm=require("os"),Oc=_c(),Qm=Yr(),ep=function(){return(0,Oc.getSignals)().reduce(tp,{})},tp=function(i,{name:e,number:t,description:s,supported:n,action:r,forced:o,standard:a}){return{...i,[e]:{name:e,number:t,description:s,supported:n,action:r,forced:o,standard:a}}},ip=ep();Bt.signalsByName=ip;var sp=function(){let i=(0,Oc.getSignals)(),e=Qm.SIGRTMAX+1,t=Array.from({length:e},(s,n)=>np(n,i));return Object.assign({},...t)},np=function(i,e){let t=rp(i,e);if(t===void 0)return{};let{name:s,description:n,supported:r,action:o,forced:a,standard:h}=t;return{[i]:{name:s,number:i,description:n,supported:r,action:o,forced:a,standard:h}}},rp=function(i,e){let t=e.find(({name:s})=>Jm.constants.signals[s]===i);return t!==void 0?t:e.find(s=>s.number===i)},op=sp();Bt.signalsByNumber=op});var vc=f((qy,Dc)=>{"use strict";var{signalsByName:ap}=Pc(),lp=({timedOut:i,timeout:e,errorCode:t,signal:s,signalDescription:n,exitCode:r,isCanceled:o})=>i?`timed out after ${e} milliseconds`:o?"was canceled":t!==void 0?`failed with ${t}`:s!==void 0?`was killed with ${s} (${n})`:r!==void 0?`failed with exit code ${r}`:"failed",hp=({stdout:i,stderr:e,all:t,error:s,signal:n,exitCode:r,command:o,escapedCommand:a,timedOut:h,isCanceled:l,killed:c,parsed:{options:{timeout:u}}})=>{r=r===null?void 0:r,n=n===null?void 0:n;let d=n===void 0?void 0:ap[n].description,m=s&&s.code,E=`Command ${lp({timedOut:h,timeout:u,errorCode:m,signal:n,signalDescription:d,exitCode:r,isCanceled:l})}: ${o}`,b=Object.prototype.toString.call(s)==="[object Error]",T=b?`${E}
${s.message}`:E,Ke=[T,e,i].filter(Boolean).join(`
`);return b?(s.originalMessage=s.message,s.message=Ke):s=new Error(Ke),s.shortMessage=T,s.command=o,s.escapedCommand=a,s.exitCode=r,s.signal=n,s.signalDescription=d,s.stdout=i,s.stderr=e,t!==void 0&&(s.all=t),"bufferedData"in s&&delete s.bufferedData,s.failed=!0,s.timedOut=!!h,s.isCanceled=l,s.killed=c&&!h,s};Dc.exports=hp});var Nc=f((Gy,Xr)=>{"use strict";var Bs=["stdin","stdout","stderr"],cp=i=>Bs.some(e=>i[e]!==void 0),Ac=i=>{if(!i)return;let{stdio:e}=i;if(e===void 0)return Bs.map(s=>i[s]);if(cp(i))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${Bs.map(s=>`\`${s}\``).join(", ")}`);if(typeof e=="string")return e;if(!Array.isArray(e))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof e}\``);let t=Math.max(e.length,Bs.length);return Array.from({length:t},(s,n)=>e[n])};Xr.exports=Ac;Xr.exports.node=i=>{let e=Ac(i);return e==="ipc"?"ipc":e===void 0||typeof e=="string"?[e,e,e,"ipc"]:e.includes("ipc")?e:[...e,"ipc"]}});var Lc=f((Hy,ks)=>{ks.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"];process.platform!=="win32"&&ks.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&ks.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")});var kc=f(($y,qt)=>{var _=global.process,ot=function(i){return i&&typeof i=="object"&&typeof i.removeListener=="function"&&typeof i.emit=="function"&&typeof i.reallyExit=="function"&&typeof i.listeners=="function"&&typeof i.kill=="function"&&typeof i.pid=="number"&&typeof i.on=="function"};ot(_)?(Cc=require("assert"),kt=Lc(),Fc=/^win/i.test(_.platform),pi=require("events"),typeof pi!="function"&&(pi=pi.EventEmitter),_.__signal_exit_emitter__?F=_.__signal_exit_emitter__:(F=_.__signal_exit_emitter__=new pi,F.count=0,F.emitted={}),F.infinite||(F.setMaxListeners(1/0),F.infinite=!0),qt.exports=function(i,e){if(!ot(global.process))return function(){};Cc.equal(typeof i,"function","a callback must be provided for exit handler"),Ut===!1&&Vr();var t="exit";e&&e.alwaysLast&&(t="afterexit");var s=function(){F.removeListener(t,i),F.listeners("exit").length===0&&F.listeners("afterexit").length===0&&Us()};return F.on(t,i),s},Us=function(){!Ut||!ot(global.process)||(Ut=!1,kt.forEach(function(e){try{_.removeListener(e,qs[e])}catch{}}),_.emit=Gs,_.reallyExit=Zr,F.count-=1)},qt.exports.unload=Us,at=function(e,t,s){F.emitted[e]||(F.emitted[e]=!0,F.emit(e,t,s))},qs={},kt.forEach(function(i){qs[i]=function(){if(ot(global.process)){var t=_.listeners(i);t.length===F.count&&(Us(),at("exit",null,i),at("afterexit",null,i),Fc&&i==="SIGHUP"&&(i="SIGINT"),_.kill(_.pid,i))}}}),qt.exports.signals=function(){return kt},Ut=!1,Vr=function(){Ut||!ot(global.process)||(Ut=!0,F.count+=1,kt=kt.filter(function(e){try{return _.on(e,qs[e]),!0}catch{return!1}}),_.emit=Bc,_.reallyExit=Mc)},qt.exports.load=Vr,Zr=_.reallyExit,Mc=function(e){ot(global.process)&&(_.exitCode=e||0,at("exit",_.exitCode,null),at("afterexit",_.exitCode,null),Zr.call(_,_.exitCode))},Gs=_.emit,Bc=function(e,t){if(e==="exit"&&ot(global.process)){t!==void 0&&(_.exitCode=t);var s=Gs.apply(this,arguments);return at("exit",_.exitCode,null),at("afterexit",_.exitCode,null),s}else return Gs.apply(this,arguments)}):qt.exports=function(){return function(){}};var Cc,kt,Fc,pi,F,Us,at,qs,Ut,Vr,Zr,Mc,Gs,Bc});var qc=f((zy,Uc)=>{"use strict";var up=require("os"),fp=kc(),dp=1e3*5,mp=(i,e="SIGTERM",t={})=>{let s=i(e);return pp(i,e,t,s),s},pp=(i,e,t,s)=>{if(!gp(e,t,s))return;let n=Sp(t),r=setTimeout(()=>{i("SIGKILL")},n);r.unref&&r.unref()},gp=(i,{forceKillAfterTimeout:e},t)=>yp(i)&&e!==!1&&t,yp=i=>i===up.constants.signals.SIGTERM||typeof i=="string"&&i.toUpperCase()==="SIGTERM",Sp=({forceKillAfterTimeout:i=!0})=>{if(i===!0)return dp;if(!Number.isFinite(i)||i<0)throw new TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${i}\` (${typeof i})`);return i},wp=(i,e)=>{i.kill()&&(e.isCanceled=!0)},Ep=(i,e,t)=>{i.kill(e),t(Object.assign(new Error("Timed out"),{timedOut:!0,signal:e}))},bp=(i,{timeout:e,killSignal:t="SIGTERM"},s)=>{if(e===0||e===void 0)return s;let n,r=new Promise((a,h)=>{n=setTimeout(()=>{Ep(i,t,h)},e)}),o=s.finally(()=>{clearTimeout(n)});return Promise.race([r,o])},Rp=({timeout:i})=>{if(i!==void 0&&(!Number.isFinite(i)||i<0))throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${i}\` (${typeof i})`)},Tp=async(i,{cleanup:e,detached:t},s)=>{if(!e||t)return s;let n=fp(()=>{i.kill()});return s.finally(()=>{n()})};Uc.exports={spawnedKill:mp,spawnedCancel:wp,setupTimeout:bp,validateTimeout:Rp,setExitHandler:Tp}});var Hc=f((Wy,Gc)=>{"use strict";var de=i=>i!==null&&typeof i=="object"&&typeof i.pipe=="function";de.writable=i=>de(i)&&i.writable!==!1&&typeof i._write=="function"&&typeof i._writableState=="object";de.readable=i=>de(i)&&i.readable!==!1&&typeof i._read=="function"&&typeof i._readableState=="object";de.duplex=i=>de.writable(i)&&de.readable(i);de.transform=i=>de.duplex(i)&&typeof i._transform=="function";Gc.exports=de});var zc=f((jy,$c)=>{"use strict";var{PassThrough:Ip}=require("stream");$c.exports=i=>{i={...i};let{array:e}=i,{encoding:t}=i,s=t==="buffer",n=!1;e?n=!(t||s):t=t||"utf8",s&&(t=null);let r=new Ip({objectMode:n});t&&r.setEncoding(t);let o=0,a=[];return r.on("data",h=>{a.push(h),n?o=a.length:o+=h.length}),r.getBufferedValue=()=>e?a:s?Buffer.concat(a,o):a.join(""),r.getBufferedLength=()=>o,r}});var Wc=f((Ky,gi)=>{"use strict";var{constants:xp}=require("buffer"),_p=require("stream"),{promisify:Op}=require("util"),Pp=zc(),Dp=Op(_p.pipeline),Hs=class extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}};async function Jr(i,e){if(!i)throw new Error("Expected a stream");e={maxBuffer:1/0,...e};let{maxBuffer:t}=e,s=Pp(e);return await new Promise((n,r)=>{let o=a=>{a&&s.getBufferedLength()<=xp.MAX_LENGTH&&(a.bufferedData=s.getBufferedValue()),r(a)};(async()=>{try{await Dp(i,s),n()}catch(a){o(a)}})(),s.on("data",()=>{s.getBufferedLength()>t&&o(new Hs)})}),s.getBufferedValue()}gi.exports=Jr;gi.exports.buffer=(i,e)=>Jr(i,{...e,encoding:"buffer"});gi.exports.array=(i,e)=>Jr(i,{...e,array:!0});gi.exports.MaxBufferError=Hs});var Kc=f((Yy,jc)=>{"use strict";var{PassThrough:vp}=require("stream");jc.exports=function(){var i=[],e=new vp({objectMode:!0});return e.setMaxListeners(0),e.add=t,e.isEmpty=s,e.on("unpipe",n),Array.prototype.slice.call(arguments).forEach(t),e;function t(r){return Array.isArray(r)?(r.forEach(t),this):(i.push(r),r.once("end",n.bind(null,r)),r.once("error",e.emit.bind(e,"error")),r.pipe(e,{end:!1}),this)}function s(){return i.length==0}function n(r){i=i.filter(function(o){return o!==r}),!i.length&&e.readable&&e.end()}}});var Zc=f((Xy,Vc)=>{"use strict";var Xc=Hc(),Yc=Wc(),Ap=Kc(),Np=(i,e)=>{e===void 0||i.stdin===void 0||(Xc(e)?e.pipe(i.stdin):i.stdin.end(e))},Lp=(i,{all:e})=>{if(!e||!i.stdout&&!i.stderr)return;let t=Ap();return i.stdout&&t.add(i.stdout),i.stderr&&t.add(i.stderr),t},Qr=async(i,e)=>{if(i){i.destroy();try{return await e}catch(t){return t.bufferedData}}},eo=(i,{encoding:e,buffer:t,maxBuffer:s})=>{if(!(!i||!t))return e?Yc(i,{encoding:e,maxBuffer:s}):Yc.buffer(i,{maxBuffer:s})},Cp=async({stdout:i,stderr:e,all:t},{encoding:s,buffer:n,maxBuffer:r},o)=>{let a=eo(i,{encoding:s,buffer:n,maxBuffer:r}),h=eo(e,{encoding:s,buffer:n,maxBuffer:r}),l=eo(t,{encoding:s,buffer:n,maxBuffer:r*2});try{return await Promise.all([o,a,h,l])}catch(c){return Promise.all([{error:c,signal:c.signal,timedOut:c.timedOut},Qr(i,a),Qr(e,h),Qr(t,l)])}},Fp=({input:i})=>{if(Xc(i))throw new TypeError("The `input` option cannot be a stream in sync mode")};Vc.exports={handleInput:Np,makeAllStream:Lp,getSpawnedResult:Cp,validateInputSync:Fp}});var Qc=f((Vy,Jc)=>{"use strict";var Mp=(async()=>{})().constructor.prototype,Bp=["then","catch","finally"].map(i=>[i,Reflect.getOwnPropertyDescriptor(Mp,i)]),kp=(i,e)=>{for(let[t,s]of Bp){let n=typeof e=="function"?(...r)=>Reflect.apply(s.value,e(),r):s.value.bind(e);Reflect.defineProperty(i,t,{...s,value:n})}return i},Up=i=>new Promise((e,t)=>{i.on("exit",(s,n)=>{e({exitCode:s,signal:n})}),i.on("error",s=>{t(s)}),i.stdin&&i.stdin.on("error",s=>{t(s)})});Jc.exports={mergePromise:kp,getSpawnedPromise:Up}});var iu=f((Zy,tu)=>{"use strict";var eu=(i,e=[])=>Array.isArray(e)?[i,...e]:[i],qp=/^[\w.-]+$/,Gp=/"/g,Hp=i=>typeof i!="string"||qp.test(i)?i:`"${i.replace(Gp,'\\"')}"`,$p=(i,e)=>eu(i,e).join(" "),zp=(i,e)=>eu(i,e).map(t=>Hp(t)).join(" "),Wp=/ +/g,jp=i=>{let e=[];for(let t of i.trim().split(Wp)){let s=e[e.length-1];s&&s.endsWith("\\")?e[e.length-1]=`${s.slice(0,-1)} ${t}`:e.push(t)}return e};tu.exports={joinCommand:$p,getEscapedCommand:zp,parseCommand:jp}});var hu=f((Jy,Gt)=>{"use strict";var Kp=require("path"),to=require("child_process"),Yp=dc(),Xp=pc(),Vp=Sc(),Zp=Rc(),$s=vc(),nu=Nc(),{spawnedKill:Jp,spawnedCancel:Qp,setupTimeout:eg,validateTimeout:tg,setExitHandler:ig}=qc(),{handleInput:sg,getSpawnedResult:ng,makeAllStream:rg,validateInputSync:og}=Zc(),{mergePromise:su,getSpawnedPromise:ag}=Qc(),{joinCommand:ru,parseCommand:ou,getEscapedCommand:au}=iu(),lg=1e3*1e3*100,hg=({env:i,extendEnv:e,preferLocal:t,localDir:s,execPath:n})=>{let r=e?{...process.env,...i}:i;return t?Vp.env({env:r,cwd:s,execPath:n}):r},lu=(i,e,t={})=>{let s=Yp._parse(i,e,t);return i=s.command,e=s.args,t=s.options,t={maxBuffer:lg,buffer:!0,stripFinalNewline:!0,extendEnv:!0,preferLocal:!1,localDir:t.cwd||process.cwd(),execPath:process.execPath,encoding:"utf8",reject:!0,cleanup:!0,all:!1,windowsHide:!0,...t},t.env=hg(t),t.stdio=nu(t),process.platform==="win32"&&Kp.basename(i,".exe")==="cmd"&&e.unshift("/q"),{file:i,args:e,options:t,parsed:s}},yi=(i,e,t)=>typeof e!="string"&&!Buffer.isBuffer(e)?t===void 0?void 0:"":i.stripFinalNewline?Xp(e):e,zs=(i,e,t)=>{let s=lu(i,e,t),n=ru(i,e),r=au(i,e);tg(s.options);let o;try{o=to.spawn(s.file,s.args,s.options)}catch(m){let p=new to.ChildProcess,E=Promise.reject($s({error:m,stdout:"",stderr:"",all:"",command:n,escapedCommand:r,parsed:s,timedOut:!1,isCanceled:!1,killed:!1}));return su(p,E)}let a=ag(o),h=eg(o,s.options,a),l=ig(o,s.options,h),c={isCanceled:!1};o.kill=Jp.bind(null,o.kill.bind(o)),o.cancel=Qp.bind(null,o,c);let d=Zp(async()=>{let[{error:m,exitCode:p,signal:E,timedOut:b},T,Ke,wi]=await ng(o,s.options,l),ho=yi(s.options,T),co=yi(s.options,Ke),uo=yi(s.options,wi);if(m||p!==0||E!==null){let fo=$s({error:m,exitCode:p,signal:E,stdout:ho,stderr:co,all:uo,command:n,escapedCommand:r,parsed:s,timedOut:b,isCanceled:c.isCanceled,killed:o.killed});if(!s.options.reject)return fo;throw fo}return{command:n,escapedCommand:r,exitCode:0,stdout:ho,stderr:co,all:uo,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}});return sg(o,s.options.input),o.all=rg(o,s.options),su(o,d)};Gt.exports=zs;Gt.exports.sync=(i,e,t)=>{let s=lu(i,e,t),n=ru(i,e),r=au(i,e);og(s.options);let o;try{o=to.spawnSync(s.file,s.args,s.options)}catch(l){throw $s({error:l,stdout:"",stderr:"",all:"",command:n,escapedCommand:r,parsed:s,timedOut:!1,isCanceled:!1,killed:!1})}let a=yi(s.options,o.stdout,o.error),h=yi(s.options,o.stderr,o.error);if(o.error||o.status!==0||o.signal!==null){let l=$s({stdout:a,stderr:h,error:o.error,signal:o.signal,exitCode:o.status,command:n,escapedCommand:r,parsed:s,timedOut:o.error&&o.error.code==="ETIMEDOUT",isCanceled:!1,killed:o.signal!==null});if(!s.options.reject)return l;throw l}return{command:n,escapedCommand:r,exitCode:0,stdout:a,stderr:h,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}};Gt.exports.command=(i,e)=>{let[t,...s]=ou(i);return zs(t,s,e)};Gt.exports.commandSync=(i,e)=>{let[t,...s]=ou(i);return zs.sync(t,s,e)};Gt.exports.node=(i,e,t={})=>{e&&!Array.isArray(e)&&typeof e=="object"&&(t=e,e=[]);let s=nu.node(t),n=process.execArgv.filter(a=>!a.startsWith("--inspect")),{nodePath:r=process.execPath,nodeOptions:o=n}=t;return zs(r,[...o,i,...Array.isArray(e)?e:[]],{...t,stdin:void 0,stdout:void 0,stderr:void 0,stdio:s,shell:!1})}});var Eg={};Au(Eg,{default:()=>xu});module.exports=Nu(Eg);var lo=require("child_process"),bu=re(require("https")),Ru=re(_h()),Ht=re(require("fs")),Tu=re(require("crypto")),v=require("@raycast/api");var ht=require("@raycast/api");var je=require("child_process"),B=re(require("fs")),$=re(require("os")),y=re(require("path"));var io=re(require("node:process"),1),so=re(hu(),1);async function lt(i,{humanReadableOutput:e=!0}={}){if(io.default.platform!=="darwin")throw new Error("macOS only");let t=e?[]:["-ss"],{stdout:s}=await(0,so.default)("osascript",["-e",i,t]);return s}function Si(i,{humanReadableOutput:e=!0}={}){if(io.default.platform!=="darwin")throw new Error("macOS only");let t=e?[]:["-ss"],{stdout:s}=so.default.sync("osascript",["-e",i,...t]);return s}var g=require("@raycast/api");var cu=async()=>lt(`use framework "AppKit"
      use framework "PDFKit"
      
      set pb to current application's NSPasteboard's generalPasteboard()
      set theItems to pb's readObjectsForClasses:({current application's NSURL, current application's NSImage, current application's NSAttributedString}) options:{}
      
      set theImages to {}
      repeat with i from 0 to ((theItems's |count|()) - 1)
        set theItem to (theItems's objectAtIndex:i)
        if (theItem's |class|()) is current application's NSImage then
          copy theItem to end of theImages
        else if (theItem's |class|()) is current application's NSURL then
          if (theItem's absoluteString() as text) ends with ".pdf" then
            set theImage to (current application's PDFDocument's alloc()'s initWithURL:theItem)
          else
            set theImage to (current application's NSImage's alloc()'s initWithContentsOfURL:theItem)
          end if
          if theImage is not missing value then
            copy theImage to end of theImages
          end if
        else if (theItem's |class|()) is current application's NSConcreteAttributedString then
          repeat with i from 0 to ((theItem's |length|()) - 1)
            set attrs to (theItem's attributesAtIndex:i longestEffectiveRange:(missing value) inRange:{i, (theItem's |length|()) - i})
            set theAttachment to (attrs's objectForKey:"NSAttachment")
            if theAttachment is not missing value then
              set cell to theAttachment's attachmentCell()
              set theImage to cell's image()
              copy theImage to end of theImages
            end if
          end repeat
        end if
      end repeat
      
      set tempDir to current application's NSTemporaryDirectory() as text
      set filePaths to {}
      repeat with i from 1 to count theImages
        set theImage to item i of theImages
        set theFile to tempDir & "clipboardImage_" & i
        if theImage's |class|() is current application's PDFDocument then
          set theFile to theFile & ".pdf"
          (theImage's writeToFile:theFile)
        else
          set theFile to theFile & ".png"
          set theTIFFData to theImage's TIFFRepresentation()
          set theBitmap to (current application's NSBitmapImageRep's alloc()'s initWithData:theTIFFData)
          set thePNGData to (theBitmap's representationUsingType:(current application's NSBitmapImageFileTypePNG) |properties|:(current application's NSDictionary's alloc()'s init()))
          (thePNGData's writeToFile:theFile atomically:false)
        end if
        copy theFile to end of filePaths
      end repeat
      
      return filePaths`),uu=async i=>{let e=Array.isArray(i)?i:[i];await lt(`use framework "Foundation"
      use framework "PDFKit"
      use scripting additions
  
      set thePasteboard to current application's NSPasteboard's generalPasteboard()
      thePasteboard's clearContents()
      
      -- Handle PDFs separately
      set pdfPaths to {"${e.filter(t=>t.endsWith(".pdf")).join('", "')}"}
  
      set pdfItems to current application's NSMutableArray's alloc()'s init()
      repeat with pdfPath in pdfPaths
        if length of pdfPath is not 0 then
          set pdfItem to current application's NSPasteboardItem's alloc()'s init()
          set pdfData to current application's NSData's dataWithContentsOfFile:pdfPath
          pdfItem's setData:pdfData forType:(current application's NSPasteboardTypePDF)
          pdfItems's addObject:pdfItem
        end if
      end repeat
  
      if pdfItems's |count|() > 0 then
        thePasteboard's writeObjects:pdfItems
      end if
        
      -- Handle all other image types
      set theFiles to {"${e.join('", "')}"}
    
      set theImages to {}
      repeat with theFile in theFiles
        if length of theFile is not 0 then
          set theImage to (current application's NSImage's alloc()'s initWithContentsOfFile:theFile)
          if theImage is not missing value then
            copy theImage to end of theImages
          end if
        end if
      end repeat
      
      if (count theImages) > 0 then
        thePasteboard's writeObjects:theImages
      end if`)};var cg=async()=>lt(`set imageTypes to {"PNG", "JPG", "JPEG", "TIF", "HEIF", "GIF", "ICO", "ICNS", "ASTC", "BMP", "DDS", "EXR", "JP2", "KTX", "Portable Bitmap", "Adobe Photoshop", "PVR", "TGA", "WebP", "SVG", "PDF", "HEIC"}
    
    tell application "Finder"
      set theSelection to selection

      if theSelection is {} and (count Finder windows) > 0 then
        repeat with i from 1 to (count Finder windows)
          activate window i
          set theSelection to selection

          set selectionKinds to {}
          repeat with j from 1 to (count theSelection)
            set selectionKinds to selectionKinds & kind of (item j of theSelection)
          end repeat

          set containsImage to false
          repeat with imageType in imageTypes
            if selectionKinds contains imageType then
              set containsImage to true
              exit repeat
            end if
          end repeat
        end repeat
      end if

      if theSelection is {} then
        return
      else if (theSelection count) is equal to 1 then
        repeat with imageType in imageTypes
          if (kind of the first item of theSelection) contains imageType then
            return the POSIX path of (theSelection as alias)
            exit repeat
          end if
        end repeat
      else
        set thePaths to {}
        repeat with i from 1 to (theSelection count)
          repeat with imageType in imageTypes
            if (kind of (item i of theSelection)) contains imageType then
              copy (POSIX path of (item i of theSelection as alias)) to end of thePaths
              exit repeat
            end if
          end repeat
        end repeat
        return thePaths
      end if
    end tell`),ug=async()=>lt(`set imageTypes to {"PNG", "JPG", "JPEG", "TIF", "HEIF", "GIF", "ICO", "ICNS", "ASTC", "BMP", "DDS", "EXR", "JP2", "KTX", "Portable Bitmap", "Adobe Photoshop", "PVR", "TGA", "WebP", "SVG", "PDF", "HEIC"}

    tell application "Path Finder"
      set theSelection to selection

      if theSelection is {} and (count windows) > 0 then
        repeat with i from 1 to (count windows)
          activate window i
          set theSelection to selection

          set selectionKinds to {}
          repeat with j from 1 to (count theSelection)
            set selectionKinds to selectionKinds & kind of (item j of theSelection)
          end repeat

          set containsImage to false
          repeat with imageType in imageTypes
            if selectionKinds contains imageType then
              set containsImage to true
              exit repeat
            end if
          end repeat
        end repeat
      end if

      if theSelection is {} then
        return
      else if (theSelection count) is equal to 1 then
        repeat with imageType in imageTypes
          if (kind of the first item of theSelection) contains imageType then
            return the POSIX path of first item of theSelection
            exit repeat
          end if
        end repeat
      else
        set thePaths to {}
        repeat with i from 1 to (theSelection count)
          repeat with imageType in imageTypes
            if (kind of (item i of theSelection)) contains imageType then
              copy (POSIX path of (item i of theSelection)) to end of thePaths
              exit repeat
            end if
          end repeat
        end repeat
        return thePaths
      end if
    end tell`),du=async()=>{let e=(await g.LocalStorage.getItem("itemsToRemove")??"").toString().split(", ");for(let t of e)B.existsSync(t)&&await B.promises.rm(t);await g.LocalStorage.removeItem("itemsToRemove")},mu=async()=>{let i=[],t=(0,g.getPreferenceValues)().inputMethod,s=!1;if(t=="Clipboard")try{let o=(await cu()).split(", ");if(await g.LocalStorage.setItem("itemsToRemove",o.join(", ")),o.filter(a=>a.trim().length>0).length>0)return o}catch{console.error("Couldn't get images from clipboard"),s=!0}let n=t;try{n=(await(0,g.getFrontmostApplication)()).name}catch{console.error("Couldn't get frontmost application")}try{if(t=="Path Finder"&&((await ug()).split(", ").forEach(a=>{i.includes(a)||i.push(a)}),i.length>0))return i}catch{console.error("Couldn't get images from Path Finder"),s=!0}let r=(await cg()).split(", ");return n=="Finder"||t=="Finder"||s?i.push(...r):r.forEach(o=>{o.split("/").at(-2)=="Desktop"&&!i.includes(o)&&i.push(o)}),i},pu=async i=>{let e=(0,g.getPreferenceValues)();e.imageResultHandling=="copyToClipboard"?(await uu(i),fu(i)):e.imageResultHandling=="openInPreview"&&(console.log(i),await mg(i),fu(i))},fg=async()=>($.cpus()[0].model.includes("Apple")?"arm":"x86")=="arm"?((0,je.execSync)(`chmod +x ${g.environment.assetsPath}/webp/arm/dwebp`),(0,je.execSync)(`chmod +x ${g.environment.assetsPath}/webp/arm/cwebp`),B.existsSync(`${g.environment.assetsPath}/webp/x86/dwebp`)&&await B.promises.rm(`${g.environment.assetsPath}/webp/x86/dwebp`),B.existsSync(`${g.environment.assetsPath}/webp/x86/cwebp`)&&await B.promises.rm(`${g.environment.assetsPath}/webp/x86/cwebp`),[`${g.environment.assetsPath}/webp/arm/dwebp`,`${g.environment.assetsPath}/webp/arm/cwebp`]):((0,je.execSync)(`chmod +x ${g.environment.assetsPath}/webp/x86/dwebp`),(0,je.execSync)(`chmod +x ${g.environment.assetsPath}/webp/x86/cwebp`),B.existsSync(`${g.environment.assetsPath}/webp/arm/dwebp`)&&await B.promises.rm(`${g.environment.assetsPath}/webp/arm/dwebp`),B.existsSync(`${g.environment.assetsPath}/webp/arm/cwebp`)&&await B.promises.rm(`${g.environment.assetsPath}/webp/arm/cwebp`),[`${g.environment.assetsPath}/webp/x86/dwebp`,`${g.environment.assetsPath}/webp/x86/cwebp`]),gu=async(i,e)=>{let t=(0,g.getPreferenceValues)(),s=`${g.environment.supportPath}/tmp.png`,n=e;t.imageResultHandling=="saveToDownloads"?n=y.default.join($.homedir(),"Downloads",y.default.basename(n)):t.imageResultHandling=="saveToDesktop"?n=y.default.join($.homedir(),"Desktop",y.default.basename(n)):(t.imageResultHandling=="copyToClipboard"||t.imageResultHandling=="openInPreview")&&(n=y.default.join($.tmpdir(),y.default.basename(n)));let r=2;for(;B.existsSync(n)&&$.tmpdir()!=y.default.dirname(n);)n=y.default.join(y.default.dirname(n),y.default.basename(n,y.default.extname(n))+` (${r})${y.default.extname(n)}`),r++;let[o,a]=await fg();return(0,je.execSync)(`${o} "${e}" -o "${s}" && ${i} "${s}" && ${a} "${s}" -o "${n}" ; rm "${s}"`),n},yu=async(i,e)=>{let t=(0,g.getPreferenceValues)(),s=`${g.environment.supportPath}/tmp.bmp`,n=e;t.imageResultHandling=="saveToDownloads"?n=y.default.join($.homedir(),"Downloads",y.default.basename(n)):t.imageResultHandling=="saveToDesktop"?n=y.default.join($.homedir(),"Desktop",y.default.basename(n)):(t.imageResultHandling=="copyToClipboard"||t.imageResultHandling=="openInPreview")&&(n=y.default.join($.tmpdir(),y.default.basename(n)));let r=2;for(;B.existsSync(n)&&$.tmpdir()!=y.default.dirname(n);)n=y.default.join(y.default.dirname(n),y.default.basename(n,y.default.extname(n))+` (${r})${y.default.extname(n)}`),r++;return dg("BMP",e,s),(0,je.execSync)(`chmod +x ${g.environment.assetsPath}/potrace/potrace`),(0,je.execSync)(`${i} "${s}" && ${g.environment.assetsPath}/potrace/potrace -s --tight -o "${n}" "${s}"; rm "${s}"`),n},dg=(i,e,t)=>{Si(`use framework "Foundation"
  use scripting additions

  -- Load SVG image from file
  set svgFilePath to "${e}"
  set svgData to current application's NSData's alloc()'s initWithContentsOfFile:svgFilePath
  
  -- Create image from SVG data
  set svgImage to current application's NSImage's alloc()'s initWithData:svgData
  
  -- Convert image to PNG data
  set tiffData to svgImage's TIFFRepresentation()
  set theBitmap to current application's NSBitmapImageRep's alloc()'s initWithData:tiffData
  set pngData to theBitmap's representationUsingType:(current application's NSBitmapImageFileType${i}) |properties|:(missing value)
  
  -- Save PNG data to file
  pngData's writeToFile:"${t}" atomically:false`)};var mg=async i=>{let e=Array.isArray(i)?i:[i],t=e.some(s=>y.default.extname(s)==".svg");await lt(`use framework "Foundation"
    use scripting additions
    set pageImages to {${e.map(s=>`current application's NSURL's fileURLWithPath:"${s}"`).join(", ")}}

    set workspace to current application's NSWorkspace's sharedWorkspace()
    set config to current application's NSWorkspaceOpenConfiguration's configuration()

    ${t?`tell application "Finder"
            set safariPath to POSIX path of ((application file id "com.apple.Safari") as text)
            set safariURL to current application's NSURL's fileURLWithPath:safariPath
          end tell

          workspace's openURLs:pageImages withApplicationAtURL:safariURL configuration:config completionHandler:(missing value)
          
          tell application "Safari"
            set finished to false
            set iter to 0
            repeat while ((count of windows) = 0 or finished is not true) and iter < 10
              delay 0.5
              set iter to iter + 1

              set currentStatus to true
              repeat with doc in (path of documents as list)
                repeat with thePath in {"${e.map(s=>encodeURI(`file://${s}`)).join('", "')}"}
                  if thePath is not in doc then
                    set currentStatus to false
                  end if
                end repeat
              end repeat
              set finished to currentStatus
            end repeat
          end tell
          `:`tell application "Finder"
            set previewPath to POSIX path of ((application file id "com.apple.Preview") as text)
            set previewURL to current application's NSURL's fileURLWithPath:previewPath
          end tell

          workspace's openURLs:pageImages withApplicationAtURL:previewURL configuration:config completionHandler:(missing value)
          
          tell application "Preview"
            set finished to false
            set iter to 0
            repeat while ((count of windows) = 0 or finished is not true) and iter < 10
              delay 0.5
              set iter to iter + 1

              set currentStatus to true
              repeat with doc in (path of documents as list)
                repeat with thePath in {"${e.join('", "')}"}
                  if thePath is not in doc then
                    set currentStatus to false
                  end if
                end repeat
              end repeat
              set finished to currentStatus
            end repeat
          end tell`}`)},fu=i=>{let e=Array.isArray(i)?i:[i];for(let t of e)B.unlinkSync(t)},pg=()=>Si(`use framework "Foundation"
    use scripting additions
    set workspace to current application's NSWorkspace's sharedWorkspace()
    set runningApps to workspace's runningApplications()
    
    set targetApp to missing value
    repeat with theApp in runningApps
      if theApp's ownsMenuBar() then
        set targetApp to theApp
        exit repeat
      end if
    end repeat
    
    if targetApp is missing value then
      return "Finder"
    else
      return targetApp's localizedName() as text
    end if`),gg=()=>{let i="Finder";try{i=pg()}catch{console.error("Couldn't get frontmost application")}try{if(i=="Path Finder")return Si(`tell application "Path Finder"
          if 1 \u2264 (count finder windows) then
            get POSIX path of (target of finder window 1)
          else
            get POSIX path of desktop
          end if
        end tell`)}catch{console.error("Couldn't get current directory of Path Finder")}return Si(`tell application "Finder"
      if 1 <= (count Finder windows) then
        get POSIX path of (target of window 1 as alias)
      else
        get POSIX path of (desktop as alias)
      end if
    end tell`)},Su=(i,e=!1)=>{let t=(0,g.getPreferenceValues)();return i.map(s=>{let n=s;if(t.imageResultHandling=="saveToDownloads"?n=y.default.join($.homedir(),"Downloads",y.default.basename(n)):t.imageResultHandling=="saveToDesktop"?n=y.default.join($.homedir(),"Desktop",y.default.basename(n)):(t.imageResultHandling=="saveInContainingFolder"||t.imageResultHandling=="replaceOriginal")&&(t.inputMethod=="Clipboard"||e)?n=y.default.join(gg(),y.default.basename(n)):(t.imageResultHandling=="copyToClipboard"||t.imageResultHandling=="openInPreview")&&(n=y.default.join($.tmpdir(),y.default.basename(n))),t.imageResultHandling!="replaceOriginal"&&$.tmpdir()!=y.default.dirname(n)){let r=2;for(;B.existsSync(n);)n=y.default.join(y.default.dirname(n),y.default.basename(n,y.default.extname(n))+` (${r})${y.default.extname(n)}`),r++}return n})},wu=async(i,e,t)=>{console.error(e),t?(t.title=i,t.message=e.message,t.style=g.Toast.Style.Failure,t.primaryAction={title:"Copy Error",onAction:async()=>{await g.Clipboard.copy(e.message)}}):t=await(0,g.showToast)({title:i,message:e.message,style:g.Toast.Style.Failure,primaryAction:{title:"Copy Error",onAction:async()=>{await g.Clipboard.copy(e.message)}}})};async function no(i){if(i.selectedImages.length===0||i.selectedImages.length===1&&i.selectedImages[0]===""){await(0,ht.showToast)({title:"No images selected",style:ht.Toast.Style.Failure});return}let e=await(0,ht.showToast)({title:i.inProgressMessage,style:ht.Toast.Style.Animated}),t=`image${i.selectedImages.length===1?"":"s"}`;try{await i.operation(),e.title=`${i.successMessage} ${i.selectedImages.length.toString()} ${t}`,e.style=ht.Toast.Style.Success}catch(s){await wu(`${i.failureMessage} ${i.selectedImages.length.toString()} ${t}`,s,e)}finally{await du()}}var ro=require("child_process");var oo=require("@raycast/api");async function ao(i,e){let t=Su(i),s=[],n=e==="path"?"exiftool":`"${oo.environment.supportPath}/Image-ExifTool-12.74/exiftool"`;e==="support"&&(0,ro.execSync)(`chmod +x "${oo.environment.supportPath}/Image-ExifTool-12.74/exiftool"`);for(let r of i)if(r.toLowerCase().endsWith(".webp"))s.push(await gu(`${n} -all= "${r}"`,r));else if(r.toLowerCase().endsWith(".svg"))s.push(await yu(`${n} -all= "${r}"`,r));else{let o=t[i.indexOf(r)];s.push(o),(0,ro.execSync)(`${n} -all= -o "${o}" "${r}"`)}await pu(s)}var Iu=re(require("path"));async function Sg(){if(await(0,v.confirmAlert)({title:"Install ExifTool",message:`ExifTool is required to strip EXIF data. Would you like to install it now?

This will use 26.2 MB of disk space.`,primaryAction:{title:"Install"}})){let i=await(0,v.showToast)({title:"Installing ExifTool...",style:v.Toast.Style.Animated}),e=v.environment.supportPath,t="https://exiftool.org/Image-ExifTool-12.74.tar.gz",s="aedb28b1427c53205ab261fa31ff3feda73e7f17a0c181453651680e5666c48a",n=!0;for(bu.get(t,async r=>{let o="Image-ExifTool-12.74.tar.gz",a=Iu.default.join(e,o),h=Ht.createWriteStream(a);r.pipe(h);let l=!1,c=Tu.createHash("sha256");r.on("data",u=>c.update(u)),r.on("end",async()=>{if(c.digest("hex")!==s){i.title="Checksum verification failed",i.style=v.Toast.Style.Failure,n=!1;return}l=!0}),h.on("finish",async()=>{h.close(),l&&(await Ru.x({file:`${e}/Image-ExifTool-12.74.tar.gz`,cwd:e}),await v.LocalStorage.setItem("exifToolLocation","support"),n=!1),await Ht.promises.unlink(a),i.title="Done!",i.style=v.Toast.Style.Success})});n;)await new Promise(r=>setTimeout(r,1e3))}else await v.LocalStorage.removeItem("exifToolLocation")}async function Eu(){try{(0,lo.execSync)("exiftool -ver"),await v.LocalStorage.setItem("exifToolLocation","path")}catch{await Sg()}}async function wg(){let i=await v.LocalStorage.getItem("exifToolLocation");if(i!=="path"&&(i!=="support"||!Ht.existsSync(`${v.environment.supportPath}/Image-ExifTool-12.74/exiftool`))&&await Eu(),i==="path")try{return(0,lo.execSync)("exiftool -ver"),"path"}catch{await Eu()}return await v.LocalStorage.getItem("exifToolLocation")}async function xu(){let i=await mu(),e=await wg();if(!e){await(0,v.showToast)({title:"Command Cancelled",message:"ExifTool is required to strip EXIF data.",style:v.Toast.Style.Failure});return}await no({operation:()=>ao(i,e),selectedImages:i,inProgressMessage:"Sanitizing...",successMessage:"Sanitized",failureMessage:"Failed to sanitize"})}
