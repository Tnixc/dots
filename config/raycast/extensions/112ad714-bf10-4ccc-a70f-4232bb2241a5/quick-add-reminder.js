"use strict";var H=Object.defineProperty;var jt=Object.getOwnPropertyDescriptor;var Qt=Object.getOwnPropertyNames;var _t=Object.prototype.hasOwnProperty;var Gt=(t,e)=>{for(var r in e)H(t,r,{get:e[r],enumerable:!0})},Xt=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Qt(e))!_t.call(t,o)&&o!==r&&H(t,o,{get:()=>e[o],enumerable:!(n=jt(e,o))||n.enumerable});return t};var Bt=t=>Xt(H({},"__esModule",{value:!0}),t);var Re={};Gt(Re,{default:()=>Et});module.exports=Bt(Re);var h=require("@raycast/api");function c(t){let e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function l(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function g(t,e){let r=c(t);return isNaN(e)?l(t,NaN):(e&&r.setDate(r.getDate()+e),r)}function U(t,e){let r=c(t);if(isNaN(e))return l(t,NaN);if(!e)return r;let n=r.getDate(),o=l(t,r.getTime());o.setMonth(r.getMonth()+e+1,0);let a=o.getDate();return n>=a?o:(r.setFullYear(o.getFullYear(),o.getMonth(),n),r)}function z(t,e){let r=+c(t);return l(t,r+e)}var Jt=Math.pow(10,8)*24*60*60*1e3,Ue=-Jt,$=6048e5,Z=864e5;var K=36e5;var Vt=3600;var tt=Vt*24,ze=tt*7,Ut=tt*365.2425,zt=Ut/12,Ze=zt*3;function et(t,e){return z(t,e*K)}var Zt={};function b(){return Zt}function w(t,e){let r=b(),n=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,o=c(t),a=o.getDay(),i=(a<n?7:0)+a-n;return o.setDate(o.getDate()-i),o.setHours(0,0,0,0),o}function D(t){return w(t,{weekStartsOn:1})}function E(t){let e=c(t),r=e.getFullYear(),n=l(t,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);let o=D(n),a=l(t,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);let i=D(a);return e.getTime()>=o.getTime()?r+1:e.getTime()>=i.getTime()?r:r-1}function A(t){let e=c(t);return e.setHours(0,0,0,0),e}function L(t){let e=c(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function rt(t,e){let r=A(t),n=A(e),o=+r-L(r),a=+n-L(n);return Math.round((o-a)/Z)}function nt(t){let e=E(t),r=l(t,0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),D(r)}function ot(t,e){return U(t,e*12)}function at(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function it(t){if(!at(t)&&typeof t!="number")return!1;let e=c(t);return!isNaN(Number(e))}function st(t){let e=c(t),r=l(t,0);return r.setFullYear(e.getFullYear(),0,1),r.setHours(0,0,0,0),r}var Kt={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},ut=(t,e,r)=>{let n,o=Kt[t];return typeof o=="string"?n=o:e===1?n=o.one:n=o.other.replace("{{count}}",e.toString()),r?.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function R(t){return(e={})=>{let r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}var te={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},ee={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},re={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ct={date:R({formats:te,defaultWidth:"full"}),time:R({formats:ee,defaultWidth:"full"}),dateTime:R({formats:re,defaultWidth:"full"})};var ne={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},dt=(t,e,r,n)=>ne[t];function v(t){return(e,r)=>{let n=r?.context?String(r.context):"standalone",o;if(n==="formatting"&&t.formattingValues){let i=t.defaultFormattingWidth||t.defaultWidth,m=r?.width?String(r.width):i;o=t.formattingValues[m]||t.formattingValues[i]}else{let i=t.defaultWidth,m=r?.width?String(r.width):t.defaultWidth;o=t.values[m]||t.values[i]}let a=t.argumentCallback?t.argumentCallback(e):e;return o[a]}}var oe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},ae={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},ie={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},se={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},ue={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},ce={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},de=(t,e)=>{let r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},mt={ordinalNumber:de,era:v({values:oe,defaultWidth:"wide"}),quarter:v({values:ae,defaultWidth:"wide",argumentCallback:t=>t-1}),month:v({values:ie,defaultWidth:"wide"}),day:v({values:se,defaultWidth:"wide"}),dayPeriod:v({values:ue,defaultWidth:"wide",formattingValues:ce,defaultFormattingWidth:"wide"})};function P(t){return(e,r={})=>{let n=r.width,o=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],a=e.match(o);if(!a)return null;let i=a[0],m=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],p=Array.isArray(m)?fe(m,d=>d.test(i)):me(m,d=>d.test(i)),f;f=t.valueCallback?t.valueCallback(p):p,f=r.valueCallback?r.valueCallback(f):f;let s=e.slice(i.length);return{value:f,rest:s}}}function me(t,e){for(let r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function fe(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function ft(t){return(e,r={})=>{let n=e.match(t.matchPattern);if(!n)return null;let o=n[0],a=e.match(t.parsePattern);if(!a)return null;let i=t.valueCallback?t.valueCallback(a[0]):a[0];i=r.valueCallback?r.valueCallback(i):i;let m=e.slice(o.length);return{value:i,rest:m}}}var le=/^(\d+)(th|st|nd|rd)?/i,he=/\d+/i,pe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},ye={any:[/^b/i,/^(a|c)/i]},ge={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},we={any:[/1/i,/2/i,/3/i,/4/i]},xe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},be={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},De={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},ke={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Me={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Oe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},lt={ordinalNumber:ft({matchPattern:le,parsePattern:he,valueCallback:t=>parseInt(t,10)}),era:P({matchPatterns:pe,defaultMatchWidth:"wide",parsePatterns:ye,defaultParseWidth:"any"}),quarter:P({matchPatterns:ge,defaultMatchWidth:"wide",parsePatterns:we,defaultParseWidth:"any",valueCallback:t=>t+1}),month:P({matchPatterns:xe,defaultMatchWidth:"wide",parsePatterns:be,defaultParseWidth:"any"}),day:P({matchPatterns:De,defaultMatchWidth:"wide",parsePatterns:ke,defaultParseWidth:"any"}),dayPeriod:P({matchPatterns:Me,defaultMatchWidth:"any",parsePatterns:Oe,defaultParseWidth:"any"})};var j={code:"en-US",formatDistance:ut,formatLong:ct,formatRelative:dt,localize:mt,match:lt,options:{weekStartsOn:0,firstWeekContainsDate:1}};function ht(t){let e=c(t);return rt(e,st(e))+1}function pt(t){let e=c(t),r=+D(e)-+nt(e);return Math.round(r/$)+1}function q(t,e){let r=c(t),n=r.getFullYear(),o=b(),a=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??o.firstWeekContainsDate??o.locale?.options?.firstWeekContainsDate??1,i=l(t,0);i.setFullYear(n+1,0,a),i.setHours(0,0,0,0);let m=w(i,e),p=l(t,0);p.setFullYear(n,0,a),p.setHours(0,0,0,0);let f=w(p,e);return r.getTime()>=m.getTime()?n+1:r.getTime()>=f.getTime()?n:n-1}function yt(t,e){let r=b(),n=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,o=q(t,e),a=l(t,0);return a.setFullYear(o,0,n),a.setHours(0,0,0,0),w(a,e)}function gt(t,e){let r=c(t),n=+w(r,e)-+yt(r,e);return Math.round(n/$)+1}function u(t,e){let r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}var x={y(t,e){let r=t.getFullYear(),n=r>0?r:1-r;return u(e==="yy"?n%100:n,e.length)},M(t,e){let r=t.getMonth();return e==="M"?String(r+1):u(r+1,2)},d(t,e){return u(t.getDate(),e.length)},a(t,e){let r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return u(t.getHours()%12||12,e.length)},H(t,e){return u(t.getHours(),e.length)},m(t,e){return u(t.getMinutes(),e.length)},s(t,e){return u(t.getSeconds(),e.length)},S(t,e){let r=e.length,n=t.getMilliseconds(),o=Math.trunc(n*Math.pow(10,r-3));return u(o,e.length)}};var S={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Q={G:function(t,e,r){let n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){let n=t.getFullYear(),o=n>0?n:1-n;return r.ordinalNumber(o,{unit:"year"})}return x.y(t,e)},Y:function(t,e,r,n){let o=q(t,n),a=o>0?o:1-o;if(e==="YY"){let i=a%100;return u(i,2)}return e==="Yo"?r.ordinalNumber(a,{unit:"year"}):u(a,e.length)},R:function(t,e){let r=E(t);return u(r,e.length)},u:function(t,e){let r=t.getFullYear();return u(r,e.length)},Q:function(t,e,r){let n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return u(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){let n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return u(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){let n=t.getMonth();switch(e){case"M":case"MM":return x.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){let n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return u(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){let o=gt(t,n);return e==="wo"?r.ordinalNumber(o,{unit:"week"}):u(o,e.length)},I:function(t,e,r){let n=pt(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):u(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):x.d(t,e)},D:function(t,e,r){let n=ht(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):u(n,e.length)},E:function(t,e,r){let n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){let o=t.getDay(),a=(o-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return u(a,2);case"eo":return r.ordinalNumber(a,{unit:"day"});case"eee":return r.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(o,{width:"short",context:"formatting"});case"eeee":default:return r.day(o,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){let o=t.getDay(),a=(o-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return u(a,e.length);case"co":return r.ordinalNumber(a,{unit:"day"});case"ccc":return r.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(o,{width:"narrow",context:"standalone"});case"cccccc":return r.day(o,{width:"short",context:"standalone"});case"cccc":default:return r.day(o,{width:"wide",context:"standalone"})}},i:function(t,e,r){let n=t.getDay(),o=n===0?7:n;switch(e){case"i":return String(o);case"ii":return u(o,e.length);case"io":return r.ordinalNumber(o,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){let o=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(t,e,r){let n=t.getHours(),o;switch(n===12?o=S.noon:n===0?o=S.midnight:o=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(t,e,r){let n=t.getHours(),o;switch(n>=17?o=S.evening:n>=12?o=S.afternoon:n>=4?o=S.morning:o=S.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return x.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):x.H(t,e)},K:function(t,e,r){let n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):u(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):u(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):x.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):x.s(t,e)},S:function(t,e){return x.S(t,e)},X:function(t,e,r){let n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return xt(n);case"XXXX":case"XX":return k(n);case"XXXXX":case"XXX":default:return k(n,":")}},x:function(t,e,r){let n=t.getTimezoneOffset();switch(e){case"x":return xt(n);case"xxxx":case"xx":return k(n);case"xxxxx":case"xxx":default:return k(n,":")}},O:function(t,e,r){let n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+wt(n,":");case"OOOO":default:return"GMT"+k(n,":")}},z:function(t,e,r){let n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+wt(n,":");case"zzzz":default:return"GMT"+k(n,":")}},t:function(t,e,r){let n=Math.trunc(t.getTime()/1e3);return u(n,e.length)},T:function(t,e,r){let n=t.getTime();return u(n,e.length)}};function wt(t,e=""){let r=t>0?"-":"+",n=Math.abs(t),o=Math.trunc(n/60),a=n%60;return a===0?r+String(o):r+String(o)+e+u(a,2)}function xt(t,e){return t%60===0?(t>0?"-":"+")+u(Math.abs(t)/60,2):k(t,e)}function k(t,e=""){let r=t>0?"-":"+",n=Math.abs(t),o=u(Math.trunc(n/60),2),a=u(n%60,2);return r+o+e+a}var bt=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Dt=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},ve=(t,e)=>{let r=t.match(/(P+)(p+)?/)||[],n=r[1],o=r[2];if(!o)return bt(t,e);let a;switch(n){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",bt(n,e)).replace("{{time}}",Dt(o,e))},kt={p:Dt,P:ve};var Pe=/^D+$/,Se=/^Y+$/,We=["D","DD","YY","YYYY"];function Mt(t){return Pe.test(t)}function Ot(t){return Se.test(t)}function vt(t,e,r){let n=Te(t,e,r);if(console.warn(n),We.includes(t))throw new RangeError(n)}function Te(t,e,r){let n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}var Ye=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Fe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ie=/^'([^]*?)'?$/,Ce=/''/g,Ne=/[a-zA-Z]/;function y(t,e,r){let n=b(),o=r?.locale??n.locale??j,a=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,i=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,m=c(t);if(!it(m))throw new RangeError("Invalid time value");let p=e.match(Fe).map(s=>{let d=s[0];if(d==="p"||d==="P"){let T=kt[d];return T(s,o.formatLong)}return s}).join("").match(Ye).map(s=>{if(s==="''")return{isToken:!1,value:"'"};let d=s[0];if(d==="'")return{isToken:!1,value:$e(s)};if(Q[d])return{isToken:!0,value:s};if(d.match(Ne))throw new RangeError("Format string contains an unescaped latin alphabet character `"+d+"`");return{isToken:!1,value:s}});o.localize.preprocessor&&(p=o.localize.preprocessor(m,p));let f={firstWeekContainsDate:a,weekStartsOn:i,locale:o};return p.map(s=>{if(!s.isToken)return s.value;let d=s.value;(!r?.useAdditionalWeekYearTokens&&Ot(d)||!r?.useAdditionalDayOfYearTokens&&Mt(d))&&vt(d,e,String(t));let T=Q[d[0]];return T(m,d,o.localize,f)}).join("")}function $e(t){let e=t.match(Ie);return e?e[1].replace(Ce,"'"):t}function Pt(t){return c(t).getDay()}function W(t,e){let r=e-Pt(t);return r<=0&&(r+=7),g(t,r)}function St(t){return W(t,5)}function Wt(t){return W(t,6)}function Tt(t){return W(t,0)}function F(t,e){return et(t,-e)}var Yt=require("@raycast/api"),Ft=require("path"),It=require("fs/promises"),Ct=require("child_process");async function Nt(t,...e){let r=(0,Ft.join)(Yt.environment.assetsPath,"compiled_raycast_swift/AppleReminders");return await(0,It.chmod)(r,"755"),new Promise((n,o)=>{let a=[t];for(let f of e)try{a.push(JSON.stringify(f,(s,d)=>d===void 0?null:d))}catch(s){o(new I("Failed to serialize input to JSON: "+s.message));return}let i=(0,Ct.spawn)(r,a),m=[],p=[];i.stdout?.on("data",f=>{m.push(f.toString())}),i.stderr?.on("data",f=>{p.push(f.toString())}),i.on("exit",f=>{if(f===0)try{let s=m.join("").trim();s.length!=0?n(JSON.parse(s)):n(null)}catch(s){let d=new I("Failed to deserialize result from JSON: "+s.message);d.stdout=m.join("").trim(),d.stderr=p.join("").trim(),o(d)}else{let s=new I(p.join("").trim()||m.join("").trim()||"Could not get any data");s.stdout=m.join("").trim(),s.stderr=p.join("").trim(),o(s)}}),i.on("error",f=>{o(f)})})}async function $t(t){return await Nt("getData",t)}async function _(t){return await Nt("createReminder",t)}var I=class extends Error{constructor(e){super(e),this.name="SwiftError"}};async function Et(t){try{let e=(0,h.getPreferenceValues)();if(e.shouldCloseMainWindow?await(0,h.closeMainWindow)():await(0,h.showToast)({style:h.Toast.Style.Animated,title:"Adding to-do"}),!h.environment.canAccess(h.AI)||e.dontUseAI){await _({title:t.arguments.text,description:t.arguments.notes}),await(0,h.showToast)({style:h.Toast.Style.Success,title:`Added "${t.arguments.text}" to default list`});return}let n=(await $t(void 0)).lists.map(Y=>`${Y.title}:${Y.id}`),o=new Date,a=y(o,"yyyy-MM-dd"),i=y(o,"HH:mm"),m=y(g(o,1),"yyyy-MM-dd"),p=y(St(o),"yyyy-MM-dd"),f=y(Wt(o),"yyyy-MM-dd"),s=y(Tt(o),"yyyy-MM-dd"),d=g(o,-3),T=y(d,"MMM"),Rt=y(d,"d"),G=y(ot(d,1),"yyyy-MM-dd"),X=g(o,2),M=y(X,"yyyy-MM-dd"),C=y(X,"EEEE"),B=y(g(o,9),"yyyy-MM-dd"),J=y(F(o,1),"haa"),qt=y(g(F(o,1),1),"yyyy-MM-dd'T'HH:00:ss"),N=y(F(o,-1),"haa"),V=y(g(F(o,-1),1),"yyyy-MM-dd'T'HH:00:ss"),Ht=`Act as a NLP parser for tasks. I'll give you a task text and you'll return me only a parsable and minified JSON object.


Here's the JSON Object structure:
{
  "title": <Task title>,
  "description": <Task description. A human-readable description of the task. Use relative dates when appropriate. Include the task name in single quotes. Always include the list (or "default list" if none is specified). Always include the priority level if specified. Always include the recurrence if specified.>,
  "priority": <Task priority. Only pick the value from this list: "low", "medium", "high". Use the "high" priority if the task text specifies a word such as "urgent", "important", or an exclamation mark.>,
  "listId": <Task list ID. Pick it from the following table by finding the list name corresponding to an ID: ${n}. Don't add a listId if the user hasn't specified a list name. Note that the user can prepend the "#" or "@" symbols to list names, for example, "#work" or "@work".>,
  "dueDate": <Task due date. Can either be a full day date (YYYY-MM-DD) or an ISO date if the time is specified (YYYY-MM-DDTHH:mm:ss.sssZ). Use sensible defaults for common timeframes (e.g "8am" for "morning", "1pm" for "afternoon", "6pm" for "evening"). A number with "a" or "p" appended (e.g. "1p" or "8a") should be treated as AM or PM. Never use dates before ${a} unless the specific month/day/year is provided. If the user includes a time before ${i} and no date, assume they mean tomorrow>,
  "recurrence": {
    "frequency": <Recurrence frequency. Only pick the value from this list: "daily", "weekly", "monthly", "yearly".>,
    "interval": <Recurrence interval. An integer greater than 0 that specifies how often a pattern repeats. If a recurrence frequency is "weekly" rule and the interval is 1, then the pattern repeats every week. If a recurrence frequency is "monthly" rule and the interval is 3, then the pattern repeats every 3 months.>,
    "endDate": <Recurrence end date. A full day date (YYYY-MM-DD). If no end date is specified, the recurrence will repeat forever.>
  }
}

Here are the rules you must follow:
- You MUST return a valid, parsable JSON object.
- Any text in quotes should be taken in its entirely as the task's title, and not interpreted for dates, priority, lists, etc.
- The title is made up of all the words you can't parse, in order. NEVER drop words.
- Always capitalize weekday, month, and list names in your output.
- Don't include a time unless specifically indicated by the user.
- Today is ${a} and the current time is ${i}.
- Pay special attention to "this" vs "next" day of the week.
- The weekend begins on Saturday and the week begins on Monday. (e.g. tasks for "next week" would be scheduled for the upcoming Monday.)
- Any recurring task MUST include a dueDate. If no due date is specified, use one that makes the most sense

Here are some examples to help you out:
- Respond to email: {"title":"Respond to email","description":"'Respond to email' to default list"}
- Book flights today: {"title":"Book flights","description":"'Book flights' today to default list","dueDate":"${a}"}
- Collect dry cleaning this evening: {"title":"Collect dry cleaning","description":"'Collect dry cleaning' today at 6pm to default list","dueDate":"${a}T18:00:00.000Z"}
- Ship feature low priority: {"title":"Ship feature","description":"'Ship feature' (low priority) to default list","priority":"low"}
- Pay taxes this weekend important: {"title":"Pay taxes","description":"'Pay taxes' (high priority) on Saturday to default list","priority":"high","dueDate":"${f}"}
- Check for newspaper today!: {"title":"Check for newspaper","description":"'Check for newspaper' (high priority) today to default list","dueDate":"${a}","priority":"high"} 
- Take a walk ${N}: {"title":"Take a walk","description":"'Take a walk' today at ${N} to default list","dueDate":"${V}"}
- Take a walk ${J}: {"title":"Take a walk","description":"'Take a walk' tomorrow at ${J} to default list","dueDate":"${qt}"}
- Eat ${N} nachos: {"title":"Eat nachos","description":"'Eat nachos' today at ${N} to default list","dueDate":"${V}"}
- Get groceries ${C}: {"title":"Get groceries","description":"'Get groceries' on ${M} to default list","dueDate":"${M}"}
- Get groceries next ${C}: {"title":"Get groceries","description":"'Get groceries' on ${B} to default list","dueDate":"${B}"}
- Read a book every day: {"title":"Read a book","description":"'Read a book' daily to default list","dueDate":"${a}","recurrence":{"frequency":"daily","interval":1}, }
- Read every book fri: {"title":"Read every book","description":"'Read every book' on Friday to default list","dueDate":"${p}"}
- Read books every fri: {"title":"Read books","description":"'Read books' weekly on Fridays to default list","dueDate":"${p}","recurrence":{"frequency":"weekly","interval":1}}
- Clean the house every sunday: {"title":"Clean the house","description":"'Clean the house' weekly on Sundays to default list","dueDate":"${s}","recurrence":{"frequency":"weekly","interval":1}
- Call mom monthly on sunday: {"title":"Call mom","description":"'Call mom' monthly starting ${s} to default list","dueDate":"${s}","recurrence":{"frequency":"monthly","interval":1}}
- Dad's birthday on ${T} ${Rt}: {"title":"Dad's birthday","description":"'Dad's birthday' on ${G} to default list","dueDate":"${G}"}
- Monthly breakfast with friends Saturday: {"title":"Monthly breakfast with friends","description":"'Monthly breakfast with friends' recurring monthly starting ${f} to default list","dueDate":"${f}","recurrence":{"frequency":"monthly","interval":1}}
- Review budget every 2 months starting from tomorrow: {"title":"Review budget","description":"'Review budget' every 2 months starting ${m} to default list","dueDate":"${m}", "recurrence":{"frequency":"monthly","interval":2}}
- Water the flowers every day from tomorrow until ${C}: {"title":"Water the flowers","description":"'Water the flowers' every day from ${m} until ${M} to default list","dueDate":"${m}","recurrence":{"frequency":"daily","interval":1,"endDate":"${M}"}}
- Cook meals until ${C}: {"title":"Cook meals","description":"'Cook meals' every day until ${M} to default list","dueDate":"${a}","recurrence":{"frequency":"daily","interval":1,"endDate":"${M}"}}

Task text: "${t.fallbackText??t.arguments.text}"`,{description:At,...O}=await Ee(Ht);if(t.arguments.notes&&(O.notes=t.arguments.notes),O.dueDate&&O.dueDate.includes("T")){let Y=new Date(O.dueDate),Lt=Y.getTimezoneOffset()*60*1e3;O.dueDate=new Date(Y.getTime()+Lt).toISOString()}await _(O),await(0,h.showToast)({style:h.Toast.Style.Success,title:"Added reminder: "+At})}catch(e){console.log(e);let r=e instanceof Error?e.message:JSON.stringify(e);await(0,h.showToast)({style:h.Toast.Style.Failure,title:"Unable to add reminder",message:r})}}async function Ee(t){for(let r=0;r<3;r++)try{let n=await h.AI.ask(t,{model:"gpt-4"}),o=JSON.parse(n.trim());if(o.recurrence&&!o.dueDate)throw new Error("Recurrence without dueDate");return o}catch{console.log(`Retriying AI call. Retry count: ${r}`)}throw new Error("Max retries reached. Unable to get a valid response from AI.")}
