"use strict";var I=Object.defineProperty;var ne=Object.getOwnPropertyDescriptor;var se=Object.getOwnPropertyNames;var ae=Object.prototype.hasOwnProperty;var re=(t,e)=>{for(var s in e)I(t,s,{get:e[s],enumerable:!0})},oe=(t,e,s,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of se(e))!ae.call(t,o)&&o!==s&&I(t,o,{get:()=>e[o],enumerable:!(r=ne(e,o))||r.enumerable});return t};var ce=t=>oe(I({},"__esModule",{value:!0}),t);var Ie={};re(Ie,{default:()=>te});module.exports=ce(Ie);var n=require("@raycast/api"),g=require("react");var ie=new RegExp("([\\p{Ll}\\d])(\\p{Lu})","gu"),le=new RegExp("(\\p{Lu})([\\p{Lu}][\\p{Ll}])","gu"),fe=new RegExp("(\\d)\\p{Ll}|(\\p{L})\\d","u"),Ce=/[^\p{L}\d]+/giu,X="$1\0$2",J="";function W(t){let e=t.trim();e=e.replace(ie,X).replace(le,X),e=e.replace(Ce,"\0");let s=0,r=e.length;for(;e.charAt(s)==="\0";)s++;if(s===r)return[];for(;e.charAt(r-1)==="\0";)r--;return e.slice(s,r).split(/\0/g)}function ue(t){let e=W(t);for(let s=0;s<e.length;s++){let r=e[s],o=fe.exec(r);if(o){let i=o.index+(o[1]??o[2]).length;e.splice(s,1,r.slice(0,i),r.slice(i))}}return e}function T(t,e){let[s,r,o]=L(t,e);return s+r.map(b(e?.locale)).join(e?.delimiter??" ")+o}function H(t,e){let[s,r,o]=L(t,e),i=b(e?.locale),f=E(e?.locale),u=e?.mergeAmbiguousCharacters?O(i,f):G(i,f);return s+r.map((d,p)=>p===0?i(d):u(d,p)).join(e?.delimiter??"")+o}function B(t,e){let[s,r,o]=L(t,e),i=b(e?.locale),f=E(e?.locale),u=e?.mergeAmbiguousCharacters?O(i,f):G(i,f);return s+r.map(u).join(e?.delimiter??"")+o}function K(t,e){return R(t,{delimiter:"_",...e})}function R(t,e){let[s,r,o]=L(t,e),i=b(e?.locale),f=E(e?.locale);return s+r.map(O(i,f)).join(e?.delimiter??" ")+o}function U(t,e){let[s,r,o]=L(t,e);return s+r.map(E(e?.locale)).join(e?.delimiter??"_")+o}function Q(t,e){return T(t,{delimiter:".",...e})}function N(t,e){return T(t,{delimiter:"-",...e})}function V(t,e){return T(t,{delimiter:"/",...e})}function q(t,e){return T(t,{delimiter:"_",...e})}function v(t,e){return R(t,{delimiter:"-",...e})}function b(t){return t===!1?e=>e.toLowerCase():e=>e.toLocaleLowerCase(t)}function E(t){return t===!1?e=>e.toUpperCase():e=>e.toLocaleUpperCase(t)}function O(t,e){return s=>`${e(s[0])}${t(s.slice(1))}`}function G(t,e){return(s,r)=>{let o=s[0];return(r>0&&o>="0"&&o<="9"?"_"+o:e(o))+t(s.slice(1))}}function L(t,e={}){let s=e.split??(e.separateNumbers?ue:W),r=e.prefixCharacters??J,o=e.suffixCharacters??J,i=0,f=t.length;for(;i<t.length;){let u=t.charAt(i);if(!r.includes(u))break;i++}for(;f>i;){let u=f-1,d=t.charAt(u);if(!o.includes(d))break;f=u}return[t.slice(0,i),s(t.slice(i,f)),t.slice(f)]}function M(t,e){let s="";for(let r of t)s+=Math.random()>.5?r.toLocaleUpperCase(e):r.toLocaleLowerCase(e);return s}function Y(t,e){let s="";for(let r of t){let o=r.toLocaleLowerCase(e);s+=r===o?r.toLocaleUpperCase(e):o}return s}var de=/(\S+)|(.)/g,me=new RegExp("[\\.#]\\p{Alphabetic}","u"),he=new RegExp("\\p{Ll}(?=[\\p{Lu}])","u"),ge=new RegExp("\\p{Alphabetic}+","gu"),Ae=new RegExp("^(\\P{Alphabetic})*(?:\\p{Alphabetic}\\.){2,}(\\P{Alphabetic})*$","u"),xe=new Set(["\u2014","\u2013","-","\u2015","/"]),Z=new Set([".","!","?"]),Se=new Set([...Z,":",'"',"'","\u201D"]),we=new Set(["a","an","and","as","at","because","but","by","en","for","if","in","neither","nor","of","on","only","or","over","per","so","some","than","that","the","to","up","upon","v","versus","via","vs","when","with","without","yet"]);function $(t,e={}){let{locale:s=void 0,sentenceCase:r=!1,sentenceTerminators:o=Z,titleTerminators:i=Se,smallWords:f=we,wordSeparators:u=xe}=typeof e=="string"||Array.isArray(e)?{locale:e}:e,d=r?o:i,p="",m=!0;for(let h of t.matchAll(de)){let{1:C,2:P,index:F=0}=h;if(P){p+=P;continue}if(me.test(C)){let A=C.match(Ae);if(A){let[w,a="",l=""]=A;p+=r&&!m?C:z(C,a.length,s),m=d.has(l.charAt(0));continue}p+=C,m=d.has(C.charAt(C.length-1))}else{let A=Array.from(C.matchAll(ge)),w=C,a=!1;for(let l=0;l<A.length;l++){let{0:x,index:S=0}=A[l],D=C.charAt(S+x.length);if(a=d.has(D),m)m=!1;else{if(r||he.test(x))continue;if(A.length===1){if(f.has(x)&&!(F+C.length===t.length)&&!a)continue}else if(l>0&&(!u.has(C.charAt(S-1))||f.has(x)&&u.has(D)))continue}w=z(w,S,s)}p+=w,m=a||d.has(C.charAt(C.length-1))}}return p}function z(t,e,s){return t.slice(0,e)+t.charAt(e).toLocaleUpperCase(s)+t.slice(e+1)}var Te=t=>t.toLowerCase(),ye=t=>t.length<=1?t.toLowerCase():t[0].toLowerCase()+t.slice(1),Pe=t=>$(t,{sentenceCase:!0}),Le=t=>t.toUpperCase(),Re=t=>t.length<=1?t.toUpperCase():t[0].toUpperCase()+t.slice(1),y={"Camel Case":H,"Capital Case":R,"Constant Case":U,"Dot Case":Q,"Header Case":v,"Kebab Case":N,"Lower Case":Te,"Lower First":ye,"Macro Case":U,"No Case":T,"Param Case":N,"Pascal Case":B,"Pascal Snake Case":K,"Path Case":V,"Random Case":M,"Sentence Case":Pe,"Snake Case":q,"Swap Case":Y,"Title Case":$,"Upper Case":Le,"Upper First":Re,"Sponge Case":M,"Train Case":v},Xe=Object.keys(y);var c=require("react/jsx-runtime"),k=class t extends Error{constructor(){super("No text"),Object.setPrototypeOf(this,t.prototype)}};async function be(){try{return await(0,n.getSelectedText)()}catch{return""}}async function ee(t){let e=await n.Clipboard.readText(),s=await be();if(t==="clipboard"){if(e)return e;if(s)return s}else{if(s)return s;if(e)return e}throw new k}function j(t,e){let s=[],r=[],o=t.split(`
`);for(let i of o){let f=e(i);s.push(f),r.push((f.length===0?"\u200B":f)+`
`)}return{rawText:s.join(`
`),markdown:r.join(`
`)}}var _=new n.Cache,Ee=()=>{let t=_.get("pinned");return t?JSON.parse(t):[]},ke=()=>{let t=_.get("recent");return t?JSON.parse(t):[]},_e=t=>{_.set("pinned",JSON.stringify(t))},Fe=t=>{_.set("recent",JSON.stringify(t))};function te(t){let e=(0,n.getPreferenceValues)(),s=e.source,r=e.action,o=t.launchContext?.case;if(o){(async()=>{let a=await ee(s),l=y[o](a);r==="paste"?n.Clipboard.paste(l):n.Clipboard.copy(l),(0,n.showHUD)(`Converted to ${o}`),(0,n.popToRoot)()})();return}let[i,f]=(0,g.useState)(""),[u,d]=(0,g.useState)(),[p,m]=(0,g.useState)([]),[h,C]=(0,g.useState)([]);(0,g.useEffect)(()=>{m(Ee()),C(ke()),(0,n.getFrontmostApplication)().then(d)},[]),(0,g.useEffect)(()=>{_e(p)},[p]),(0,g.useEffect)(()=>{Fe(h)},[h]);let P=async()=>{try{f(await ee(s))}catch(a){a instanceof k&&(0,n.showToast)({style:n.Toast.Style.Failure,title:"Nothing to convert",message:"Please ensure that text is either selected or copied"})}};(0,g.useEffect)(()=>{P()},[]);let F=a=>(0,c.jsx)(n.Action,{title:"Copy to Clipboard",icon:n.Icon.Clipboard,onAction:()=>{a.pinned||C([a.case,...h.filter(l=>l!==a.case)].slice(0,4)),(0,n.showHUD)("Copied to Clipboard"),n.Clipboard.copy(a.modified),e.popToRoot?(0,n.closeMainWindow)():(0,n.popToRoot)()}}),A=a=>u?(0,c.jsx)(n.Action,{title:`Paste in ${u.name}`,icon:{fileIcon:u.path},onAction:()=>{a.pinned||C([a.case,...h.filter(l=>l!==a.case)].slice(0,4)),(0,n.showHUD)(`Pasted in ${u.name}`),n.Clipboard.paste(a.modified),e.popToRoot?(0,n.closeMainWindow)():(0,n.popToRoot)()}}):null,w=a=>{let l=encodeURIComponent(`{"case":"${a.case}"}`),x=`raycast://extensions/erics118/${n.environment.extensionName}/${n.environment.commandName}?context=${l}`;return(0,c.jsx)(n.List.Item,{id:a.case,title:a.case,accessories:[{text:a.modified}],detail:(0,c.jsx)(n.List.Item.Detail,{markdown:a.detail}),actions:(0,c.jsxs)(n.ActionPanel,{children:[(0,c.jsxs)(n.ActionPanel.Section,{children:[r==="paste"&&(0,c.jsx)(A,{...a}),(0,c.jsx)(F,{...a}),r==="copy"&&(0,c.jsx)(A,{...a})]}),(0,c.jsxs)(n.ActionPanel.Section,{children:[a.pinned?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.Action,{title:"Remove Pinned Case",icon:n.Icon.PinDisabled,shortcut:{key:"r",modifiers:["cmd"]},onAction:()=>{m(p.filter(S=>S!==a.case))}}),(0,c.jsx)(n.Action,{title:"Clear Pinned Cases",icon:{source:n.Icon.XMarkCircle,tintColor:n.Color.Red},shortcut:{key:"r",modifiers:["cmd","shift"]},onAction:()=>{m([])}})]}):(0,c.jsx)(n.Action,{title:"Pin Case",icon:n.Icon.Pin,shortcut:{key:"p",modifiers:["cmd","shift"]},onAction:()=>{m([a.case,...p]),a.recent&&C(h.filter(S=>S!==a.case))}}),a.recent&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.Action,{title:"Remove Recent Case",icon:n.Icon.XMarkCircle,shortcut:{key:"r",modifiers:["cmd"]},onAction:()=>{C(h.filter(S=>S!==a.case))}}),(0,c.jsx)(n.Action,{title:"Clear Recent Cases",icon:{source:n.Icon.XMarkCircle,tintColor:n.Color.Red},shortcut:{key:"r",modifiers:["cmd","shift"]},onAction:()=>{C([])}})]}),(0,c.jsx)(n.Action.CreateQuicklink,{title:`Create Quicklink to Convert to ${a.case}`,quicklink:{name:`Convert to ${a.case}`,link:x}})]}),(0,c.jsx)(n.ActionPanel.Section,{children:(0,c.jsx)(n.Action,{title:"Refresh Content",icon:n.Icon.RotateAntiClockwise,shortcut:{key:"r",modifiers:["cmd"]},onAction:P})})]})})};return(0,c.jsxs)(n.List,{isShowingDetail:!0,children:[(0,c.jsx)(n.List.Section,{title:"Pinned",children:p?.map(a=>{let l=j(i,y[a]);return(0,c.jsx)(w,{case:a,modified:l.rawText,detail:l.markdown,pinned:!0},a)})}),(0,c.jsx)(n.List.Section,{title:"Recent",children:h.map(a=>{let l=j(i,y[a]);return(0,c.jsx)(w,{case:a,modified:l.rawText,detail:l.markdown,recent:!0},a)})}),(0,c.jsx)(n.List.Section,{title:"All Cases",children:Object.entries(y).filter(([a])=>e[a.replace(/ +/g,"")]&&!h.includes(a)&&!p.includes(a)).map(([a,l])=>{let x=j(i,l);return(0,c.jsx)(w,{case:a,modified:x.rawText,detail:x.markdown},a)})})]})}
