"use strict";var T=Object.create;var p=Object.defineProperty;var F=Object.getOwnPropertyDescriptor;var S=Object.getOwnPropertyNames;var x=Object.getPrototypeOf,L=Object.prototype.hasOwnProperty;var C=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),M=(e,t)=>{for(var r in t)p(e,r,{get:t[r],enumerable:!0})},h=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of S(t))!L.call(e,a)&&a!==r&&p(e,a,{get:()=>t[a],enumerable:!(o=F(t,a))||o.enumerable});return e};var O=(e,t,r)=>(r=e!=null?T(x(e)):{},h(t||!e||!e.__esModule?p(r,"default",{value:e,enumerable:!0}):r,e)),_=e=>h(p({},"__esModule",{value:!0}),e);var A=C((G,y)=>{"use strict";var q=require("os"),u=q.homedir();y.exports=e=>{if(typeof e!="string")throw new TypeError(`Expected a string, got ${typeof e}`);return u?e.replace(/^~(?=$|\/|\\)/,u):e}});var $={};M($,{default:()=>R});module.exports=_($);var n=require("@raycast/api"),D=require("react");var c=require("@raycast/api"),s=require("fs"),P=require("path"),g=O(A()),l=require("react/jsx-runtime"),f=(0,c.getPreferenceValues)(),d=(0,g.default)(f.downloadsFolder??"~/Downloads");function w(){return(0,s.readdirSync)(d).filter(t=>!t.startsWith(".")).map(t=>{let r=(0,P.join)(d,t),o=(0,s.statSync)(r).mtime;return{file:t,path:r,lastModifiedAt:o}}).sort((t,r)=>r.lastModifiedAt.getTime()-t.lastModifiedAt.getTime())}function I(){try{return(0,s.accessSync)(f.downloadsFolder,s.constants.R_OK),!0}catch(e){return console.error(e),!1}}var k=e=>t=>I()?((0,s.accessSync)(f.downloadsFolder,s.constants.R_OK),(0,l.jsx)(e,{...t})):(0,l.jsx)(c.Detail,{markdown:`## Permission Required

The Downloads Manager extension requires access to your Downloads folder. Please grant permission to use it.

![Grant Permission](permission.png)`,actions:(0,l.jsx)(c.ActionPanel,{children:(0,l.jsx)(c.Action.Open,{title:"Grant Permission",target:"x-apple.systempreferences:com.apple.preference.security?Privacy_AllFiles"})})});var i=require("react/jsx-runtime");function E(){let[e,t]=(0,D.useState)(w());function r(o){t(a=>a.filter(m=>Array.isArray(o)?!o.includes(m.path):o!==m.path))}return(0,i.jsxs)(n.List,{children:[e.length===0&&(0,i.jsx)(n.List.EmptyView,{icon:{fileIcon:d},title:"No downloads found",description:"Well, first download some files \xAF\\_(\u30C4)_/\xAF"}),e.map(o=>(0,i.jsx)(n.List.Item,{title:o.file,icon:{fileIcon:o.path},quickLook:{path:o.path,name:o.file},accessories:[{date:o.lastModifiedAt,tooltip:`Last modified: ${o.lastModifiedAt.toLocaleString()}`}],actions:(0,i.jsxs)(n.ActionPanel,{children:[(0,i.jsxs)(n.ActionPanel.Section,{children:[(0,i.jsx)(n.Action.Open,{title:"Open File",target:o.path}),(0,i.jsx)(n.Action.ShowInFinder,{path:o.path}),(0,i.jsx)(n.Action.CopyToClipboard,{title:"Copy File",content:{file:o.path},shortcut:{modifiers:["cmd","shift"],key:"c"}})]}),(0,i.jsxs)(n.ActionPanel.Section,{children:[(0,i.jsx)(n.Action.OpenWith,{path:o.path,shortcut:{modifiers:["cmd"],key:"o"}}),(0,i.jsx)(n.Action.ToggleQuickLook,{shortcut:{modifiers:["cmd"],key:"y"}})]}),(0,i.jsxs)(n.ActionPanel.Section,{children:[(0,i.jsx)(n.Action.Trash,{title:"Delete Download",paths:o.path,shortcut:{modifiers:["ctrl"],key:"x"},onTrash:r}),(0,i.jsx)(n.Action.Trash,{title:"Delete All Downloads",paths:e.map(a=>a.path),shortcut:{modifiers:["ctrl","shift"],key:"x"},onTrash:r})]})]})},o.path))]})}var R=k(E);
